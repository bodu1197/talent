[{"filePath":"C:\\Users\\ohyus\\talent\\src\\__tests__\\e2e\\auth\\admin-login.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\__tests__\\e2e\\auth\\auth.setup.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'expect' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test as setup, expect } from '@playwright/test'\n\nconst authFile = 'playwright/.auth/user.json'\n\nsetup('authenticate as admin', async ({ page }) => {\n  // 로그인 페이지로 이동\n  await page.goto('/auth/login')\n\n  // 로그인 폼 입력\n  await page.fill('input[name=\"email\"]', 'ohyus1197@gmail.com')\n  await page.fill('input[name=\"password\"]', process.env.TEST_ADMIN_PASSWORD || '')\n\n  // 로그인 버튼 클릭\n  await page.click('button[type=\"submit\"]')\n\n  // 로그인 완료 대기 - 마이페이지 또는 대시보드로 리디렉션됨\n  await page.waitForURL(/\\/(mypage|admin)/)\n\n  // 인증 상태 저장\n  await page.context().storageState({ path: authFile })\n})\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\__tests__\\e2e\\mypage\\mypage-navigation.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\__tests__\\e2e\\services\\service-search.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'hasPrice' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":79,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":79,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from '@playwright/test'\n\ntest.describe('서비스 검색 및 조회', () => {\n  test('메인 페이지에서 서비스 목록이 표시된다', async ({ page }) => {\n    await page.goto('/')\n\n    // 페이지 로딩 완료 대기\n    await page.waitForLoadState('networkidle')\n\n    // 서비스 목록 또는 검색 기능 확인\n    const hasServiceList = await page.locator('[data-testid=\"service-list\"], .service-card, [class*=\"service\"]').count() > 0\n    const hasSearchBar = await page.locator('input[type=\"search\"], input[placeholder*=\"검색\"]').count() > 0\n\n    // 서비스 목록이나 검색 기능 중 하나는 있어야 함\n    expect(hasServiceList || hasSearchBar).toBeTruthy()\n  })\n\n  test('카테고리별 서비스 필터링', async ({ page }) => {\n    await page.goto('/')\n    await page.waitForLoadState('networkidle')\n\n    // 카테고리 선택 (있는 경우)\n    const categorySelector = page.locator('[data-testid=\"category-filter\"], select[name*=\"category\"], button:has-text(\"카테고리\")')\n\n    if (await categorySelector.count() > 0) {\n      await categorySelector.first().click()\n\n      // 카테고리 옵션 선택\n      const firstOption = page.locator('[role=\"option\"], option, [data-testid=\"category-option\"]').first()\n      if (await firstOption.count() > 0) {\n        await firstOption.click()\n\n        // 필터링 결과 대기\n        await page.waitForTimeout(1000)\n\n        // 필터링된 결과가 있는지 확인\n        const serviceCount = await page.locator('[data-testid=\"service-card\"], .service-card').count()\n        expect(serviceCount).toBeGreaterThanOrEqual(0)\n      }\n    }\n  })\n\n  test('서비스 검색 기능', async ({ page }) => {\n    await page.goto('/')\n    await page.waitForLoadState('networkidle')\n\n    // 검색창 찾기\n    const searchInput = page.locator('input[type=\"search\"], input[placeholder*=\"검색\"]').first()\n\n    if (await searchInput.count() > 0) {\n      // 검색어 입력\n      await searchInput.fill('디자인')\n      await searchInput.press('Enter')\n\n      // 검색 결과 대기\n      await page.waitForTimeout(1000)\n\n      // URL 변경 또는 결과 표시 확인\n      const hasResults = await page.locator('[data-testid=\"search-results\"], [data-testid=\"service-list\"]').count() > 0\n      expect(hasResults || page.url().includes('search')).toBeTruthy()\n    }\n  })\n\n  test('서비스 상세 페이지 이동', async ({ page }) => {\n    await page.goto('/')\n    await page.waitForLoadState('networkidle')\n\n    // 첫 번째 서비스 카드 클릭\n    const serviceCard = page.locator('[data-testid=\"service-card\"], .service-card, a[href*=\"/services/\"]').first()\n\n    if (await serviceCard.count() > 0) {\n      await serviceCard.click()\n\n      // 상세 페이지로 이동 확인\n      await page.waitForURL(/\\/services\\/\\w+/, { timeout: 5000 })\n\n      // 상세 정보 표시 확인\n      const hasTitle = await page.locator('h1, [data-testid=\"service-title\"]').count() > 0\n      const hasPrice = await page.locator('[data-testid=\"service-price\"], text=/₩|원/').count() > 0\n\n      expect(hasTitle).toBeTruthy()\n    }\n  })\n})\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\__tests__\\lib\\error.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\__tests__\\setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\__tests__\\unit\\components\\common\\ErrorState.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\__tests__\\unit\\components\\common\\LoadingSpinner.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\__tests__\\unit\\lib\\supabase\\queries\\coupons.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\__tests__\\unit\\lib\\supabase\\queries\\earnings.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\__tests__\\unit\\lib\\supabase\\queries\\messages.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\about\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\advertising\\credits\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\advertising\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\advertising\\payments\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\advertising\\statistics\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\categories\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\disputes\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\logs\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\orders\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\reports\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\reviews\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\service-revisions\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\services\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\services\\pending\\[id]\\PendingServiceDetailClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\services\\pending\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\services\\revisions\\[id]\\RevisionDetailClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\services\\revisions\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\settings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\settlements\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\statistics\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\tax-invoices\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\tax-invoices\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\users\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\admin\\withdrawals\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\ai\\AIPageContent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\ai\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\admin\\advertising\\credits\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\admin\\advertising\\payments\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\admin\\advertising\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\admin\\advertising\\statistics\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\admin\\analytics\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\admin\\categories\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\analytics\\track\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\auth\\check-email\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\chat\\favorites\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\chat\\messages\\mark-all-read\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'request' is defined but never used. Allowed unused args must match /^_/u.","line":5,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":35}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@/lib/supabase/server'\n\n// 사용자의 모든 읽지 않은 메시지를 읽음 처리\nexport async function POST(request: NextRequest) {\n  try {\n    const supabase = await createClient()\n    const { data: { user } } = await supabase.auth.getUser()\n\n    if (!user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    // 모든 읽지 않은 메시지를 읽음 처리 (내가 받은 메시지만)\n    const { data, error } = await supabase\n      .from('chat_messages')\n      .update({ is_read: true })\n      .eq('is_read', false)\n      .neq('sender_id', user.id)\n      .select()\n\n    if (error) {\n      console.error('Mark all messages as read error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n      return NextResponse.json({ error: error.message }, { status: 500 })\n    }\n\n    return NextResponse.json({ success: true, count: data?.length || 0 })\n  } catch (error) {\n    console.error('Mark all messages as read API error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\chat\\messages\\mark-read\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\chat\\messages\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\chat\\rooms\\create-from-order\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\chat\\rooms\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'request' is defined but never used. Allowed unused args must match /^_/u.","line":6,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":34}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@/lib/supabase/server'\nimport { logger } from '@/lib/logger'\n\n// 채팅방 목록 조회\nexport async function GET(request: NextRequest) {\n  try {\n    const supabase = await createClient()\n    const { data: { user } } = await supabase.auth.getUser()\n\n    if (!user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    // 현재 사용자가 판매자인지 확인\n    const { data: seller } = await supabase\n      .from('sellers')\n      .select('id')\n      .eq('user_id', user.id)\n      .maybeSingle()\n\n    // 채팅방 목록 조회 (user1_id 또는 user2_id로 참여한 채팅방)\n    const { data: rooms, error } = await supabase\n      .from('chat_rooms')\n      .select(`\n        id,\n        user1_id,\n        user2_id,\n        service_id,\n        last_message_at,\n        created_at\n      `)\n      .or(`user1_id.eq.${user.id},user2_id.eq.${user.id}`)\n      .order('last_message_at', { ascending: false })\n\n    if (error) {\n      logger.error('Chat rooms fetch error:', error)\n      return NextResponse.json({ error: error.message }, { status: 500 })\n    }\n\n    if (!rooms || rooms.length === 0) {\n      return NextResponse.json({ rooms: [] })\n    }\n\n    // 모든 필요한 ID 수집\n    const otherUserIds = rooms.map(room =>\n      room.user1_id === user.id ? room.user2_id : room.user1_id\n    )\n    const serviceIds = rooms.map(r => r.service_id).filter(Boolean)\n    const roomIds = rooms.map(r => r.id)\n\n    // 병렬로 모든 데이터 가져오기\n    const [sellersData, usersData, servicesData, messagesData, unreadData, favoritesData, ordersData] = await Promise.all([\n      // 판매자 정보\n      supabase\n        .from('sellers')\n        .select('id, user_id, business_name, display_name, profile_image')\n        .in('user_id', otherUserIds),\n\n      // 사용자 정보\n      supabase\n        .from('users')\n        .select('id, name, profile_image')\n        .in('id', otherUserIds),\n\n      // 서비스 정보\n      serviceIds.length > 0\n        ? supabase.from('services').select('id, title').in('id', serviceIds)\n        : Promise.resolve({ data: [] }),\n\n      // 각 채팅방의 마지막 메시지 (서브쿼리 대신 모든 메시지 가져와서 클라이언트에서 필터링)\n      supabase\n        .from('chat_messages')\n        .select('room_id, message, created_at, sender_id')\n        .in('room_id', roomIds)\n        .order('created_at', { ascending: false }),\n\n      // 읽지 않은 메시지 수\n      supabase\n        .from('chat_messages')\n        .select('room_id, id')\n        .in('room_id', roomIds)\n        .eq('is_read', false)\n        .neq('sender_id', user.id),\n\n      // 즐겨찾기 정보\n      supabase\n        .from('chat_favorites')\n        .select('room_id')\n        .eq('user_id', user.id)\n        .in('room_id', roomIds),\n\n      // 진행 중인 주문 정보 (완료/취소/환불되지 않은 주문)\n      serviceIds.length > 0\n        ? supabase\n            .from('orders')\n            .select('buyer_id, seller_id, service_id, status')\n            .in('service_id', serviceIds)\n            .not('status', 'in', '(\"completed\",\"cancelled\",\"refunded\")')\n        : Promise.resolve({ data: [] })\n    ])\n\n    // 데이터 맵 생성\n    const sellersMap = new Map((sellersData.data || []).map(s => [s.user_id, s]))\n    const usersMap = new Map((usersData.data || []).map(u => [u.id, u]))\n    const servicesMap = new Map((servicesData.data || []).map(s => [s.id, s]))\n\n    // 마지막 메시지 맵 생성 (각 room의 첫 번째 메시지)\n    const lastMessageMap = new Map()\n    if (messagesData.data) {\n      messagesData.data.forEach(msg => {\n        if (!lastMessageMap.has(msg.room_id)) {\n          lastMessageMap.set(msg.room_id, msg)\n        }\n      })\n    }\n\n    // 읽지 않은 메시지 수 맵 생성\n    const unreadCountMap = new Map()\n    if (unreadData.data) {\n      logger.info(`[Chat Rooms API] Total unread messages: ${unreadData.data.length}`)\n      unreadData.data.forEach(msg => {\n        unreadCountMap.set(msg.room_id, (unreadCountMap.get(msg.room_id) || 0) + 1)\n      })\n      logger.info('[Chat Rooms API] Unread count map:', Object.fromEntries(unreadCountMap))\n    }\n\n    // 즐겨찾기 맵 생성\n    const favoritesSet = new Set((favoritesData.data || []).map(f => f.room_id))\n\n    // 진행 중인 주문 맵 생성 (service_id + buyer_id + seller_id 조합으로 매칭)\n    const activeOrdersMap = new Map()\n    if (ordersData.data) {\n      ordersData.data.forEach(order => {\n        const key = `${order.service_id}-${order.buyer_id}-${order.seller_id}`\n        activeOrdersMap.set(key, true)\n      })\n    }\n\n    // 데이터 조합\n    const roomsWithMessages = rooms.map(room => {\n      const otherUserId = room.user1_id === user.id ? room.user2_id : room.user1_id\n      const sellerInfo = sellersMap.get(otherUserId)\n      const userInfo = usersMap.get(otherUserId)\n\n      let otherUser\n      if (sellerInfo) {\n        otherUser = {\n          id: otherUserId,\n          name: sellerInfo.display_name || sellerInfo.business_name || '판매자',\n          profile_image: sellerInfo.profile_image,\n          seller_id: sellerInfo.id\n        }\n      } else if (userInfo) {\n        otherUser = {\n          id: otherUserId,\n          name: userInfo.name || '사용자',\n          profile_image: userInfo.profile_image || null\n        }\n      } else {\n        otherUser = {\n          id: otherUserId,\n          name: '사용자',\n          profile_image: null\n        }\n      }\n\n      // 진행 중인 주문이 있는지 확인\n      // user1_id와 user2_id 중 어느 쪽이 buyer인지 확인해야 함\n      let hasActiveOrder = false\n      if (room.service_id) {\n        // 현재 사용자가 buyer인 경우\n        const key1 = `${room.service_id}-${user.id}-${otherUserId}`\n        // 현재 사용자가 seller인 경우\n        const key2 = `${room.service_id}-${otherUserId}-${user.id}`\n        hasActiveOrder = activeOrdersMap.has(key1) || activeOrdersMap.has(key2)\n      }\n\n      return {\n        ...room,\n        otherUser,\n        seller_id: seller?.id || null,\n        service: room.service_id ? servicesMap.get(room.service_id) || null : null,\n        lastMessage: lastMessageMap.get(room.id) || null,\n        unreadCount: unreadCountMap.get(room.id) || 0,\n        is_favorite: favoritesSet.has(room.id),\n        has_active_order: hasActiveOrder\n      }\n    })\n\n    return NextResponse.json({ rooms: roomsWithMessages })\n  } catch (error) {\n    logger.error('Chat rooms API error:', error)\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\n  }\n}\n\n// 채팅방 생성 또는 기존 채팅방 반환\nexport async function POST(request: NextRequest) {\n  try {\n    const supabase = await createClient()\n    const { data: { user } } = await supabase.auth.getUser()\n\n    if (!user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const body = await request.json()\n    const { seller_id, service_id, other_user_id } = body\n\n    // seller_id 또는 other_user_id 중 하나는 필수\n    const targetUserId = other_user_id || seller_id\n\n    if (!targetUserId) {\n      return NextResponse.json({ error: 'seller_id or other_user_id is required' }, { status: 400 })\n    }\n\n    // seller_id가 제공된 경우, seller의 user_id로 변환\n    let otherUserId = targetUserId\n    if (seller_id && !other_user_id) {\n      const { data: seller } = await supabase\n        .from('sellers')\n        .select('user_id')\n        .eq('id', seller_id)\n        .single()\n\n      if (!seller) {\n        return NextResponse.json({ error: 'Seller not found' }, { status: 404 })\n      }\n      otherUserId = seller.user_id\n    }\n\n    // user1_id와 user2_id 정렬 (user1_id <= user2_id)\n    const user1_id = user.id < otherUserId ? user.id : otherUserId\n    const user2_id = user.id < otherUserId ? otherUserId : user.id\n\n    // 기존 채팅방 확인 (user1_id, user2_id, service_id로 확인)\n    let query = supabase\n      .from('chat_rooms')\n      .select('id')\n      .eq('user1_id', user1_id)\n      .eq('user2_id', user2_id)\n\n    // service_id가 있으면 일치하는 채팅방, 없으면 service_id가 null인 채팅방 찾기\n    if (service_id) {\n      query = query.eq('service_id', service_id)\n    } else {\n      query = query.is('service_id', null)\n    }\n\n    const { data: existingRoom } = await query.maybeSingle()\n\n    if (existingRoom) {\n      return NextResponse.json({ room_id: existingRoom.id })\n    }\n\n    // 새 채팅방 생성\n    const { data: newRoom, error } = await supabase\n      .from('chat_rooms')\n      .insert({\n        user1_id,\n        user2_id,\n        service_id: service_id || null\n      })\n      .select('id')\n      .single()\n\n    if (error) {\n      logger.error('Chat room creation error:', error)\n      return NextResponse.json({ error: error.message }, { status: 500 })\n    }\n\n    return NextResponse.json({ room_id: newRoom.id })\n  } catch (error) {\n    logger.error('Chat room creation API error:', error)\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\chat\\unread-count\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'request' is defined but never used. Allowed unused args must match /^_/u.","line":5,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":34}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@/lib/supabase/server'\n\n// 읽지 않은 메시지가 있는 채팅방 수 조회 (개별 메시지가 아닌 채팅방 단위)\nexport async function GET(request: NextRequest) {\n  try {\n    const supabase = await createClient()\n    const { data: { user } } = await supabase.auth.getUser()\n\n    if (!user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    // 사용자가 참여한 모든 채팅방 조회\n    const { data: rooms } = await supabase\n      .from('chat_rooms')\n      .select('id')\n      .or(`user1_id.eq.${user.id},user2_id.eq.${user.id}`)\n\n    const roomIds = rooms?.map(room => room.id) || []\n\n    if (roomIds.length === 0) {\n      return NextResponse.json({ unreadCount: 0 })\n    }\n\n    // 각 채팅방별로 읽지 않은 메시지가 있는지 확인\n    let unreadRoomCount = 0\n\n    for (const roomId of roomIds) {\n      const { count } = await supabase\n        .from('chat_messages')\n        .select('*', { count: 'exact', head: true })\n        .eq('room_id', roomId)\n        .eq('is_read', false)\n        .neq('sender_id', user.id)\n        .limit(1) // 하나만 있어도 그 방은 읽지 않은 메시지가 있는 것\n\n      if (count && count > 0) {\n        unreadRoomCount++\n      }\n    }\n\n\n    return NextResponse.json({ unreadCount: unreadRoomCount })\n  } catch (error) {\n    console.error('Unread count API error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\cron\\advertising\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\debug\\category-visits\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\debug\\personalized\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\debug\\rpc-test\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\nice\\verify\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'request' is defined but never used. Allowed unused args must match /^_/u.","line":5,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":34}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server'\n\n// NICE 본인인증 요청 API\n// 실제 환경에서는 NICE 평가정보 API를 연동해야 함\nexport async function GET(request: NextRequest) {\n  // 실제로는 NICE API에 요청하고 EncodeData를 받아옴\n  // 여기서는 테스트용 HTML 페이지 반환\n\n  const html = `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <title>NICE 본인인증</title>\n  <style>\n    body {\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n      padding: 20px;\n      background: #f5f5f5;\n    }\n    .container {\n      max-width: 400px;\n      margin: 0 auto;\n      background: white;\n      padding: 30px;\n      border-radius: 12px;\n      box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n    }\n    h2 {\n      color: rgb(15, 52, 96);\n      margin-bottom: 20px;\n      text-align: center;\n    }\n    .info {\n      background: #e3f2fd;\n      padding: 15px;\n      border-radius: 8px;\n      margin-bottom: 20px;\n      font-size: 14px;\n      color: #1976d2;\n    }\n    .form-group {\n      margin-bottom: 15px;\n    }\n    label {\n      display: block;\n      margin-bottom: 5px;\n      font-weight: 500;\n      color: #333;\n    }\n    input {\n      width: 100%;\n      padding: 10px;\n      border: 1px solid #ddd;\n      border-radius: 6px;\n      font-size: 14px;\n      box-sizing: border-box;\n    }\n    button {\n      width: 100%;\n      padding: 12px;\n      background: rgb(15, 52, 96);\n      color: white;\n      border: none;\n      border-radius: 6px;\n      font-size: 16px;\n      font-weight: 500;\n      cursor: pointer;\n      margin-top: 10px;\n    }\n    button:hover {\n      background: rgb(26, 75, 125);\n    }\n    button.cancel {\n      background: #e0e0e0;\n      color: #666;\n    }\n    button.cancel:hover {\n      background: #d0d0d0;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <h2>NICE 휴대폰 본인인증</h2>\n\n    <div class=\"info\">\n      ⚠️ 개발 환경: 테스트용 인증 페이지입니다.<br>\n      실제 NICE API 연동 시 이 페이지는 NICE 인증 페이지로 리다이렉트됩니다.\n    </div>\n\n    <form id=\"verifyForm\">\n      <div class=\"form-group\">\n        <label>이름</label>\n        <input type=\"text\" id=\"name\" placeholder=\"홍길동\" required>\n      </div>\n\n      <div class=\"form-group\">\n        <label>휴대폰 번호</label>\n        <input type=\"tel\" id=\"phone\" placeholder=\"01012345678\" required>\n      </div>\n\n      <div class=\"form-group\">\n        <label>생년월일</label>\n        <input type=\"text\" id=\"birthDate\" placeholder=\"19900101\" required>\n      </div>\n\n      <button type=\"submit\">인증 완료</button>\n      <button type=\"button\" class=\"cancel\" onclick=\"window.close()\">취소</button>\n    </form>\n  </div>\n\n  <script>\n    document.getElementById('verifyForm').addEventListener('submit', function(e) {\n      e.preventDefault();\n\n      const name = document.getElementById('name').value;\n      const phone = document.getElementById('phone').value;\n      const birthDate = document.getElementById('birthDate').value;\n\n      // 부모 창으로 인증 결과 전송\n      if (window.opener) {\n        window.opener.postMessage({\n          type: 'NICE_VERIFICATION_SUCCESS',\n          data: {\n            name: name,\n            phone: phone,\n            birthDate: birthDate,\n            gender: 'M'\n          }\n        }, window.location.origin);\n\n        alert('본인인증이 완료되었습니다.');\n        window.close();\n      }\n    });\n  </script>\n</body>\n</html>\n  `\n\n  return new NextResponse(html, {\n    headers: {\n      'Content-Type': 'text/html; charset=utf-8',\n    },\n  })\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\notifications\\[id]\\read\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\notifications\\count\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'request' is defined but never used. Allowed unused args must match /^_/u.","line":5,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":34}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server'\r\nimport { createClient } from '@/lib/supabase/server'\r\n\r\n// GET /api/notifications/count - 안 읽은 알림 개수 조회\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const supabase = await createClient()\r\n\r\n    // 사용자 인증 확인\r\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\r\n\r\n    if (authError || !user) {\r\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 })\r\n    }\r\n\r\n    // 안 읽은 알림 개수 조회\r\n    const { count, error } = await supabase\r\n      .from('notifications')\r\n      .select('*', { count: 'exact', head: true })\r\n      .eq('user_id', user.id)\r\n      .eq('is_read', false)\r\n\r\n    if (error) {\r\n      console.error('Unread notifications count error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\r\n      return NextResponse.json({ error: '알림 개수를 불러올 수 없습니다' }, { status: 500 })\r\n    }\r\n\r\n    return NextResponse.json({ count: count || 0 })\r\n  } catch (error) {\r\n    console.error('Unread notifications count API error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\r\n    return NextResponse.json({ error: '서버 오류가 발생했습니다' }, { status: 500 })\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\notifications\\read-all\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'request' is defined but never used. Allowed unused args must match /^_/u.","line":5,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":36}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server'\r\nimport { createClient } from '@/lib/supabase/server'\r\n\r\n// PATCH /api/notifications/read-all - 모든 알림 읽음 처리\r\nexport async function PATCH(request: NextRequest) {\r\n  try {\r\n    const supabase = await createClient()\r\n\r\n    // 사용자 인증 확인\r\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\r\n\r\n    if (authError || !user) {\r\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 })\r\n    }\r\n\r\n    // 모든 안 읽은 알림 읽음 처리\r\n    const { error } = await supabase\r\n      .from('notifications')\r\n      .update({ is_read: true })\r\n      .eq('user_id', user.id)\r\n      .eq('is_read', false)\r\n\r\n    if (error) {\r\n      console.error('Mark all notifications as read error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\r\n      return NextResponse.json({ error: '알림 읽음 처리에 실패했습니다' }, { status: 500 })\r\n    }\r\n\r\n    return NextResponse.json({ success: true })\r\n  } catch (error) {\r\n    console.error('Mark all notifications as read API error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\r\n    return NextResponse.json({ error: '서버 오류가 발생했습니다' }, { status: 500 })\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\notifications\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\orders\\[id]\\complete-revision\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\orders\\[id]\\revision\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\orders\\[id]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\orders\\[id]\\status\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\orders\\buyer\\count\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'request' is defined but never used. Allowed unused args must match /^_/u.","line":5,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":34}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@/lib/supabase/server'\n\n// GET /api/orders/buyer/count - 구매자 주문 상태별 카운트\nexport async function GET(request: NextRequest) {\n  try {\n    const supabase = await createClient()\n\n    // 사용자 인증 확인\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n\n    if (authError || !user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 })\n    }\n\n    // 단일 쿼리로 모든 주문 상태 가져오기 (5개 쿼리 → 1개 쿼리로 최적화)\n    const { data: orders, error } = await supabase\n      .from('orders')\n      .select('status')\n      .eq('buyer_id', user.id)\n\n    if (error) {\n      console.error('Orders count fetch error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n      return NextResponse.json({ error: '주문 카운트를 불러올 수 없습니다' }, { status: 500 })\n    }\n\n    // JavaScript로 카운트 계산 (데이터베이스 쿼리보다 훨씬 빠름)\n    const counts = {\n      paid: 0,\n      in_progress: 0,\n      delivered: 0,\n      completed: 0,\n      cancelled: 0,\n      all: orders?.length || 0\n    }\n\n    orders?.forEach(order => {\n      if (order.status === 'paid') counts.paid++\n      else if (order.status === 'in_progress') counts.in_progress++\n      else if (order.status === 'delivered') counts.delivered++\n      else if (order.status === 'completed') counts.completed++\n      else if (order.status === 'cancelled') counts.cancelled++\n    })\n\n    return NextResponse.json({ counts })\n  } catch (error) {\n    console.error('Buyer orders count API error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n    return NextResponse.json({ error: '서버 오류가 발생했습니다' }, { status: 500 })\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\orders\\buyer\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\orders\\seller\\count\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'request' is defined but never used. Allowed unused args must match /^_/u.","line":5,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":34}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@/lib/supabase/server'\n\n// GET /api/orders/seller/count - 판매자 주문 상태별 카운트\nexport async function GET(request: NextRequest) {\n  try {\n    const supabase = await createClient()\n\n    // 사용자 인증 확인\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n\n    if (authError || !user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 })\n    }\n\n    // 단일 쿼리로 모든 주문 상태 가져오기 (5개 쿼리 → 1개 쿼리로 최적화)\n    const { data: orders, error } = await supabase\n      .from('orders')\n      .select('status')\n      .eq('seller_id', user.id)\n\n    if (error) {\n      console.error('Orders count fetch error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n      return NextResponse.json({ error: '주문 카운트를 불러올 수 없습니다' }, { status: 500 })\n    }\n\n    // JavaScript로 카운트 계산 (데이터베이스 쿼리보다 훨씬 빠름)\n    const counts = {\n      paid: 0,\n      in_progress: 0,\n      delivered: 0,\n      completed: 0,\n      cancelled: 0,\n      all: orders?.length || 0\n    }\n\n    orders?.forEach(order => {\n      if (order.status === 'paid') counts.paid++\n      else if (order.status === 'in_progress') counts.in_progress++\n      else if (order.status === 'delivered') counts.delivered++\n      else if (order.status === 'completed') counts.completed++\n      else if (order.status === 'cancelled') counts.cancelled++\n    })\n\n    return NextResponse.json({ counts })\n  } catch (error) {\n    console.error('Seller orders count API error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n    return NextResponse.json({ error: '서버 오류가 발생했습니다' }, { status: 500 })\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\orders\\seller\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\payment-requests\\[id]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\payment-requests\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\payments\\advertising\\verify\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\payments\\bank-transfer\\request\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\payments\\direct-purchase\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isExisting' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":78,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":78,"endColumn":55}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@/lib/supabase/server'\nimport { directPurchaseRateLimit, checkRateLimit } from '@/lib/rate-limit'\nimport { createOrderWithIdempotency } from '@/lib/transaction'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const supabase = await createClient()\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n\n    if (authError || !user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 })\n    }\n\n    // Redis 기반 Rate Limiting 체크\n    const rateLimitResult = await checkRateLimit(user.id, directPurchaseRateLimit)\n    if (!rateLimitResult.success) {\n      return rateLimitResult.error!\n    }\n\n    const body = await request.json()\n    const { seller_id, service_id, title, amount, description, delivery_days, revision_count } = body\n\n    // 입력 검증\n    if (!seller_id || !service_id || !title || !amount) {\n      return NextResponse.json({ error: '필수 정보가 누락되었습니다' }, { status: 400 })\n    }\n\n    // 금액 검증 (최소 1,000원, 최대 1억원)\n    if (typeof amount !== 'number' || amount < 1000 || amount > 100000000) {\n      return NextResponse.json({ error: '유효하지 않은 결제 금액입니다' }, { status: 400 })\n    }\n\n    // 제목 길이 제한\n    if (typeof title !== 'string' || title.length > 200) {\n      return NextResponse.json({ error: '유효하지 않은 제목입니다' }, { status: 400 })\n    }\n\n    // 판매자 정보 확인\n    const { data: seller, error: sellerError } = await supabase\n      .from('sellers')\n      .select('id, user_id')\n      .eq('id', seller_id)\n      .single()\n\n    if (sellerError || !seller) {\n      return NextResponse.json({ error: '판매자를 찾을 수 없습니다' }, { status: 404 })\n    }\n\n    // 자신의 서비스 구매 방지\n    if (seller.user_id === user.id) {\n      return NextResponse.json({ error: '자신의 서비스는 구매할 수 없습니다' }, { status: 403 })\n    }\n\n    // 서비스 정보 확인 (가격 검증)\n    const { data: service, error: serviceError } = await supabase\n      .from('services')\n      .select('id, title, price, delivery_days, revision_count')\n      .eq('id', service_id)\n      .single()\n\n    if (serviceError || !service) {\n      return NextResponse.json({ error: '서비스를 찾을 수 없습니다' }, { status: 404 })\n    }\n\n    // 서비스 가격과 요청 금액 일치 확인 (가격 위변조 방지)\n    if (service.price !== amount) {\n      return NextResponse.json({ error: '서비스 가격과 일치하지 않습니다' }, { status: 400 })\n    }\n\n    // 주문 생성 (Idempotency 보장 - Race Condition 방지)\n    // merchant_uid를 Idempotency Key로 사용하여 중복 주문 방지\n    const merchantUid = `order_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`\n\n    // 납품 예정일 계산 (형식적, 실제로는 판매자 작업 완료 선언이 중요)\n    const deliveryDate = new Date(Date.now() + (delivery_days || service.delivery_days || 7) * 24 * 60 * 60 * 1000)\n\n    const { data: order, error: orderError, isExisting } = await createOrderWithIdempotency(\n      supabase,\n      {\n        buyer_id: user.id,\n        seller_id: seller.user_id, // users.id를 참조 (sellers.id가 아님)\n        service_id: service_id,\n        amount: amount,\n        base_amount: amount,\n        total_amount: amount,\n        commission_rate: 0, // 수수료율 (추후 설정 가능)\n        commission_fee: 0,\n        seller_amount: amount, // 판매자 받을 금액 (수수료 제외 전)\n        title: title,\n        description: description || service.title,\n        delivery_days: delivery_days || service.delivery_days,\n        revision_count: revision_count || service.revision_count,\n        delivery_date: deliveryDate.toISOString(),\n        status: 'pending_payment',\n      },\n      merchantUid\n    )\n\n    if (orderError) {\n      // 보안: 서버 로그에만 상세 정보 기록, 클라이언트에는 일반 메시지만 반환\n      console.error('Order creation error:', {\n        message: orderError.message,\n        code: orderError.code,\n        details: orderError.details,\n        hint: orderError.hint\n      })\n      return NextResponse.json({\n        error: '주문 생성 실패'\n      }, { status: 500 })\n    }\n\n    // 채팅방 자동 생성 (이미 존재하면 무시)\n    try {\n      const { data: existingRoom } = await supabase\n        .from('chat_rooms')\n        .select('id')\n        .eq('buyer_id', user.id)\n        .eq('seller_id', seller_id)\n        .maybeSingle()\n\n      if (!existingRoom) {\n        await supabase\n          .from('chat_rooms')\n          .insert({\n            buyer_id: user.id,\n            seller_id: seller_id, // sellers.id 사용\n            service_id: service_id\n          })\n      }\n    } catch (chatError) {\n      // 채팅방 생성 실패는 주문 생성을 막지 않음\n      console.error('Chat room creation error:', chatError)\n    }\n\n    return NextResponse.json({\n      order_id: order.id,\n      merchant_uid: merchantUid,\n      amount: amount\n    })\n  } catch (error) {\n    console.error('Direct purchase error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n    return NextResponse.json({ error: '서버 오류가 발생했습니다' }, { status: 500 })\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\payments\\mock-payment\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\payments\\prepare\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\payments\\verify-direct\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\payments\\verify\\route.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":88,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":88,"endColumn":18,"suggestions":[{"fix":{"range":[2918,3003],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@/lib/supabase/server'\nimport { notifyPaymentReceived } from '@/lib/notifications'\nimport { paymentVerifyRateLimit, checkRateLimit } from '@/lib/rate-limit'\nimport { createPaymentWithIdempotency } from '@/lib/transaction'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const supabase = await createClient()\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n\n    if (authError || !user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 })\n    }\n\n    // Redis 기반 Rate Limiting 체크 (검증은 더 엄격하게: 분당 5회)\n    const rateLimitResult = await checkRateLimit(user.id, paymentVerifyRateLimit)\n    if (!rateLimitResult.success) {\n      return rateLimitResult.error!\n    }\n\n    const body = await request.json()\n    const { payment_id, order_id, payment_request_id } = body\n\n    // 입력 검증\n    if (!payment_id || !order_id) {\n      return NextResponse.json({ error: '필수 정보가 누락되었습니다' }, { status: 400 })\n    }\n\n    // UUID 형식 검증\n    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i\n    if (!uuidRegex.test(order_id)) {\n      return NextResponse.json({ error: '유효하지 않은 주문 ID입니다' }, { status: 400 })\n    }\n\n    // 주문 정보 조회\n    const { data: order, error: orderError } = await supabase\n      .from('orders')\n      .select('*')\n      .eq('id', order_id)\n      .single()\n\n    if (orderError || !order) {\n      return NextResponse.json({ error: '주문을 찾을 수 없습니다' }, { status: 404 })\n    }\n\n    // 구매자 확인\n    if (order.buyer_id !== user.id) {\n      return NextResponse.json({ error: '구매자만 결제 검증을 할 수 있습니다' }, { status: 403 })\n    }\n\n    // 이미 결제된 주문인지 확인\n    if (order.status === 'paid' || order.status === 'in_progress') {\n      return NextResponse.json({ error: '이미 결제된 주문입니다' }, { status: 400 })\n    }\n\n    // TODO: 실제 환경에서는 PortOne API를 통해 결제 정보를 검증해야 합니다\n    // const portOneResponse = await fetch(`https://api.portone.io/payments/${payment_id}`, {\n    //   headers: {\n    //     'Authorization': `PortOne ${process.env.PORTONE_API_SECRET}`\n    //   }\n    // })\n    // const paymentData = await portOneResponse.json()\n    // if (paymentData.amount !== order.amount) {\n    //   throw new Error('결제 금액이 일치하지 않습니다')\n    // }\n\n    // 결제 기록 생성 (Idempotency 보장 - 중복 결제 방지)\n    const { data: payment, error: paymentError, isExisting } = await createPaymentWithIdempotency(\n      supabase,\n      {\n        order_id: order.id,\n        amount: order.amount,\n        payment_method: 'card', // PortOne에서 받은 정보로 설정\n        payment_id: payment_id,\n        status: 'completed',\n        paid_at: new Date().toISOString()\n      }\n    )\n\n    if (paymentError) {\n      console.error('Payment record error:', paymentError)\n      return NextResponse.json({ error: '결제 기록 생성 실패' }, { status: 500 })\n    }\n\n    // 이미 존재하는 결제인 경우 (동시 요청으로 인한 중복)\n    if (isExisting) {\n      console.log(`[Idempotency] Returning existing payment result for order: ${order.id}`)\n      return NextResponse.json({\n        success: true,\n        order: {\n          id: order.id,\n          status: order.status,\n          payment_id: payment.id\n        }\n      })\n    }\n\n    // 주문 상태 업데이트\n    const { error: updateOrderError } = await supabase\n      .from('orders')\n      .update({\n        status: 'in_progress',\n        payment_id: payment.id,\n        paid_at: new Date().toISOString()\n      })\n      .eq('id', order.id)\n\n    if (updateOrderError) {\n      console.error('Order update error:', updateOrderError)\n      return NextResponse.json({ error: '주문 상태 업데이트 실패' }, { status: 500 })\n    }\n\n    // 결제 요청 상태 업데이트\n    if (payment_request_id) {\n      await supabase\n        .from('payment_requests')\n        .update({\n          status: 'paid',\n          order_id: order.id,\n          paid_at: new Date().toISOString()\n        })\n        .eq('id', payment_request_id)\n    }\n\n    // 판매자에게 결제 완료 알림 전송\n    await notifyPaymentReceived(order.seller_id, order.id, order.amount)\n\n    return NextResponse.json({\n      success: true,\n      order: {\n        id: order.id,\n        status: 'in_progress',\n        payment_id: payment.id\n      }\n    })\n  } catch (error) {\n    console.error('Payment verify error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n    return NextResponse.json({ error: '서버 오류가 발생했습니다' }, { status: 500 })\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\portfolio\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\search\\services\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\seller\\advertising\\bank-transfer\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'uploadData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":65,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":65,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server'\r\nimport { createClient } from '@/lib/supabase/server'\r\nimport { createServiceRoleClient } from '@/lib/supabase/singleton'\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    // Authenticate user\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) {\r\n      return NextResponse.json(\r\n        { error: 'Unauthorized' },\r\n        { status: 401 }\r\n      )\r\n    }\r\n\r\n    // Parse form data\r\n    const formData = await request.formData()\r\n    const serviceId = formData.get('serviceId') as string\r\n    const packageType = formData.get('packageType') as string\r\n    const depositorName = formData.get('depositorName') as string\r\n    const phone = formData.get('phone') as string\r\n    const email = formData.get('email') as string\r\n    const businessRegistrationNumber = formData.get('businessRegistrationNumber') as string\r\n    const taxInvoiceRequested = formData.get('taxInvoiceRequested') === 'true'\r\n    const depositBank = formData.get('depositBank') as string\r\n    const depositDate = formData.get('depositDate') as string\r\n    const depositTime = formData.get('depositTime') as string\r\n    const amount = parseInt(formData.get('amount') as string)\r\n    const receiptFile = formData.get('receipt') as File | null\r\n\r\n    // Validate required fields\r\n    if (!serviceId || !packageType || !depositorName || !phone || !email || !depositBank || !depositDate || !depositTime || !amount) {\r\n      return NextResponse.json(\r\n        { error: 'Missing required fields' },\r\n        { status: 400 }\r\n      )\r\n    }\r\n\r\n    // Use Service Role Client for database operations\r\n    const serviceSupabase = createServiceRoleClient()\r\n\r\n    // Get seller ID\r\n    const { data: seller } = await serviceSupabase\r\n      .from('sellers')\r\n      .select('id')\r\n      .eq('user_id', user.id)\r\n      .single()\r\n\r\n    if (!seller) {\r\n      return NextResponse.json(\r\n        { error: 'Seller not found' },\r\n        { status: 404 }\r\n      )\r\n    }\r\n\r\n    // Upload receipt image if provided\r\n    let receiptImageUrl: string | null = null\r\n    if (receiptFile) {\r\n      const fileExt = receiptFile.name.split('.').pop()\r\n      const fileName = `${seller.id}_${Date.now()}.${fileExt}`\r\n      const filePath = `advertising-receipts/${fileName}`\r\n\r\n      const { data: uploadData, error: uploadError } = await serviceSupabase\r\n        .storage\r\n        .from('public-files')\r\n        .upload(filePath, receiptFile)\r\n\r\n      if (uploadError) {\r\n        console.error('Failed to upload receipt:', uploadError)\r\n      } else {\r\n        const { data: { publicUrl } } = serviceSupabase\r\n          .storage\r\n          .from('public-files')\r\n          .getPublicUrl(filePath)\r\n        receiptImageUrl = publicUrl\r\n      }\r\n    }\r\n\r\n    // Create advertising subscription\r\n    const { data: subscription, error: subscriptionError } = await serviceSupabase\r\n      .from('advertising_subscriptions')\r\n      .insert({\r\n        seller_id: seller.id,\r\n        service_id: serviceId,\r\n        monthly_price: amount,\r\n        status: 'pending_payment',\r\n        payment_method: 'bank_transfer',\r\n        bank_transfer_deadline: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(), // 7 days from now\r\n      })\r\n      .select()\r\n      .single()\r\n\r\n    if (subscriptionError) {\r\n      console.error('Failed to create subscription:', subscriptionError)\r\n      return NextResponse.json(\r\n        { error: 'Failed to create subscription' },\r\n        { status: 500 }\r\n      )\r\n    }\r\n\r\n    // Store extra data in admin_memo as JSON\r\n    const adminMemoData = {\r\n      phone,\r\n      email,\r\n      businessRegistrationNumber,\r\n      taxInvoiceRequested,\r\n      packageType\r\n    }\r\n\r\n    // Create payment record\r\n    const { error: paymentError } = await serviceSupabase\r\n      .from('advertising_payments')\r\n      .insert({\r\n        subscription_id: subscription.id,\r\n        seller_id: seller.id,\r\n        amount: amount,\r\n        payment_method: 'bank_transfer',\r\n        status: 'pending',\r\n        depositor_name: depositorName,\r\n        bank_name: depositBank,\r\n        deposit_date: depositDate,\r\n        deposit_time: depositTime,\r\n        receipt_image: receiptImageUrl,\r\n        admin_memo: JSON.stringify(adminMemoData)\r\n      })\r\n\r\n    if (paymentError) {\r\n      console.error('Failed to create payment:', paymentError)\r\n      // Rollback subscription\r\n      await serviceSupabase\r\n        .from('advertising_subscriptions')\r\n        .delete()\r\n        .eq('id', subscription.id)\r\n\r\n      return NextResponse.json(\r\n        { error: 'Failed to create payment' },\r\n        { status: 500 }\r\n      )\r\n    }\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      subscriptionId: subscription.id\r\n    })\r\n\r\n  } catch (error) {\r\n    console.error('Bank transfer submission error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\r\n    return NextResponse.json(\r\n      { error: 'Internal server error' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\seller\\advertising\\dashboard\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'request' is defined but never used. Allowed unused args must match /^_/u.","line":5,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":34}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server'\r\nimport { createClient } from '@/lib/supabase/server'\r\nimport { createServiceRoleClient } from '@/lib/supabase/singleton'\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    // 사용자 인증\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) {\r\n      return NextResponse.json(\r\n        { error: 'Unauthorized' },\r\n        { status: 401 }\r\n      )\r\n    }\r\n\r\n    // Service Role Client로 데이터 조회\r\n    const serviceSupabase = createServiceRoleClient()\r\n\r\n    // Seller ID 조회\r\n    const { data: seller } = await serviceSupabase\r\n      .from('sellers')\r\n      .select('id')\r\n      .eq('user_id', user.id)\r\n      .single()\r\n\r\n    if (!seller) {\r\n      return NextResponse.json(\r\n        { error: 'Seller not found' },\r\n        { status: 404 }\r\n      )\r\n    }\r\n\r\n    // 구독 정보 조회 (서비스 정보 포함)\r\n    const { data: subscriptions } = await serviceSupabase\r\n      .from('advertising_subscriptions')\r\n      .select(`\r\n        *,\r\n        service:services(id, title)\r\n      `)\r\n      .eq('seller_id', seller.id)\r\n      .in('status', ['active', 'pending_payment'])\r\n\r\n    // 판매자의 모든 서비스 조회\r\n    const { data: myServices } = await serviceSupabase\r\n      .from('services')\r\n      .select('id, title, thumbnail_url')\r\n      .eq('seller_id', seller.id)\r\n      .eq('status', 'active')\r\n      .is('deleted_at', null)\r\n\r\n    // 활성 광고 정보 조회\r\n    const { data: activeAds } = await serviceSupabase\r\n      .from('advertising_subscriptions')\r\n      .select('*')\r\n      .eq('seller_id', seller.id)\r\n      .in('status', ['active', 'pending_payment'])\r\n\r\n    // 서비스별 광고 정보 매핑\r\n    const adDetailsMap = new Map(\r\n      activeAds?.map(ad => [\r\n        ad.service_id,\r\n        {\r\n          subscriptionId: ad.id,\r\n          monthlyPrice: ad.monthly_price,\r\n          nextBillingDate: ad.next_billing_date,\r\n          totalImpressions: ad.total_impressions,\r\n          totalClicks: ad.total_clicks,\r\n          ctr: ad.total_impressions > 0 ? (ad.total_clicks / ad.total_impressions) * 100 : 0,\r\n          createdAt: ad.created_at,\r\n          status: ad.status,\r\n          isFreePromotion: ad.is_free_promotion || false,\r\n          promotionEndDate: ad.promotion_end_date || null\r\n        }\r\n      ]) || []\r\n    )\r\n\r\n    const servicesWithAdStatus = myServices?.map(service => ({\r\n      id: service.id,\r\n      title: service.title,\r\n      thumbnailUrl: service.thumbnail_url,\r\n      hasActiveAd: adDetailsMap.has(service.id),\r\n      adDetails: adDetailsMap.get(service.id)\r\n    })) || []\r\n\r\n    // 통계 계산\r\n    const totalImpressions = subscriptions?.reduce((sum, s) => sum + s.total_impressions, 0) || 0\r\n    const totalClicks = subscriptions?.reduce((sum, s) => sum + s.total_clicks, 0) || 0\r\n    const ctr = totalImpressions > 0 ? (totalClicks / totalImpressions) * 100 : 0\r\n\r\n    return NextResponse.json({\r\n      subscriptions: subscriptions?.map(s => ({\r\n        id: s.id,\r\n        serviceId: s.service_id,\r\n        serviceName: s.service?.title || '',\r\n        status: s.status,\r\n        nextBillingDate: s.next_billing_date,\r\n        monthlyPrice: s.monthly_price,\r\n        totalImpressions: s.total_impressions,\r\n        totalClicks: s.total_clicks,\r\n        ctr: s.total_impressions > 0 ? (s.total_clicks / s.total_impressions) * 100 : 0,\r\n        isFreePromotion: s.is_free_promotion || false,\r\n        promotionEndDate: s.promotion_end_date || null\r\n      })) || [],\r\n      services: servicesWithAdStatus,\r\n      stats: {\r\n        totalImpressions,\r\n        totalClicks,\r\n        ctr,\r\n        averagePosition: 0\r\n      }\r\n    })\r\n  } catch (error) {\r\n    console.error('Failed to fetch advertising dashboard:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\r\n    return NextResponse.json(\r\n      { error: 'Failed to fetch advertising dashboard' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\seller\\portfolio\\[id]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\seller\\portfolio\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\sentry-test\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'NextResponse' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Sentry 테스트용 API 엔드포인트\n *\n * 사용법:\n * 1. 개발 서버 실행: npm run dev\n * 2. 브라우저에서 접속: http://localhost:3000/api/sentry-test\n * 3. Sentry.io 대시보드에서 에러 확인\n *\n * 확인 후 이 파일을 삭제해도 됩니다.\n */\n\nimport { NextResponse } from \"next/server\";\n\nexport async function GET() {\n  // 의도적으로 에러 발생\n  throw new Error(\n    \"🧪 Sentry 테스트 에러입니다! 이 에러가 Sentry.io 대시보드에 표시되면 성공!\",\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\upload\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'data' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":59,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":59,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@/lib/supabase/server'\nimport { createClient as createAdminClient } from '@supabase/supabase-js'\nimport { logger } from '@/lib/logger'\n\nexport async function POST(request: NextRequest) {\n  try {\n    // 환경 변수 디버깅\n    logger.info('Environment check:', {\n      hasServiceKey: !!process.env.SUPABASE_SERVICE_ROLE_KEY,\n      hasUrl: !!process.env.NEXT_PUBLIC_SUPABASE_URL,\n      nodeEnv: process.env.NODE_ENV\n    })\n\n    const supabase = await createClient()\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n\n    if (authError || !user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const formData = await request.formData()\n    const file = formData.get('file') as File\n    const folder = formData.get('folder') as string || 'general'\n\n    if (!file) {\n      return NextResponse.json({ error: 'No file provided' }, { status: 400 })\n    }\n\n    // 파일 이름 생성 (타임스탬프 + 랜덤 문자열)\n    const timestamp = Date.now()\n    const randomString = Math.random().toString(36).substring(2, 15)\n    const fileExt = file.name.split('.').pop()\n    const fileName = `${timestamp}_${randomString}.${fileExt}`\n    const filePath = `${folder}/${fileName}`\n\n    // 파일을 ArrayBuffer로 변환\n    const arrayBuffer = await file.arrayBuffer()\n    const buffer = Buffer.from(arrayBuffer)\n\n    // SERVICE_ROLE_KEY로 Supabase Admin Client 생성 (RLS 우회)\n    const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\n\n    if (!serviceRoleKey || !supabaseUrl) {\n      logger.error('Missing environment variables:', {\n        hasUrl: !!supabaseUrl,\n        hasServiceKey: !!serviceRoleKey\n      })\n      return NextResponse.json({\n        error: 'Server configuration error',\n        details: 'SUPABASE_SERVICE_ROLE_KEY is missing'\n      }, { status: 500 })\n    }\n\n    const supabaseAdmin = createAdminClient(supabaseUrl, serviceRoleKey)\n\n    // Supabase Storage에 업로드 (Admin Client 사용)\n    const { data, error } = await supabaseAdmin.storage\n      .from('portfolio')\n      .upload(filePath, buffer, {\n        contentType: file.type,\n        upsert: false\n      })\n\n    if (error) {\n      logger.error('Storage upload error:', {\n        message: error.message,\n        name: error.name,\n        cause: error.cause\n      })\n      return NextResponse.json({\n        error: 'Upload failed',\n        details: error.message\n      }, { status: 500 })\n    }\n\n    // 공개 URL 생성\n    const { data: urlData } = supabaseAdmin.storage\n      .from('portfolio')\n      .getPublicUrl(filePath)\n\n    return NextResponse.json({\n      url: urlData.publicUrl,\n      path: filePath\n    }, { status: 200 })\n\n  } catch (error) {\n    logger.error('Upload API error:', error)\n    return NextResponse.json({\n      error: 'Internal server error',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }, { status: 500 })\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\user\\category-visits\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'todayStr' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":36,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'request' is defined but never used. Allowed unused args must match /^_/u.","line":106,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":106,"endColumn":34}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@/lib/supabase/server'\nimport { logger } from '@/lib/logger'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const supabase = await createClient()\n\n\n    // 1. 인증 확인 (로그인 사용자만)\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n\n\n    if (authError || !user) {\n      return NextResponse.json(\n        { error: 'Unauthorized - 로그인이 필요합니다' },\n        { status: 401 }\n      )\n    }\n\n    // 2. 요청 바디 파싱\n    const body = await request.json()\n    const { categoryId, categoryName, categorySlug } = body\n\n    // 3. 필수 필드 검증\n    if (!categoryId || !categoryName || !categorySlug) {\n      return NextResponse.json(\n        { error: 'Missing required fields: categoryId, categoryName, categorySlug' },\n        { status: 400 }\n      )\n    }\n\n    // 4. 오늘 이미 방문했는지 확인\n    const today = new Date()\n    today.setHours(0, 0, 0, 0)\n    const todayStr = today.toISOString().split('T')[0] // YYYY-MM-DD\n\n    const { data: existing } = await supabase\n      .from('category_visits')\n      .select('id, visited_at')\n      .eq('user_id', user.id)\n      .eq('category_id', categoryId)\n      .gte('visited_at', today.toISOString())\n      .maybeSingle()\n\n    let data, error\n\n    if (existing) {\n      // 오늘 이미 방문했으면 visited_at만 업데이트\n      const result = await supabase\n        .from('category_visits')\n        .update({ visited_at: new Date().toISOString() })\n        .eq('id', existing.id)\n        .select()\n        .single()\n\n      data = result.data\n      error = result.error\n    } else {\n      // 처음 방문이면 새로 삽입\n      const result = await supabase\n        .from('category_visits')\n        .insert({\n          user_id: user.id,\n          category_id: categoryId,\n          category_name: categoryName,\n          category_slug: categorySlug,\n          visited_at: new Date().toISOString()\n        })\n        .select()\n        .single()\n\n      data = result.data\n      error = result.error\n    }\n\n    if (error) {\n      console.error('[API] Category visit error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n      logger.error('Category visit upsert error:', error)\n      return NextResponse.json(\n        { error: 'Failed to track category visit', details: error },\n        { status: 500 }\n      )\n    }\n\n    // 5. 성공\n    return NextResponse.json(\n      {\n        message: 'Category visit tracked successfully',\n        data,\n        isUpdate: !!existing\n      },\n      { status: 200 }\n    )\n\n  } catch (error) {\n    logger.error('Category visit API error:', error)\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}\n\n// GET: 사용자의 카테고리 방문 기록 조회 (선택 사항)\nexport async function GET(request: NextRequest) {\n  try {\n    const supabase = await createClient()\n\n    // 인증 확인\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n\n    if (authError || !user) {\n      return NextResponse.json(\n        { error: 'Unauthorized' },\n        { status: 401 }\n      )\n    }\n\n    // 최근 방문 기록 조회 (최근 30일)\n    const thirtyDaysAgo = new Date()\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30)\n\n    const { data, error } = await supabase\n      .from('category_visits')\n      .select('*')\n      .eq('user_id', user.id)\n      .gte('visited_at', thirtyDaysAgo.toISOString())\n      .order('visited_at', { ascending: false })\n      .limit(50)\n\n    if (error) {\n      logger.error('Category visits fetch error:', error)\n      return NextResponse.json(\n        { error: 'Failed to fetch category visits' },\n        { status: 500 }\n      )\n    }\n\n    return NextResponse.json({ data }, { status: 200 })\n\n  } catch (error) {\n    logger.error('Category visits GET error:', error)\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\user\\service-favorites\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'request' is defined but never used. Allowed unused args must match /^_/u.","line":152,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":152,"endColumn":34}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@/lib/supabase/server'\nimport { logger } from '@/lib/logger'\n\n// POST: 찜하기\nexport async function POST(request: NextRequest) {\n  try {\n    const supabase = await createClient()\n\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n\n    if (authError || !user) {\n      return NextResponse.json(\n        { error: 'Unauthorized' },\n        { status: 401 }\n      )\n    }\n\n    const body = await request.json()\n    const { serviceId } = body\n\n    if (!serviceId) {\n      return NextResponse.json(\n        { error: 'Missing serviceId' },\n        { status: 400 }\n      )\n    }\n\n    logger.debug('Adding service to favorites', { userId: user.id, serviceId })\n\n    const { error } = await supabase\n      .from('service_favorites')\n      .insert({\n        user_id: user.id,\n        service_id: serviceId\n      })\n\n    if (error) {\n      // 이미 찜한 경우\n      if (error.code === '23505') {\n        logger.debug('Service already favorited', { serviceId })\n        return NextResponse.json(\n          { message: 'Already favorited' },\n          { status: 200 }\n        )\n      }\n\n      logger.error('Failed to insert favorite', error)\n      return NextResponse.json(\n        { error: 'Failed to add favorite' },\n        { status: 500 }\n      )\n    }\n\n    // wishlist_count 업데이트\n    const { data: service } = await supabase\n      .from('services')\n      .select('wishlist_count')\n      .eq('id', serviceId)\n      .single()\n\n    if (service) {\n      await supabase\n        .from('services')\n        .update({ wishlist_count: (service.wishlist_count || 0) + 1 })\n        .eq('id', serviceId)\n    }\n\n    logger.info('Service added to favorites', { userId: user.id, serviceId })\n    return NextResponse.json(\n      { message: 'Added to favorites' },\n      { status: 201 }\n    )\n\n  } catch (error) {\n    logger.error('Favorite POST error', error)\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}\n\n// DELETE: 찜 취소\nexport async function DELETE(request: NextRequest) {\n  try {\n    const supabase = await createClient()\n\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n\n    if (authError || !user) {\n      return NextResponse.json(\n        { error: 'Unauthorized' },\n        { status: 401 }\n      )\n    }\n\n    const { searchParams } = new URL(request.url)\n    const serviceId = searchParams.get('serviceId')\n\n    if (!serviceId) {\n      return NextResponse.json(\n        { error: 'Missing serviceId' },\n        { status: 400 }\n      )\n    }\n\n    const { error } = await supabase\n      .from('service_favorites')\n      .delete()\n      .eq('user_id', user.id)\n      .eq('service_id', serviceId)\n\n    if (error) {\n      logger.error('Failed to delete favorite', error)\n      return NextResponse.json(\n        { error: 'Failed to remove favorite' },\n        { status: 500 }\n      )\n    }\n\n    // wishlist_count 업데이트\n    const { data: service } = await supabase\n      .from('services')\n      .select('wishlist_count')\n      .eq('id', serviceId)\n      .single()\n\n    if (service && service.wishlist_count > 0) {\n      await supabase\n        .from('services')\n        .update({ wishlist_count: service.wishlist_count - 1 })\n        .eq('id', serviceId)\n    }\n\n    logger.info('Service removed from favorites', { userId: user.id, serviceId })\n    return NextResponse.json(\n      { message: 'Removed from favorites' },\n      { status: 200 }\n    )\n\n  } catch (error) {\n    logger.error('Favorite DELETE error', error)\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}\n\n// GET: 찜 목록 조회\nexport async function GET(request: NextRequest) {\n  try {\n    const supabase = await createClient()\n\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n\n    if (authError || !user) {\n      return NextResponse.json(\n        { error: 'Unauthorized' },\n        { status: 401 }\n      )\n    }\n\n    // 한 번의 쿼리로 favorites와 services join\n    const { data, error } = await supabase\n      .from('service_favorites')\n      .select(`\n        service_id,\n        created_at,\n        service:services!inner(\n          *,\n          seller:sellers(\n            id,\n            business_name,\n            display_name,\n            is_verified\n          )\n        )\n      `)\n      .eq('user_id', user.id)\n      .order('created_at', { ascending: false })\n\n    if (error) {\n      logger.error('Failed to fetch favorites', error)\n      return NextResponse.json(\n        { error: 'Failed to fetch favorites', details: error.message },\n        { status: 500 }\n      )\n    }\n\n    // orders_count를 order_count로 매핑\n    if (data && data.length > 0) {\n      interface ServiceWithOrdersCount {\n        orders_count?: number\n        order_count?: number\n        [key: string]: unknown\n      }\n\n      data.forEach(item => {\n        if (item.service) {\n          const service = item.service as unknown as ServiceWithOrdersCount\n          service.order_count = service.orders_count || 0\n        }\n      })\n    }\n\n    logger.debug('Favorites fetched', { userId: user.id, count: data?.length || 0 })\n    return NextResponse.json({ data }, { status: 200 })\n\n  } catch (error) {\n    logger.error('Favorites GET error', error)\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\user\\service-views\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\api\\users\\profile\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\auth\\callback\\complete\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\auth\\callback\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\auth\\forgot-password\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\auth\\login\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'data' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":35,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport { useState } from 'react'\nimport Link from 'next/link'\nimport { useRouter } from 'next/navigation'\nimport { createClient } from '@/lib/supabase/client'\nimport { logger } from '@/lib/logger'\nimport { getSecureRedirectUrl, RATE_LIMIT_CONFIG } from '@/lib/auth/config'\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [error, setError] = useState<string | null>(null)\n  const [isLoading, setIsLoading] = useState(false)\n  const [loginAttempts, setLoginAttempts] = useState(0)\n  const [lockoutUntil, setLockoutUntil] = useState<number | null>(null)\n  const [rememberMe, setRememberMe] = useState(false)\n  const router = useRouter()\n  const supabase = createClient()\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    // Rate Limiting 체크\n    if (lockoutUntil && Date.now() < lockoutUntil) {\n      const remainingSeconds = Math.ceil((lockoutUntil - Date.now()) / 1000)\n      setError(`너무 많은 로그인 시도가 있었습니다. ${remainingSeconds}초 후 다시 시도해주세요.`)\n      return\n    }\n\n    setError(null)\n    setIsLoading(true)\n\n    try {\n      const { data, error } = await supabase.auth.signInWithPassword({\n        email,\n        password,\n      })\n\n      if (error) throw error\n\n      // 로그인 성공 - 시도 횟수 초기화\n      setLoginAttempts(0)\n      setLockoutUntil(null)\n\n      // 쿠키 설정을 위해 잠시 대기 후 새로고침\n      await new Promise(resolve => setTimeout(resolve, 100))\n\n      // 서버 컴포넌트 새로고침하여 쿠키 동기화\n      router.refresh()\n\n      // 메인 페이지로 이동\n      router.push('/')\n    } catch (error: unknown) {\n      logger.error('로그인 실패:', error)\n\n      const newAttempts = loginAttempts + 1\n      setLoginAttempts(newAttempts)\n\n      // Rate Limiting 적용\n      if (newAttempts >= RATE_LIMIT_CONFIG.LOGIN.MAX_ATTEMPTS) {\n        setLockoutUntil(Date.now() + RATE_LIMIT_CONFIG.LOGIN.LOCKOUT_DURATION)\n        setError(`너무 많은 로그인 시도가 있었습니다. 5분 후 다시 시도해주세요.`)\n      } else {\n        const message = error instanceof Error ? error.message : '로그인 중 오류가 발생했습니다.'\n        setError(message)\n      }\n\n      setIsLoading(false)\n    }\n  }\n\n  // SNS 로그인 핸들러\n  const handleSocialLogin = async (provider: 'kakao' | 'google' | 'apple') => {\n    try {\n      setIsLoading(true)\n      setError(null)\n\n      // OAuth 리다이렉트 URL 검증 (CRITICAL 보안)\n      const redirectUrl = getSecureRedirectUrl(window.location.origin, '/auth/callback')\n\n      const { error } = await supabase.auth.signInWithOAuth({\n        provider: provider,\n        options: {\n          redirectTo: redirectUrl,\n        }\n      })\n\n      if (error) throw error\n    } catch (error: unknown) {\n      logger.error('SNS 로그인 실패:', error)\n      const message = error instanceof Error ? error.message : 'SNS 로그인 중 오류가 발생했습니다.'\n      setError(message)\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n      <div className=\"w-full max-w-md\">\n        <div className=\"bg-white rounded-2xl shadow-xl p-8\">\n          {/* 헤더 */}\n          <div className=\"text-center mb-8\">\n            <h1 className=\"text-3xl font-bold mb-2\">\n              <span className=\"gradient-text\">AI Talent Hub</span>\n            </h1>\n            <p className=\"text-gray-600\">AI 재능 거래의 시작</p>\n          </div>\n\n          {/* SNS 간편 로그인 */}\n          <div className=\"space-y-3 mb-6\">\n            <button\n              type=\"button\"\n              onClick={() => handleSocialLogin('kakao')}\n              disabled={isLoading}\n              className=\"w-full flex items-center justify-center gap-3 bg-[#FEE500] hover:bg-[#F5DC00] text-[#000000] font-semibold py-3 px-4 rounded-lg transition-colors disabled:opacity-50\"\n            >\n              <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M12 3C6.48 3 2 6.58 2 11c0 2.78 1.83 5.23 4.58 6.76-.2.74-.77 2.84-.89 3.29-.14.52.19.51.4.37.16-.11 2.56-1.76 2.97-2.04.62.08 1.27.12 1.94.12 5.52 0 10-3.58 10-8S17.52 3 12 3z\"/>\n              </svg>\n              카카오로 로그인\n            </button>\n\n            <button\n              type=\"button\"\n              onClick={() => handleSocialLogin('google')}\n              disabled={isLoading}\n              className=\"w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 text-gray-700 font-semibold py-3 px-4 rounded-lg border border-gray-300 transition-colors disabled:opacity-50\"\n            >\n              <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n              </svg>\n              구글로 로그인\n            </button>\n\n            <button\n              type=\"button\"\n              onClick={() => handleSocialLogin('apple')}\n              disabled={isLoading}\n              className=\"w-full flex items-center justify-center gap-3 bg-black hover:bg-gray-900 text-white font-semibold py-3 px-4 rounded-lg transition-colors disabled:opacity-50\"\n            >\n              <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z\"/>\n              </svg>\n              Apple로 로그인\n            </button>\n          </div>\n\n          {/* 구분선 */}\n          <div className=\"relative mb-6\">\n            <div className=\"absolute inset-0 flex items-center\">\n              <div className=\"w-full border-t border-gray-300\"></div>\n            </div>\n            <div className=\"relative flex justify-center text-sm\">\n              <span className=\"px-4 bg-white text-gray-500\">또는 이메일로 로그인</span>\n            </div>\n          </div>\n\n          {/* 로그인 폼 */}\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {error && (\n              <div className=\"bg-red-50 text-red-600 p-3 rounded-lg text-sm\">\n                {error}\n              </div>\n            )}\n\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                이메일\n              </label>\n              <input\n                id=\"email\"\n                name=\"email\"\n                type=\"email\"\n                autoComplete=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"input\"\n                placeholder=\"your@email.com\"\n                required\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                비밀번호\n              </label>\n              <input\n                id=\"password\"\n                name=\"password\"\n                type=\"password\"\n                autoComplete=\"current-password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"input\"\n                placeholder=\"••••••••\"\n                required\n              />\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  className=\"mr-2\"\n                  checked={rememberMe}\n                  onChange={(e) => setRememberMe(e.target.checked)}\n                />\n                <span className=\"text-sm text-gray-600\">로그인 상태 유지</span>\n              </label>\n              <Link href=\"/auth/forgot-password\" className=\"text-sm text-primary-600 hover:text-primary-700\">\n                비밀번호 찾기\n              </Link>\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"w-full btn-ai py-3 text-center font-semibold disabled:opacity-50\"\n            >\n              {isLoading ? (\n                <span className=\"flex items-center justify-center\">\n                  <span className=\"spinner mr-2\" />\n                  로그인 중...\n                </span>\n              ) : (\n                '로그인'\n              )}\n            </button>\n          </form>\n\n          {/* 회원가입 링크 */}\n          <div className=\"mt-6 text-center\">\n            <span className=\"text-gray-600\">아직 계정이 없으신가요?</span>\n            <Link href=\"/auth/register\" className=\"ml-2 text-primary-600 hover:text-primary-700 font-semibold\">\n              회원가입\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\auth\\register\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\buyer\\guide\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\buyer\\how-to-order\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\buyer\\payment\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\buyer\\refund\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\categories\\[slug]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\categories\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\chat\\ChatListClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'data' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":230,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":230,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isSeller' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":414,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":414,"endColumn":17}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter, useSearchParams } from 'next/navigation'\nimport { createClient } from '@/lib/supabase/client'\nimport { useChatUnreadCount } from '@/components/providers/ChatUnreadProvider'\n\ninterface ChatRoom {\n  id: string\n  user1_id: string\n  user2_id: string\n  service_id: string | null\n  last_message_at: string\n  created_at: string\n  seller_id: string | null // 현재 사용자가 판매자인 경우\n  is_favorite?: boolean\n  has_active_order?: boolean\n  otherUser?: {\n    id: string\n    name: string\n    profile_image: string | null\n    seller_id?: string\n  }\n  service?: {\n    id: string\n    title: string\n  }\n  lastMessage?: {\n    message: string\n    created_at: string\n    sender_id: string\n  }\n  unreadCount?: number\n}\n\ninterface Message {\n  id: string\n  room_id: string\n  sender_id: string\n  message: string\n  is_read: boolean\n  created_at: string\n  file_url?: string\n  file_name?: string\n  file_size?: number\n  file_type?: string\n}\n\ninterface Props {\n  userId: string\n  sellerId: string | null\n}\n\nexport default function ChatListClient({ userId, sellerId }: Props) {\n  const router = useRouter()\n  const searchParams = useSearchParams()\n  const initialRoomId = searchParams.get('room')\n  const orderId = searchParams.get('order')\n\n  const [rooms, setRooms] = useState<ChatRoom[]>([])\n  const [selectedRoomId, setSelectedRoomId] = useState<string | null>(initialRoomId)\n  const [messages, setMessages] = useState<Message[]>([])\n  const [newMessage, setNewMessage] = useState('')\n  const [isLoading, setIsLoading] = useState(false)\n  const [activeTab, setActiveTab] = useState<'all' | 'unread' | 'deal' | 'favorite'>('all')\n  const [selectedFile, setSelectedFile] = useState<File | null>(null)\n  const [isUploading, setIsUploading] = useState(false)\n  const [isCreatingRoom, setIsCreatingRoom] = useState(false)\n  const supabase = createClient()\n  const { decrementCount } = useChatUnreadCount() // unread count 훅 사용\n\n  // 채팅방 목록 로드\n  const loadRooms = async () => {\n    try {\n      const response = await fetch('/api/chat/rooms')\n      if (response.ok) {\n        const data = await response.json()\n        setRooms(data.rooms || [])\n      } else {\n        const error = await response.json()\n        console.error('[ChatListClient] Failed to load rooms:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n      }\n    } catch (error) {\n      console.error('[ChatListClient] Load rooms error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n    }\n  }\n\n  // 주문으로부터 채팅방 생성 또는 찾기\n  const createRoomFromOrder = async (orderId: string) => {\n    try {\n      setIsCreatingRoom(true)\n      const response = await fetch('/api/chat/rooms/create-from-order', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ order_id: orderId })\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setSelectedRoomId(data.room.id) // 먼저 방 선택\n        await loadRooms() // 채팅방 목록 새로고침\n        router.push(`/chat?room=${data.room.id}`) // URL 업데이트\n      } else {\n        const error = await response.json()\n        alert(error.error || '채팅방 생성에 실패했습니다')\n      }\n    } catch (error) {\n      console.error('Create room from order error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n      alert('채팅방 생성 중 오류가 발생했습니다')\n    } finally {\n      setIsCreatingRoom(false)\n    }\n  }\n\n  // 즐겨찾기 토글\n  const toggleFavorite = async (roomId: string, e: React.MouseEvent) => {\n    e.stopPropagation() // 채팅방 선택 이벤트 방지\n\n    try {\n      const response = await fetch('/api/chat/favorites', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ room_id: roomId })\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        // 로컬 상태 업데이트\n        setRooms(prevRooms =>\n          prevRooms.map(room =>\n            room.id === roomId\n              ? { ...room, is_favorite: data.is_favorite }\n              : room\n          )\n        )\n      }\n    } catch (error) {\n      console.error('[ChatListClient] Toggle favorite error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n    }\n  }\n\n  // 채팅방 선택 시 메시지 읽음 처리\n  const handleSelectRoom = async (roomId: string) => {\n    // 현재 방의 unreadCount를 확인\n    const currentRoom = rooms.find(r => r.id === roomId)\n    const unreadInThisRoom = currentRoom?.unreadCount || 0\n\n    // 즉시 UI 업데이트 (배지 제거)\n    setRooms(prevRooms =>\n      prevRooms.map(room =>\n        room.id === roomId\n          ? { ...room, unreadCount: 0 }\n          : room\n      )\n    )\n\n    // 전역 카운트도 즉시 감소 (헤더 배지 업데이트)\n    if (unreadInThisRoom > 0) {\n      decrementCount(unreadInThisRoom)\n    }\n\n    // 모바일에서는 채팅방 페이지로 이동\n    if (window.innerWidth < 768) {\n      router.push(`/chat/${roomId}`)\n    } else {\n      // PC에서는 현재 화면에서 선택\n      setSelectedRoomId(roomId)\n    }\n\n    // 백그라운드에서 읽음 처리\n    try {\n      await fetch('/api/chat/messages/mark-read', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ room_id: roomId })\n      })\n    } catch (error) {\n      console.error('[ChatListClient] Mark as read error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n    }\n  }\n\n  // 읽지 않은 메시지를 읽음 처리\n  const markMessagesAsRead = async (roomId: string) => {\n    try {\n      await fetch('/api/chat/messages/mark-read', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ room_id: roomId })\n      })\n    } catch (error) {\n      console.error('[ChatListClient] Mark messages as read error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n    }\n  }\n\n  // 메시지 목록 로드\n  const loadMessages = async (roomId: string) => {\n    const response = await fetch(`/api/chat/messages?room_id=${roomId}`)\n    if (response.ok) {\n      const data = await response.json()\n      setMessages(data.messages || [])\n      // 메시지 로드 후 읽음 처리\n      await markMessagesAsRead(roomId)\n      // loadRooms 호출 제거 - DB 재조회 방지\n    }\n  }\n\n  // 파일 선택 처리\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (file) {\n      // 파일 크기 제한 (10MB)\n      if (file.size > 10 * 1024 * 1024) {\n        alert('파일 크기는 10MB 이하만 가능합니다.')\n        return\n      }\n      setSelectedFile(file)\n    }\n  }\n\n  // 파일 업로드\n  const uploadFile = async (file: File): Promise<string | null> => {\n    try {\n      setIsUploading(true)\n      const fileExt = file.name.split('.').pop()\n      const fileName = `${Date.now()}_${Math.random().toString(36).substring(7)}.${fileExt}`\n      const filePath = `chat-files/${fileName}`\n\n      const { data, error } = await supabase.storage\n        .from('uploads')\n        .upload(filePath, file)\n\n      if (error) {\n        console.error('File upload error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n        return null\n      }\n\n      const { data: { publicUrl } } = supabase.storage\n        .from('uploads')\n        .getPublicUrl(filePath)\n\n      return publicUrl\n    } catch (error) {\n      console.error('Upload error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n      return null\n    } finally {\n      setIsUploading(false)\n    }\n  }\n\n  // 메시지 전송\n  const sendMessage = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if ((!newMessage.trim() && !selectedFile) || !selectedRoomId || isLoading) return\n\n    const messageText = newMessage.trim()\n    const fileToUpload = selectedFile\n    setIsLoading(true)\n    setNewMessage('') // 입력창 즉시 비우기\n    setSelectedFile(null) // 파일 선택 초기화\n\n    try {\n      let fileUrl = null\n      let fileName = null\n      let fileSize = null\n      let fileType = null\n\n      // 파일이 있으면 업로드\n      if (fileToUpload) {\n        fileUrl = await uploadFile(fileToUpload)\n        if (fileUrl) {\n          fileName = fileToUpload.name\n          fileSize = fileToUpload.size\n          fileType = fileToUpload.type\n        }\n      }\n\n      const response = await fetch('/api/chat/messages', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          room_id: selectedRoomId,\n          message: messageText || '',\n          file_url: fileUrl || null,\n          file_name: fileName || null,\n          file_size: fileSize || null,\n          file_type: fileType || null\n        })\n      })\n\n      if (response.ok) {\n        // 실시간 구독이 메시지를 자동으로 추가하므로 여기서는 추가하지 않음\n        // loadRooms() 제거 - DB 재조회 방지, 실시간 구독으로 자동 업데이트\n      } else {\n        const errorData = await response.json()\n        alert(`메시지 전송 실패: ${errorData.error || '알 수 없는 오류'}`)\n        setNewMessage(messageText) // 실패 시 메시지 복원\n        setSelectedFile(fileToUpload) // 실패 시 파일 복원\n      }\n    } catch (error) {\n      console.error('Send message error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n      alert('메시지 전송 중 오류가 발생했습니다.')\n      setNewMessage(messageText) // 실패 시 메시지 복원\n      setSelectedFile(fileToUpload) // 실패 시 파일 복원\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  // 초기 로드\n  useEffect(() => {\n    loadRooms()\n  }, [])\n\n  // 주문 ID로 채팅방 생성\n  useEffect(() => {\n    if (orderId && !isCreatingRoom) {\n      createRoomFromOrder(orderId)\n    }\n  }, [orderId])\n\n  // 선택된 채팅방의 메시지 로드\n  useEffect(() => {\n    if (selectedRoomId) {\n      loadMessages(selectedRoomId)\n    }\n  }, [selectedRoomId])\n\n  // 채팅방 목록의 unreadCount 실시간 업데이트\n  useEffect(() => {\n    const channel = supabase\n      .channel(`chat_list_updates_${userId}`)\n      .on(\n        'postgres_changes',\n        {\n          event: 'INSERT',\n          schema: 'public',\n          table: 'chat_messages'\n        },\n        async (payload) => {\n          const newMsg = payload.new as Message\n\n          // 내가 보낸 메시지가 아닌 경우에만 unreadCount 증가\n          if (newMsg.sender_id !== userId) {\n            // 해당 채팅방의 unreadCount 증가\n            setRooms(prevRooms => {\n              const updatedRooms = prevRooms.map(room => {\n                if (room.id === newMsg.room_id) {\n                  return {\n                    ...room,\n                    unreadCount: (room.unreadCount || 0) + 1,\n                    last_message_at: newMsg.created_at\n                  }\n                }\n                return room\n              })\n\n              // last_message_at 기준으로 재정렬\n              return updatedRooms.sort((a, b) =>\n                new Date(b.last_message_at).getTime() - new Date(a.last_message_at).getTime()\n              )\n            })\n          }\n        }\n      )\n      .subscribe()\n\n    return () => {\n      supabase.removeChannel(channel)\n    }\n  }, [userId, supabase])\n\n  // 실시간 메시지 구독 (선택된 채팅방)\n  useEffect(() => {\n    if (!selectedRoomId) return\n\n    const channel = supabase\n      .channel(`room:${selectedRoomId}`)\n      .on(\n        'postgres_changes',\n        {\n          event: 'INSERT',\n          schema: 'public',\n          table: 'chat_messages',\n          filter: `room_id=eq.${selectedRoomId}`\n        },\n        (payload) => {\n          const newMsg = payload.new as Message\n          // 모든 새 메시지를 실시간으로 표시 (파일 필드 포함)\n          setMessages(prev => [...prev, {\n            id: newMsg.id,\n            room_id: newMsg.room_id,\n            sender_id: newMsg.sender_id,\n            message: newMsg.message,\n            is_read: newMsg.is_read,\n            created_at: newMsg.created_at,\n            file_url: newMsg.file_url,\n            file_name: newMsg.file_name,\n            file_size: newMsg.file_size,\n            file_type: newMsg.file_type\n          }])\n          // loadRooms() 제거 - DB 재조회 방지\n        }\n      )\n      .subscribe()\n\n    return () => {\n      supabase.removeChannel(channel)\n    }\n  }, [selectedRoomId, userId])\n\n  const selectedRoom = rooms.find(r => r.id === selectedRoomId)\n  const isSeller = selectedRoom ? selectedRoom.seller_id === sellerId : false\n  const otherUser = selectedRoom?.otherUser || null\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 pt-16\">\n      {/* 모바일: 전체 화면 채팅방 목록 */}\n      <div className=\"lg:hidden min-h-screen bg-white\">\n        {/* 헤더 */}\n        <div className=\"px-4 py-4 border-b border-gray-200\">\n          <h1 className=\"text-2xl font-bold mb-4\">채팅</h1>\n\n          {/* 탭 */}\n          <div className=\"flex gap-2 overflow-x-auto\">\n            <button\n              onClick={() => setActiveTab('all')}\n              className={`px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${\n                activeTab === 'all'\n                  ? 'bg-brand-primary text-white'\n                  : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-300'\n              }`}\n            >\n              전체\n            </button>\n            <button\n              onClick={() => setActiveTab('unread')}\n              className={`px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${\n                activeTab === 'unread'\n                  ? 'bg-brand-primary text-white'\n                  : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-300'\n              }`}\n            >\n              안 읽음\n            </button>\n          </div>\n        </div>\n\n        {/* 채팅방 목록 */}\n        <div className=\"overflow-y-auto pb-20\">\n          {rooms.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center py-12 text-gray-500\">\n              <i className=\"far fa-comments text-4xl mb-4\"></i>\n              <p>채팅 내역이 없습니다</p>\n            </div>\n          ) : (\n            rooms\n              .filter(room => {\n                if (activeTab === 'all') return true\n                if (activeTab === 'unread') return (room.unreadCount || 0) > 0\n                if (activeTab === 'deal') return room.has_active_order === true\n                if (activeTab === 'favorite') return room.is_favorite === true\n                return true\n              })\n              .map(room => {\n                const otherUser = room.otherUser\n                const otherUserName = room.otherUser?.name || '사용자'\n\n                return (\n                  <button\n                    key={room.id}\n                    onClick={() => handleSelectRoom(room.id)}\n                    className=\"w-full px-4 py-3 border-b border-gray-100 hover:bg-gray-50 transition-colors text-left\"\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      {/* 프로필 이미지 */}\n                      <div className=\"w-12 h-12 rounded-full bg-gray-200 flex-shrink-0 overflow-hidden\">\n                        {otherUser?.profile_image ? (\n                          <img src={otherUser.profile_image} alt={otherUserName} className=\"w-full h-full object-cover\" />\n                        ) : (\n                          <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\n                            <i className=\"fas fa-user\"></i>\n                          </div>\n                        )}\n                      </div>\n\n                      {/* 정보 */}\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center justify-between mb-1\">\n                          <div className=\"flex items-center gap-2 min-w-0\">\n                            <h3 className=\"font-semibold text-sm truncate\">{otherUserName}</h3>\n                            <button\n                              onClick={(e) => toggleFavorite(room.id, e)}\n                              className=\"flex-shrink-0 text-lg transition-colors\"\n                              aria-label={room.is_favorite ? '즐겨찾기 해제' : '즐겨찾기 추가'}\n                            >\n                              {room.is_favorite ? (\n                                <i className=\"fas fa-star text-yellow-400\" aria-hidden=\"true\"></i>\n                              ) : (\n                                <i className=\"far fa-star text-gray-400\" aria-hidden=\"true\"></i>\n                              )}\n                            </button>\n                          </div>\n                          {room.lastMessage && (\n                            <span className=\"text-xs text-gray-500 ml-2 flex-shrink-0\">\n                              {new Date(room.lastMessage.created_at).toLocaleDateString('ko-KR', { month: 'short', day: 'numeric' })}\n                            </span>\n                          )}\n                        </div>\n                        {room.lastMessage && (\n                          <p className=\"text-sm text-gray-600 truncate\">{room.lastMessage.message}</p>\n                        )}\n                      </div>\n\n                      {/* 안읽음 배지 */}\n                      {(room.unreadCount || 0) > 0 && (\n                        <div className=\"flex-shrink-0 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center\">\n                          {room.unreadCount}\n                        </div>\n                      )}\n                    </div>\n                  </button>\n                )\n              })\n          )}\n        </div>\n      </div>\n\n      {/* PC: 기존 레이아웃 */}\n      <div className=\"hidden lg:block container-1200 py-6\">\n        <div className=\"flex h-[calc(100vh-120px)] bg-white shadow-lg rounded-lg overflow-hidden\">\n        {/* 왼쪽: 채팅방 목록 */}\n        <div className=\"w-[350px] border-r border-gray-200 flex flex-col flex-shrink-0\">\n        {/* 헤더 */}\n        <div className=\"px-4 py-4 border-b border-gray-200\">\n          <h1 className=\"text-2xl font-bold mb-4\">채팅</h1>\n\n          {/* 탭 */}\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => setActiveTab('all')}\n              className={`px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${\n                activeTab === 'all'\n                  ? 'bg-black text-white'\n                  : 'bg-white text-gray-700 hover:bg-gray-100'\n              }`}\n            >\n              전체\n            </button>\n            <button\n              onClick={() => setActiveTab('unread')}\n              className={`px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${\n                activeTab === 'unread'\n                  ? 'bg-black text-white'\n                  : 'bg-white text-gray-700 hover:bg-gray-100'\n              }`}\n            >\n              안 읽음\n            </button>\n            <button\n              onClick={() => setActiveTab('deal')}\n              className={`px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${\n                activeTab === 'deal'\n                  ? 'bg-black text-white'\n                  : 'bg-white text-gray-700 hover:bg-gray-100'\n              }`}\n            >\n              거래 중\n            </button>\n            <button\n              onClick={() => setActiveTab('favorite')}\n              className={`px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${\n                activeTab === 'favorite'\n                  ? 'bg-black text-white'\n                  : 'bg-white text-gray-700 hover:bg-gray-100'\n              }`}\n            >\n              즐겨찾기\n            </button>\n          </div>\n        </div>\n\n        {/* 검색 */}\n        <div className=\"px-4 py-3 border-b border-gray-200\">\n          <div className=\"relative\">\n            <input\n              type=\"text\"\n              id=\"chat-search\"\n              name=\"chat-search\"\n              placeholder=\"검색해 보세요.\"\n              className=\"w-full px-4 py-2 pr-10 bg-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300\"\n            />\n            <i className=\"fas fa-search absolute right-3 top-1/2 -translate-y-1/2 text-gray-400\"></i>\n          </div>\n        </div>\n\n        {/* 채팅방 목록 */}\n        <div className=\"flex-1 overflow-y-auto\">\n          {isCreatingRoom ? (\n            <div className=\"p-8 text-center text-gray-500\">\n              <i className=\"fas fa-spinner fa-spin text-4xl mb-3\"></i>\n              <p>채팅방을 생성하는 중...</p>\n            </div>\n          ) : rooms.length === 0 ? (\n            <div className=\"p-8 text-center text-gray-500\">\n              <i className=\"fas fa-comments text-4xl mb-3\"></i>\n              <p>채팅방이 없습니다</p>\n            </div>\n          ) : (\n            rooms\n              .filter(room => {\n                if (activeTab === 'all') return true\n                if (activeTab === 'unread') return (room.unreadCount || 0) > 0\n                if (activeTab === 'deal') return room.has_active_order === true\n                if (activeTab === 'favorite') return room.is_favorite === true\n                return true\n              })\n              .map((room) => {\n              const other = room.otherUser\n              const displayName = room.otherUser?.name || '사용자'\n\n              return (\n                <button\n                  key={room.id}\n                  onClick={() => handleSelectRoom(room.id)}\n                  className={`w-full p-4 border-b border-gray-100 hover:bg-gray-50 text-left transition-colors ${\n                    selectedRoomId === room.id ? 'bg-gray-50 border-l-4 border-l-green-500' : ''\n                  }`}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    {/* 프로필 아이콘 */}\n                    <div className=\"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center text-white flex-shrink-0\">\n                      {other?.profile_image ? (\n                        <img\n                          src={other.profile_image}\n                          alt={displayName}\n                          className=\"w-full h-full rounded-full object-cover\"\n                        />\n                      ) : (\n                        <i className=\"fas fa-user\"></i>\n                      )}\n                    </div>\n\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center justify-between mb-1\">\n                        <div className=\"flex items-center gap-2 min-w-0\">\n                          <h3 className=\"font-medium text-sm truncate\">{displayName}</h3>\n                          <button\n                            onClick={(e) => toggleFavorite(room.id, e)}\n                            className=\"flex-shrink-0 text-base transition-colors\"\n                            aria-label={room.is_favorite ? '즐겨찾기 해제' : '즐겨찾기 추가'}\n                          >\n                            {room.is_favorite ? (\n                              <i className=\"fas fa-star text-yellow-400\" aria-hidden=\"true\"></i>\n                            ) : (\n                              <i className=\"far fa-star text-gray-400\" aria-hidden=\"true\"></i>\n                            )}\n                          </button>\n                        </div>\n                        <span className=\"text-xs text-gray-400\">\n                          {room.last_message_at\n                            ? new Date(room.last_message_at).toLocaleDateString('ko-KR', {\n                                month: '2-digit',\n                                day: '2-digit'\n                              })\n                            : ''}\n                        </span>\n                      </div>\n                      {room.service && (\n                        <p className=\"text-xs text-gray-500 mb-1 truncate\">\n                          {room.service.title}\n                        </p>\n                      )}\n                      {room.lastMessage && (\n                        <p className=\"text-sm text-gray-600 truncate\">\n                          {room.lastMessage.message}\n                        </p>\n                      )}\n                    </div>\n\n                    {room.unreadCount ? (\n                      <span className=\"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full flex-shrink-0\">\n                        {room.unreadCount}\n                      </span>\n                    ) : null}\n                  </div>\n                </button>\n              )\n            })\n          )}\n        </div>\n      </div>\n\n      {/* 오른쪽: 채팅 메시지 */}\n      <div className=\"flex-1 flex flex-col\">\n        {selectedRoom ? (\n          <>\n            {/* 채팅방 헤더 */}\n            <div className=\"px-6 py-4 border-b border-gray-200 bg-white\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white\">\n                    {otherUser?.profile_image ? (\n                      <img\n                        src={otherUser.profile_image}\n                        alt=\"\"\n                        className=\"w-full h-full rounded-full object-cover\"\n                      />\n                    ) : (\n                      <i className=\"fas fa-user\"></i>\n                    )}\n                  </div>\n                  <div>\n                    <h2 className=\"font-bold\">\n                      {otherUser?.name || '사용자'}\n                    </h2>\n                    {selectedRoom.service && (\n                      <p className=\"text-sm text-gray-500\">{selectedRoom.service.title}</p>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* 메시지 목록 */}\n            <div className=\"flex-1 overflow-y-auto px-6 py-4 bg-gray-50\">\n              {messages.map((message) => {\n                const isMine = message.sender_id === userId\n                return (\n                  <div\n                    key={message.id}\n                    className={`flex items-start gap-2 mb-4 ${isMine ? 'flex-row-reverse' : ''}`}\n                  >\n                    {!isMine && (\n                      <div className=\"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white flex-shrink-0\">\n                        <i className=\"fas fa-user text-xs\"></i>\n                      </div>\n                    )}\n\n                    <div className={`flex items-end gap-2 ${isMine ? 'flex-row-reverse' : ''}`}>\n                      <div\n                        className={`max-w-md px-4 py-2 rounded-2xl ${\n                          isMine\n                            ? 'bg-[#d4f4dd] text-gray-900'\n                            : 'bg-white text-gray-900 border border-gray-200'\n                        }`}\n                      >\n                        {message.file_url && (\n                          <>\n                            {message.file_type?.startsWith('image/') ? (\n                              // 이미지 파일인 경우\n                              <a\n                                href={message.file_url}\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                                className=\"block mb-2\"\n                              >\n                                <img\n                                  src={message.file_url}\n                                  alt={message.file_name || '이미지'}\n                                  className=\"max-w-full max-h-64 rounded-lg cursor-pointer hover:opacity-90 transition-opacity\"\n                                  loading=\"lazy\"\n                                />\n                                <p className=\"text-xs text-gray-500 mt-1\">\n                                  {message.file_name}\n                                  {message.file_size && ` • ${(message.file_size / 1024).toFixed(1)} KB`}\n                                </p>\n                              </a>\n                            ) : (\n                              // 일반 파일인 경우\n                              <a\n                                href={message.file_url}\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                                className=\"flex items-center gap-2 mb-2 p-2 bg-white/50 rounded-lg hover:bg-white/70 transition-colors\"\n                              >\n                                <i className=\"fas fa-file text-blue-500\"></i>\n                                <div className=\"flex-1 min-w-0\">\n                                  <p className=\"text-sm font-medium truncate\">{message.file_name || '첨부파일'}</p>\n                                  {message.file_size && (\n                                    <p className=\"text-xs text-gray-500\">\n                                      {(message.file_size / 1024).toFixed(1)} KB\n                                    </p>\n                                  )}\n                                </div>\n                                <i className=\"fas fa-download text-gray-400\"></i>\n                              </a>\n                            )}\n                          </>\n                        )}\n                        {message.message && (\n                          <p className=\"whitespace-pre-wrap break-words\">{message.message}</p>\n                        )}\n                      </div>\n                      <span className=\"text-xs text-gray-400 whitespace-nowrap\">\n                        {new Date(message.created_at).toLocaleTimeString('ko-KR', {\n                          hour: '2-digit',\n                          minute: '2-digit',\n                          hour12: false\n                        })}\n                      </span>\n                    </div>\n                  </div>\n                )\n              })}\n            </div>\n\n            {/* 입력 영역 */}\n            <div className=\"px-6 py-4 bg-white border-t border-gray-200\">\n              <form onSubmit={sendMessage} className=\"space-y-3\">\n                {/* 선택된 파일 표시 */}\n                {selectedFile && (\n                  <div className=\"flex items-center gap-2 p-2 bg-blue-50 border border-blue-200 rounded-lg\">\n                    <i className=\"fas fa-file text-blue-500\"></i>\n                    <span className=\"flex-1 text-sm truncate\">{selectedFile.name}</span>\n                    <span className=\"text-xs text-gray-500\">\n                      {(selectedFile.size / 1024).toFixed(1)} KB\n                    </span>\n                    <button\n                      type=\"button\"\n                      onClick={() => setSelectedFile(null)}\n                      className=\"text-red-500 hover:text-red-700\"\n                      aria-label=\"첨부파일 삭제\"\n                    >\n                      <i className=\"fas fa-times\" aria-hidden=\"true\"></i>\n                    </button>\n                  </div>\n                )}\n\n                <div className=\"relative\">\n                  <textarea\n                    value={newMessage}\n                    onChange={(e) => setNewMessage(e.target.value)}\n                    onKeyPress={(e) => {\n                      if (e.key === 'Enter' && !e.shiftKey) {\n                        e.preventDefault()\n                        sendMessage(e)\n                      }\n                    }}\n                    placeholder=\"메시지를 입력하세요. (Enter: 줄바꿈 / Ctrl+Enter: 전송)\"\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none\"\n                    rows={3}\n                    disabled={isLoading || isUploading}\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex gap-2\">\n                    <button\n                      type=\"button\"\n                      className=\"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50\"\n                    >\n                      자주 쓰는 문구\n                    </button>\n                    <button\n                      type=\"button\"\n                      className=\"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50\"\n                    >\n                      결제 요청\n                    </button>\n                    <input\n                      type=\"file\"\n                      id=\"file-input\"\n                      className=\"hidden\"\n                      onChange={handleFileSelect}\n                      disabled={isLoading || isUploading}\n                    />\n                    <label\n                      htmlFor=\"file-input\"\n                      className=\"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer inline-flex items-center gap-2\"\n                    >\n                      <i className=\"fas fa-paperclip\"></i>\n                      파일 첨부\n                    </label>\n                  </div>\n\n                  <button\n                    type=\"submit\"\n                    disabled={(!newMessage.trim() && !selectedFile) || isLoading || isUploading}\n                    className=\"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-[#0a2540] disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                  >\n                    {isUploading ? '업로드 중...' : isLoading ? '전송 중...' : '전송'}\n                  </button>\n                </div>\n              </form>\n            </div>\n          </>\n        ) : (\n          <div className=\"flex-1 flex items-center justify-center text-gray-400\">\n            <div className=\"text-center\">\n              <i className=\"fas fa-comments text-6xl mb-4\"></i>\n              <p className=\"text-lg\">채팅방을 선택해주세요</p>\n            </div>\n          </div>\n        )}\n        </div>\n      </div>\n      </div>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\chat\\[roomId]\\DirectChatClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\chat\\[roomId]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\chat\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\contact\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\expert\\register\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\help\\contact\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\help\\faq\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\help\\notice\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\help\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\landing\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\menu\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\buyer\\dashboard\\BuyerDashboardClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'benefits' is defined but never used. Allowed unused args must match /^_/u.","line":53,"column":80,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":88}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useQueryClient } from '@tanstack/react-query'\r\nimport { prefetchBuyerData } from '@/lib/prefetch/buyerPrefetch'\r\nimport MypageLayoutWrapper from '@/components/mypage/MypageLayoutWrapper'\r\nimport StatCard from '@/components/mypage/StatCard'\r\nimport Link from 'next/link'\r\n\r\nimport type { Order, Service, Seller } from '@/types/common'\r\n\r\ninterface BuyerStats {\r\n  inProgressOrders: number\r\n  deliveredOrders: number\r\n  pendingReviews: number\r\n  monthlyPurchases: number\r\n}\r\n\r\ninterface BuyerOrder extends Order {\r\n  delivery_date?: string | null\r\n  buyer_note?: string | null\r\n  seller_message?: string | null\r\n  revision_count?: number\r\n  remaining_revisions?: number\r\n  requirements?: string\r\n}\r\n\r\ninterface Favorite {\r\n  id: string\r\n  service?: Service & {\r\n    seller?: Seller\r\n  }\r\n  created_at: string\r\n}\r\n\r\ninterface BuyerBenefits {\r\n  points: number\r\n  coupons: number\r\n  membershipLevel: string\r\n}\r\n\r\ninterface Props {\r\n  stats: BuyerStats\r\n  recentOrders: BuyerOrder[]\r\n  favorites: Favorite[]\r\n  benefits: BuyerBenefits\r\n  profileData?: {\r\n    name: string\r\n    profile_image?: string | null\r\n  } | null\r\n}\r\n\r\nexport default function BuyerDashboardClient({ stats, recentOrders, favorites, benefits, profileData }: Props) {\r\n  const queryClient = useQueryClient()\r\n\r\n  // 백그라운드에서 모든 구매자 페이지 데이터 프리페치\r\n  useEffect(() => {\r\n    // 대시보드 렌더링 후 즉시 다른 페이지 데이터 미리 불러오기\r\n    const timer = setTimeout(() => {\r\n      prefetchBuyerData(queryClient).catch(err => console.error('Operation error:', JSON.stringify(err, Object.getOwnPropertyNames(err), 2)))\r\n    }, 500) // 대시보드 로딩 후 0.5초 뒤에 실행\r\n\r\n    return () => clearTimeout(timer)\r\n  }, [queryClient])\r\n\r\n  // Generate alerts based on real data\r\n  const alerts = []\r\n  if (stats?.deliveredOrders > 0) {\r\n    alerts.push({\r\n      id: 1,\r\n      type: 'delivered',\r\n      message: `작업 완료 도착 ${stats.deliveredOrders}건 - 확인 필요`,\r\n      href: '/mypage/buyer/orders?status=delivered'\r\n    })\r\n  }\r\n  if (stats?.pendingReviews > 0) {\r\n    alerts.push({\r\n      id: 2,\r\n      type: 'review',\r\n      message: `리뷰 작성 가능 ${stats.pendingReviews}건`,\r\n      href: '/mypage/buyer/reviews?tab=pending'\r\n    })\r\n  }\r\n\r\n  const getStatusLabel = (status: string) => {\r\n    switch (status) {\r\n      case 'paid': return '결제완료'\r\n      case 'in_progress': return '진행중'\r\n      case 'delivered': return '도착 확인 대기'\r\n      case 'completed': return '완료'\r\n      case 'cancelled': return '취소/환불'\r\n      default: return status\r\n    }\r\n  }\r\n\r\n  const getDaysLeft = (deliveryDate: string | null | undefined) => {\r\n    if (!deliveryDate) return null\r\n    const days = Math.ceil((new Date(deliveryDate).getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24))\r\n    return days > 0 ? days : null\r\n  }\r\n\r\n  return (\r\n    <MypageLayoutWrapper mode=\"buyer\" profileData={profileData}>\r\n      <div className=\"py-8 px-4\">\r\n          {/* 페이지 헤더 */}\r\n          <div className=\"mb-6 lg:mb-8\">\r\n            <h1 className=\"text-xl font-bold text-gray-900\">구매 대시보드</h1>\r\n            <p className=\"text-gray-600 mt-1 text-sm\">주문 현황을 확인하세요</p>\r\n          </div>\r\n\r\n        {/* 통계 카드 */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n          <StatCard\r\n            title=\"진행중 주문\"\r\n            value={`${stats?.inProgressOrders || 0}건`}\r\n            icon=\"fa-spinner\"\r\n            color=\"yellow\"\r\n          />\r\n          <StatCard\r\n            title=\"도착 확인 대기\"\r\n            value={`${stats?.deliveredOrders || 0}건`}\r\n            icon=\"fa-box-open\"\r\n            color=\"blue\"\r\n          />\r\n          <StatCard\r\n            title=\"작성 가능 리뷰\"\r\n            value={`${stats?.pendingReviews || 0}건`}\r\n            icon=\"fa-star\"\r\n            color=\"purple\"\r\n          />\r\n          <StatCard\r\n            title=\"이번달 구매\"\r\n            value={`${stats?.monthlyPurchases || 0}건`}\r\n            icon=\"fa-shopping-cart\"\r\n            color=\"green\"\r\n          />\r\n        </div>\r\n\r\n        {/* 알림 */}\r\n        {alerts.length > 0 && (\r\n          <div className=\"bg-white rounded-lg border border-gray-200 p-6 mb-8\">\r\n            <h2 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n              <i className=\"fas fa-bell text-red-500\"></i>\r\n              확인 필요\r\n            </h2>\r\n            <div className=\"space-y-3\">\r\n              {alerts.map((alert) => (\r\n                <Link\r\n                  key={alert.id}\r\n                  href={alert.href}\r\n                  className=\"flex items-center justify-between p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors\"\r\n                >\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <i className=\"fas fa-info-circle text-blue-500\"></i>\r\n                    <span className=\"text-gray-900 font-medium\">{alert.message}</span>\r\n                  </div>\r\n                  <i className=\"fas fa-arrow-right text-gray-400\"></i>\r\n                </Link>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* 진행중인 주문 */}\r\n        <div className=\"bg-white rounded-lg border border-gray-200 p-6 mb-8\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h2 className=\"text-lg font-bold text-gray-900 flex items-center gap-2\">\r\n              <i className=\"fas fa-box text-purple-500\"></i>\r\n              진행중인 주문\r\n            </h2>\r\n            <Link\r\n              href=\"/mypage/buyer/orders\"\r\n              className=\"text-sm text-brand-primary hover:underline flex items-center gap-1\"\r\n            >\r\n              전체 보기 <i className=\"fas fa-arrow-right text-xs\"></i>\r\n            </Link>\r\n          </div>\r\n\r\n          <div className=\"space-y-4\">\r\n            {recentOrders.length > 0 ? (\r\n              recentOrders.map((order) => {\r\n                const daysLeft = getDaysLeft(order.delivery_date)\r\n                return (\r\n                  <div\r\n                    key={order.id}\r\n                    className=\"border border-gray-200 rounded-lg p-4 hover:border-brand-primary transition-colors\"\r\n                  >\r\n                    <div className=\"flex gap-4\">\r\n                      {/* 썸네일 */}\r\n                      <div className=\"w-24 h-24 bg-gray-100 rounded-lg flex-shrink-0 flex items-center justify-center\">\r\n                        {order.service?.thumbnail_url ? (\r\n                          <img src={order.service.thumbnail_url} alt={order.title || order.service.title} className=\"w-full h-full object-cover rounded-lg\" />\r\n                        ) : (\r\n                          <i className=\"fas fa-image text-gray-400 text-2xl\"></i>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* 정보 */}\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-start justify-between mb-2\">\r\n                          <div>\r\n                            <div className=\"flex items-center gap-2 mb-1\">\r\n                              <span className=\"text-sm text-gray-500\">#{order.order_number || order.id.slice(0, 8)}</span>\r\n                              <span className=\"text-base font-bold text-gray-900\">{order.title || order.service?.title}</span>\r\n                            </div>\r\n                            <div className=\"text-sm text-gray-600 mb-2\">\r\n                              판매자: {order.seller?.name || '판매자'}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-3 mb-3\">\r\n                          <span className={`px-3 py-1 rounded-full text-xs font-medium ${\r\n                            order.status === 'delivered'\r\n                              ? 'bg-red-100 text-red-700'\r\n                              : 'bg-yellow-100 text-yellow-700'\r\n                          }`}>\r\n                            {getStatusLabel(order.status)}\r\n                          </span>\r\n                          {daysLeft && (\r\n                            <span className=\"text-sm text-gray-600\">D-{daysLeft}일</span>\r\n                          )}\r\n                          <span className=\"text-sm font-bold text-gray-900\">{order.total_amount?.toLocaleString() || '0'}원</span>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <Link\r\n                            href={`/mypage/buyer/orders/${order.id}`}\r\n                            className=\"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-[#0a2540] transition-colors text-sm font-medium\"\r\n                          >\r\n                            {order.status === 'delivered' ? '확인하기' : '상세보기'}\r\n                          </Link>\r\n                          <Link\r\n                            href={`/chat?order=${order.id}`}\r\n                            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium\"\r\n                          >\r\n                            메시지\r\n                          </Link>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })\r\n            ) : (\r\n              <div className=\"text-center py-8 text-gray-500\">\r\n                진행중인 주문이 없습니다\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* 최근 찜한 서비스 */}\r\n        <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h2 className=\"text-lg font-bold text-gray-900 flex items-center gap-2\">\r\n              <i className=\"fas fa-heart text-red-500\"></i>\r\n              최근 찜한 서비스\r\n            </h2>\r\n            <Link\r\n              href=\"/mypage/buyer/favorites\"\r\n              className=\"text-sm text-brand-primary hover:underline\"\r\n            >\r\n              전체 보기\r\n            </Link>\r\n          </div>\r\n          <div className=\"space-y-3\">\r\n            {favorites.length > 0 ? (\r\n              favorites.map((item) => (\r\n                <Link\r\n                  key={item.id}\r\n                  href={`/services/${item.service?.id}`}\r\n                  className=\"flex items-center justify-between p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                >\r\n                  <div>\r\n                    <div className=\"font-medium text-gray-900\">{item.service?.title}</div>\r\n                    <div className=\"text-sm text-gray-600\">{item.service?.seller?.name}</div>\r\n                  </div>\r\n                  <i className=\"fas fa-arrow-right text-gray-400\"></i>\r\n                </Link>\r\n              ))\r\n            ) : (\r\n              <div className=\"text-center py-8 text-gray-500\">\r\n                찜한 서비스가 없습니다\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </MypageLayoutWrapper>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\buyer\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\buyer\\favorites\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\buyer\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\buyer\\orders\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\buyer\\orders\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\buyer\\quotes\\BuyerQuotesClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\buyer\\quotes\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\buyer\\reviews\\BuyerReviewsClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setPendingReviews' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":32,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setWrittenReviews' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":33,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":43}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useSearchParams } from 'next/navigation'\r\nimport MypageLayoutWrapper from '@/components/mypage/MypageLayoutWrapper'\r\nimport { createReview } from '@/lib/supabase/mutations/reviews'\r\nimport { logger } from '@/lib/logger'\r\nimport { useRouter } from 'next/navigation'\r\nimport { Order } from '@/types/common'\r\n\r\ninterface BuyerReviewsClientProps {\r\n  initialPendingReviews: Partial<Order>[]\r\n  initialWrittenReviews: Partial<Order>[]\r\n  userId: string\r\n}\r\n\r\nexport default function BuyerReviewsClient({\r\n  initialPendingReviews,\r\n  initialWrittenReviews,\r\n  userId\r\n}: BuyerReviewsClientProps) {\r\n  const router = useRouter()\r\n  const searchParams = useSearchParams()\r\n  const tabFromUrl = searchParams.get('tab') || 'pending'\r\n  const [activeTab, setActiveTab] = useState<'pending' | 'written'>(tabFromUrl as 'pending' | 'written')\r\n  const [showWriteModal, setShowWriteModal] = useState(false)\r\n  const [selectedOrder, setSelectedOrder] = useState<Partial<Order> | null>(null)\r\n  const [rating, setRating] = useState(5)\r\n  const [reviewContent, setReviewContent] = useState('')\r\n  const [submitting, setSubmitting] = useState(false)\r\n\r\n  const [pendingReviews, setPendingReviews] = useState(initialPendingReviews)\r\n  const [writtenReviews, setWrittenReviews] = useState(initialWrittenReviews)\r\n\r\n  useEffect(() => {\r\n    setActiveTab(tabFromUrl as 'pending' | 'written')\r\n  }, [tabFromUrl])\r\n\r\n  function refreshData() {\r\n    router.refresh()\r\n  }\r\n\r\n  const handleSubmitReview = async () => {\r\n    if (!reviewContent.trim()) {\r\n      alert('리뷰 내용을 입력해주세요')\r\n      return\r\n    }\r\n\r\n    if (!selectedOrder?.id || !selectedOrder?.service_id || !selectedOrder?.seller_id) {\r\n      alert('주문 정보가 올바르지 않습니다')\r\n      return\r\n    }\r\n\r\n    try {\r\n      setSubmitting(true)\r\n      await createReview({\r\n        orderId: selectedOrder.id,\r\n        serviceId: selectedOrder.service_id,\r\n        sellerId: selectedOrder.seller_id,\r\n        buyerId: userId,\r\n        rating,\r\n        content: reviewContent\r\n      })\r\n\r\n      setShowWriteModal(false)\r\n      setSelectedOrder(null)\r\n      setRating(5)\r\n      setReviewContent('')\r\n      refreshData()\r\n      alert('리뷰가 등록되었습니다')\r\n    } catch (err: unknown) {\r\n      logger.error('리뷰 등록 실패:', err)\r\n      alert('리뷰 등록에 실패했습니다')\r\n    } finally {\r\n      setSubmitting(false)\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <MypageLayoutWrapper mode=\"buyer\">\r\n      <div className=\"py-8 px-4\">\r\n        {/* 페이지 헤더 */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-xl font-bold text-gray-900\">리뷰 관리</h1>\r\n          <p className=\"text-gray-600 mt-1 text-sm\">서비스 리뷰를 작성하고 관리하세요</p>\r\n        </div>\r\n\r\n        {/* 탭 네비게이션 */}\r\n        <div className=\"bg-white rounded-lg border border-gray-200 mb-6\">\r\n          <div className=\"flex items-center\">\r\n            <button\r\n              onClick={() => setActiveTab('pending')}\r\n              className={`flex-1 px-6 py-4 font-medium text-sm border-b-2 transition-colors ${\r\n                activeTab === 'pending'\r\n                  ? 'border-brand-primary text-brand-primary'\r\n                  : 'border-transparent text-gray-600 hover:text-gray-900'\r\n              }`}\r\n            >\r\n              작성 가능\r\n              {pendingReviews.length > 0 && (\r\n                <span className={`ml-2 px-2 py-0.5 rounded-full text-xs ${\r\n                  activeTab === 'pending'\r\n                    ? 'bg-brand-primary text-white'\r\n                    : 'bg-gray-200 text-gray-600'\r\n                }`}>\r\n                  {pendingReviews.length}\r\n                </span>\r\n              )}\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('written')}\r\n              className={`flex-1 px-6 py-4 font-medium text-sm border-b-2 transition-colors ${\r\n                activeTab === 'written'\r\n                  ? 'border-brand-primary text-brand-primary'\r\n                  : 'border-transparent text-gray-600 hover:text-gray-900'\r\n              }`}\r\n            >\r\n              작성한 리뷰\r\n              {writtenReviews.length > 0 && (\r\n                <span className={`ml-2 px-2 py-0.5 rounded-full text-xs ${\r\n                  activeTab === 'written'\r\n                    ? 'bg-brand-primary text-white'\r\n                    : 'bg-gray-200 text-gray-600'\r\n                }`}>\r\n                  {writtenReviews.length}\r\n                </span>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* 작성 가능 탭 */}\r\n        {activeTab === 'pending' && (\r\n          <div className=\"space-y-4\">\r\n            {pendingReviews.length > 0 ? (\r\n              pendingReviews.map((order) => (\r\n                <div key={order.id} className=\"bg-white border border-gray-200 rounded-lg p-6\">\r\n                  <div className=\"flex gap-4\">\r\n                    <div className=\"w-24 h-24 bg-gray-100 rounded-lg flex-shrink-0 flex items-center justify-center\">\r\n                      {order.service?.thumbnail_url ? (\r\n                        <img src={order.service.thumbnail_url} alt={order.title || order.service.title} className=\"w-full h-full object-cover rounded-lg\" />\r\n                      ) : (\r\n                        <i className=\"fas fa-image text-gray-400 text-2xl\"></i>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-start justify-between mb-2\">\r\n                        <div>\r\n                          <h3 className=\"text-lg font-bold text-gray-900 mb-1\">{order.title || order.service?.title}</h3>\r\n                          <div className=\"text-sm text-gray-600\">\r\n                            판매자: {order.seller?.name} • 주문번호 #{order.order_number || order.id?.slice(0, 8) || 'N/A'}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center gap-4 mb-3\">\r\n                        <span className=\"text-sm text-gray-600\">\r\n                          완료일: {order.completed_at ? new Date(order.completed_at).toLocaleDateString('ko-KR') : '-'}\r\n                        </span>\r\n                        <span className=\"text-sm font-bold text-gray-900\">{order.total_amount?.toLocaleString() || '0'}원</span>\r\n                      </div>\r\n\r\n                      <button\r\n                        onClick={() => {\r\n                          setSelectedOrder(order)\r\n                          setShowWriteModal(true)\r\n                        }}\r\n                        className=\"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors text-sm font-medium\"\r\n                      >\r\n                        <i className=\"fas fa-star mr-2\"></i>\r\n                        리뷰 작성\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              <div className=\"bg-white rounded-lg border border-gray-200 p-12 text-center\">\r\n                <i className=\"fas fa-star text-gray-300 text-5xl mb-4\"></i>\r\n                <p className=\"text-gray-600 text-lg\">작성 가능한 리뷰가 없습니다</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* 작성한 리뷰 탭 */}\r\n        {activeTab === 'written' && (\r\n          <div className=\"space-y-4\">\r\n            {writtenReviews.length > 0 ? (\r\n              writtenReviews.map((review) => (\r\n                <div key={review.id} className=\"bg-white border border-gray-200 rounded-lg p-6\">\r\n                  <div className=\"flex gap-4 mb-4\">\r\n                    <div className=\"w-24 h-24 bg-gray-100 rounded-lg flex-shrink-0 flex items-center justify-center\">\r\n                      {review.service?.thumbnail_url ? (\r\n                        <img src={review.service.thumbnail_url} alt={review.service.title} className=\"w-full h-full object-cover rounded-lg\" />\r\n                      ) : (\r\n                        <i className=\"fas fa-image text-gray-400 text-2xl\"></i>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-start justify-between mb-2\">\r\n                        <div>\r\n                          <h3 className=\"text-lg font-bold text-gray-900 mb-1\">{review.service?.title}</h3>\r\n                          <div className=\"text-sm text-gray-600\">\r\n                            판매자: {review.seller?.name} • 주문번호 #{review.order?.order_number || review.order_id?.slice(0, 8)}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1\">\r\n                          {[1, 2, 3, 4, 5].map((star) => (\r\n                            <i key={star} className={`fas fa-star ${star <= (review.rating || 0) ? 'text-yellow-400' : 'text-gray-300'}`}></i>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"text-sm text-gray-600 mb-3\">\r\n                        작성일: {review.created_at ? new Date(review.created_at).toLocaleDateString('ko-KR') : '-'}\r\n                      </div>\r\n\r\n                      <p className=\"text-gray-700 mb-4\">{review.comment || ''}</p>\r\n\r\n                      {review.seller_reply && (\r\n                        <div className=\"bg-gray-50 rounded-lg p-4 mb-4\">\r\n                          <div className=\"flex items-center gap-2 mb-2\">\r\n                            <i className=\"fas fa-reply text-brand-primary\"></i>\r\n                            <span className=\"text-sm font-medium text-gray-900\">판매자 답변</span>\r\n                          </div>\r\n                          <p className=\"text-gray-700\">{review.seller_reply}</p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\r\n                    <p className=\"text-sm text-blue-800\">\r\n                      <i className=\"fas fa-info-circle mr-2\"></i>\r\n                      작성된 리뷰는 수정 및 삭제가 불가능합니다\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              <div className=\"bg-white rounded-lg border border-gray-200 p-12 text-center\">\r\n                <i className=\"fas fa-star text-gray-300 text-5xl mb-4\"></i>\r\n                <p className=\"text-gray-600 text-lg\">작성한 리뷰가 없습니다</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* 리뷰 작성 모달 */}\r\n        {showWriteModal && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-lg max-w-2xl w-full p-6\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <h2 className=\"text-2xl font-bold text-gray-900\">리뷰 작성</h2>\r\n                <button\r\n                  onClick={() => setShowWriteModal(false)}\r\n                  className=\"text-gray-400 hover:text-gray-600\"\r\n                >\r\n                  <i className=\"fas fa-times text-2xl\"></i>\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    평점 *\r\n                  </label>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    {[1, 2, 3, 4, 5].map((star) => (\r\n                      <button\r\n                        key={star}\r\n                        type=\"button\"\r\n                        onClick={() => setRating(star)}\r\n                        className=\"transition-colors\"\r\n                      >\r\n                        <i className={`fas fa-star text-3xl ${star <= rating ? 'text-yellow-400' : 'text-gray-300'}`}></i>\r\n                      </button>\r\n                    ))}\r\n                    <span className=\"ml-2 text-gray-600\">{rating}점</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    리뷰 내용 *\r\n                  </label>\r\n                  <textarea\r\n                    value={reviewContent}\r\n                    onChange={(e) => setReviewContent(e.target.value)}\r\n                    rows={6}\r\n                    placeholder=\"서비스 이용 후기를 작성해주세요\"\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                  ></textarea>\r\n                </div>\r\n\r\n                <div className=\"bg-blue-50 rounded-lg p-4\">\r\n                  <div className=\"flex items-start gap-2\">\r\n                    <i className=\"fas fa-info-circle text-blue-600 mt-1\"></i>\r\n                    <div className=\"text-sm text-blue-700\">\r\n                      <p className=\"font-medium mb-1\">리뷰 작성 안내</p>\r\n                      <ul className=\"list-disc list-inside space-y-1\">\r\n                        <li>서비스 품질, 판매자 응대, 납품 속도 등을 평가해주세요</li>\r\n                        <li>구체적이고 솔직한 후기가 다른 구매자에게 도움이 됩니다</li>\r\n                        <li>비속어나 욕설은 사용하지 말아주세요</li>\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 pt-4\">\r\n                  <button\r\n                    onClick={() => {\r\n                      setShowWriteModal(false)\r\n                      setRating(5)\r\n                      setReviewContent('')\r\n                    }}\r\n                    disabled={submitting}\r\n                    className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50\"\r\n                  >\r\n                    취소\r\n                  </button>\r\n                  <button\r\n                    onClick={handleSubmitReview}\r\n                    disabled={submitting}\r\n                    className=\"flex-1 px-6 py-3 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors font-medium disabled:opacity-50\"\r\n                  >\r\n                    {submitting ? '등록 중...' : (\r\n                      <>\r\n                        <i className=\"fas fa-check mr-2\"></i>\r\n                        리뷰 등록\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n      </div>\r\n    </MypageLayoutWrapper>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\buyer\\reviews\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\BecomeSellerForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":62,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":62,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { createClient } from '@/lib/supabase/client'\r\n\r\ninterface Props {\r\n  userId: string\r\n}\r\n\r\nexport default function BecomeSellerForm({ userId }: Props) {\r\n  const router = useRouter()\r\n  const [displayName, setDisplayName] = useState('')\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState('')\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n\r\n    if (!displayName.trim()) {\r\n      setError('판매자명을 입력해주세요')\r\n      return\r\n    }\r\n\r\n    setLoading(true)\r\n    setError('')\r\n\r\n    try {\r\n      const supabase = createClient()\r\n\r\n      // 1. Update profiles table with display name\r\n      const { error: profileError } = await supabase\r\n        .from('profiles')\r\n        .update({\r\n          name: displayName.trim(),\r\n          updated_at: new Date().toISOString()\r\n        })\r\n        .eq('user_id', userId)\r\n\r\n      if (profileError) {\r\n        setError('프로필 업데이트에 실패했습니다: ' + profileError.message)\r\n        setLoading(false)\r\n        return\r\n      }\r\n\r\n      // 2. Insert into sellers table (without display_name)\r\n      const { error: insertError } = await supabase\r\n        .from('sellers')\r\n        .insert({\r\n          user_id: userId,\r\n          status: 'active'\r\n        })\r\n\r\n      if (insertError) {\r\n        setError('판매자 등록에 실패했습니다: ' + insertError.message)\r\n        setLoading(false)\r\n        return\r\n      }\r\n\r\n      router.push('/mypage/seller/dashboard')\r\n      router.refresh()\r\n    } catch (err) {\r\n      setError('오류가 발생했습니다')\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8 px-4\">\r\n      <div className=\"max-w-md mx-auto\">\r\n        <div className=\"bg-white rounded-lg shadow-md p-8\">\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">판매자 되기</h1>\r\n          <p className=\"text-gray-600 mb-6\">판매자명을 입력하세요</p>\r\n\r\n          {error && (\r\n            <div className=\"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"mb-6\">\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                판매자명 *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={displayName}\r\n                onChange={(e) => setDisplayName(e.target.value)}\r\n                placeholder=\"판매자로 활동할 이름\"\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                required\r\n                disabled={loading}\r\n              />\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading || !displayName.trim()}\r\n              className=\"w-full bg-brand-primary text-white py-3 rounded-lg font-medium hover:bg-[#1a4d8f] transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed\"\r\n            >\r\n              {loading ? '등록 중...' : '판매자 등록'}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\advertising\\bank-transfer\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\advertising\\charge\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\advertising\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":136,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4701,4704],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4701,4704],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":405,"column":35,"nodeType":"MemberExpression","messageId":"limited","endLine":405,"endColumn":46,"suggestions":[{"fix":{"range":[19368,19405],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":416,"column":35,"nodeType":"MemberExpression","messageId":"limited","endLine":416,"endColumn":46,"suggestions":[{"fix":{"range":[19975,20011],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState, useMemo } from 'react';\r\nimport { createClient } from '@/lib/supabase/client';\r\nimport { startAdvertisingSubscription } from '@/lib/advertising';\r\nimport type { AdvertisingDashboard } from '@/types/advertising';\r\nimport MypageLayoutWrapper from '@/components/mypage/MypageLayoutWrapper';\r\n\r\nexport default function AdvertisingPage() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [dashboard, setDashboard] = useState<AdvertisingDashboard | null>(null);\r\n  const [services, setServices] = useState<Array<{\r\n    id: string;\r\n    title: string;\r\n    thumbnailUrl: string | null;\r\n    hasActiveAd: boolean;\r\n    adDetails?: {\r\n      subscriptionId: string;\r\n      monthlyPrice: number;\r\n      nextBillingDate: string;\r\n      totalImpressions: number;\r\n      totalClicks: number;\r\n      ctr: number;\r\n      createdAt: string;\r\n      status: string;\r\n      isFreePromotion: boolean;\r\n      promotionEndDate: string | null;\r\n    };\r\n  }>>([]);\r\n  const [selectedService, setSelectedService] = useState<string>('');\r\n  const [selectedMonths, setSelectedMonths] = useState<number>(1);\r\n  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState<'card' | 'bank_transfer'>('bank_transfer');\r\n  const [purchasing, setPurchasing] = useState(false);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  // 할인율 계산: 1개월 20만원(공급가액) → 12개월 10만원(공급가액) (선형 할인)\r\n  const calculateMonthlyPrice = (months: number): number => {\r\n    const basePrice = 200000; // 1개월 기준 20만원 (공급가액)\r\n    const finalPrice = 100000; // 12개월 시 10만원 (공급가액)\r\n    const discountPerMonth = (basePrice - finalPrice) / 11; // 11단계로 할인\r\n    const price = basePrice - (discountPerMonth * (months - 1));\r\n    // 100원 단위 제거 (1000원 단위로 반올림)\r\n    return Math.round(price / 1000) * 1000;\r\n  };\r\n\r\n  const monthlySupplyPrice = useMemo(() => calculateMonthlyPrice(selectedMonths), [selectedMonths]); // 월 공급가액\r\n  const totalSupplyPrice = useMemo(() => monthlySupplyPrice * selectedMonths, [monthlySupplyPrice, selectedMonths]); // 총 공급가액\r\n  const totalTaxAmount = useMemo(() => Math.round(totalSupplyPrice * 0.1), [totalSupplyPrice]); // 총 부가세 (10%)\r\n  const totalPrice = useMemo(() => totalSupplyPrice + totalTaxAmount, [totalSupplyPrice, totalTaxAmount]); // VAT 포함 총액\r\n  const discountRate = useMemo(() => {\r\n    if (selectedMonths === 1) return 0;\r\n    const originalTotal = 200000 * selectedMonths;\r\n    return Math.round(((originalTotal - totalSupplyPrice) / originalTotal) * 100);\r\n  }, [selectedMonths, totalSupplyPrice]);\r\n\r\n  useEffect(() => {\r\n    loadDashboard();\r\n  }, []);\r\n\r\n  async function loadDashboard() {\r\n    try {\r\n      const response = await fetch('/api/seller/advertising/dashboard');\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch dashboard');\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      setDashboard({\r\n        credits: {\r\n          total: 0,\r\n          promotional: 0,\r\n          purchased: 0,\r\n          expiresAt: null\r\n        },\r\n        subscriptions: data.subscriptions || [],\r\n        stats: data.stats || {\r\n          totalImpressions: 0,\r\n          totalClicks: 0,\r\n          ctr: 0,\r\n          averagePosition: 0\r\n        },\r\n        recentActivity: []\r\n      });\r\n\r\n      setServices(data.services || []);\r\n\r\n    } catch (error) {\r\n      console.error('대시보드 로딩 실패:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function handleStartAdvertising() {\r\n    if (!selectedService) {\r\n      alert('서비스를 선택해주세요');\r\n      return;\r\n    }\r\n\r\n    if (selectedPaymentMethod === 'card') {\r\n      alert('카드 결제 기능은 준비 중입니다. 무통장 입금을 이용해주세요.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setPurchasing(true);\r\n      const supabase = createClient();\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) return;\r\n\r\n      // Get seller ID from sellers table\r\n      const { data: seller } = await supabase\r\n        .from('sellers')\r\n        .select('id')\r\n        .eq('user_id', user.id)\r\n        .maybeSingle();\r\n\r\n      if (!seller) {\r\n        alert('판매자 정보를 찾을 수 없습니다');\r\n        return;\r\n      }\r\n\r\n      const result = await startAdvertisingSubscription(user.id, selectedService, selectedPaymentMethod, selectedMonths, totalSupplyPrice);\r\n\r\n      if (selectedPaymentMethod === 'bank_transfer' && result.payment) {\r\n        // 무통장 입금 페이지로 리다이렉트\r\n        window.location.href = `/mypage/seller/advertising/payments/${result.payment.id}`;\r\n      } else {\r\n        alert('광고가 시작되었습니다!');\r\n        loadDashboard();\r\n        setSelectedService('');\r\n        setSelectedMonths(1);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('광고 시작 실패:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2));\r\n      const errorMessage = error?.message || error?.toString() || '광고 시작에 실패했습니다';\r\n      alert(errorMessage);\r\n      // 에러 후 데이터 새로고침하여 UI 동기화\r\n      await loadDashboard();\r\n      setIsModalOpen(false);\r\n      setSelectedService('');\r\n    } finally {\r\n      setPurchasing(false);\r\n    }\r\n  }\r\n\r\n\r\n  if (loading) {\r\n    return (\r\n      <MypageLayoutWrapper mode=\"seller\">\r\n        <div className=\"flex items-center justify-center min-h-[400px]\">\r\n          <div className=\"text-center\">\r\n            <div className=\"inline-block w-12 h-12 border-4 border-brand-primary border-t-transparent rounded-full animate-spin mb-4\"></div>\r\n            <p className=\"text-gray-600\">로딩 중...</p>\r\n          </div>\r\n        </div>\r\n      </MypageLayoutWrapper>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <MypageLayoutWrapper mode=\"seller\">\r\n      <div className=\"bg-gray-50 min-h-screen\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\r\n\r\n          {/* 헤더 섹션 */}\r\n          <div className=\"text-center mb-12\">\r\n            <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">광고 관리</h1>\r\n            <p className=\"text-lg text-gray-600 max-w-2xl mx-auto\">\r\n              더 많은 고객에게 서비스를 노출하고 매출을 증대시키세요\r\n            </p>\r\n          </div>\r\n\r\n          {/* 무료 프로모션 알림 배너 */}\r\n          {services.some(s => s.adDetails?.isFreePromotion && s.adDetails?.promotionEndDate) && (\r\n            <div className=\"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-6 shadow-sm\">\r\n              <div className=\"flex items-start gap-4\">\r\n                <div className=\"flex-shrink-0 w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center\">\r\n                  <i className=\"fas fa-gift text-white text-xl\"></i>\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <h3 className=\"text-lg font-bold text-blue-900 mb-2\">\r\n                    무료 광고 프로모션 진행 중입니다! 🎉\r\n                  </h3>\r\n                  <p className=\"text-blue-700 mb-3\">\r\n                    현재 {services.filter(s => s.adDetails?.isFreePromotion).length}개의 서비스가 무료 광고 프로모션을 이용 중입니다.\r\n                    프로모션 기간 동안 광고 비용 없이 서비스를 홍보하세요!\r\n                  </p>\r\n                  <div className=\"flex flex-wrap gap-3\">\r\n                    {services\r\n                      .filter(s => s.adDetails?.isFreePromotion && s.adDetails?.promotionEndDate)\r\n                      .map(service => {\r\n                        const endDate = new Date(service.adDetails!.promotionEndDate!);\r\n                        const today = new Date();\r\n                        const daysLeft = Math.ceil((endDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\r\n                        return (\r\n                          <div key={service.id} className=\"inline-flex items-center gap-2 bg-white px-4 py-2 rounded-lg shadow-sm border border-blue-200\">\r\n                            <i className=\"fas fa-check-circle text-green-500\"></i>\r\n                            <span className=\"font-medium text-gray-900\">{service.title}</span>\r\n                            <span className=\"text-sm text-blue-600 font-semibold\">\r\n                              ({daysLeft > 0 ? `${daysLeft}일 남음` : '종료'})\r\n                            </span>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* 통계 카드 */}\r\n          {dashboard?.subscriptions && dashboard.subscriptions.length > 0 && (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12\">\r\n              <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <span className=\"text-sm font-medium text-gray-600\">총 노출수</span>\r\n                  <div className=\"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center\">\r\n                    <i className=\"fas fa-eye text-blue-600\"></i>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-3xl font-bold text-gray-900\">\r\n                  {dashboard.stats.totalImpressions.toLocaleString()}\r\n                </div>\r\n                <p className=\"text-xs text-gray-500 mt-1\">이번 달 기준</p>\r\n              </div>\r\n\r\n              <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <span className=\"text-sm font-medium text-gray-600\">총 클릭수</span>\r\n                  <div className=\"w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center\">\r\n                    <i className=\"fas fa-mouse-pointer text-green-600\"></i>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-3xl font-bold text-gray-900\">\r\n                  {dashboard.stats.totalClicks.toLocaleString()}\r\n                </div>\r\n                <p className=\"text-xs text-gray-500 mt-1\">이번 달 기준</p>\r\n              </div>\r\n\r\n              <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <span className=\"text-sm font-medium text-gray-600\">클릭률</span>\r\n                  <div className=\"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center\">\r\n                    <i className=\"fas fa-chart-line text-purple-600\"></i>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-3xl font-bold text-gray-900\">\r\n                  {dashboard.stats.ctr.toFixed(2)}%\r\n                </div>\r\n                <p className=\"text-xs text-gray-500 mt-1\">CTR (Click Through Rate)</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* 활성 광고 섹션 */}\r\n          {dashboard?.subscriptions && dashboard.subscriptions.length > 0 && (\r\n            <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 p-8 mb-8\">\r\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center\">\r\n                  <i className=\"fas fa-bullhorn text-green-600\"></i>\r\n                </div>\r\n                활성 광고\r\n              </h2>\r\n              <div className=\"space-y-4\">\r\n                {dashboard.subscriptions.map(sub => (\r\n                  <div key={sub.id} className=\"border border-gray-200 rounded-xl p-6 hover:shadow-md transition-shadow\">\r\n                    <div className=\"flex justify-between items-start mb-4\">\r\n                      <div>\r\n                        <h3 className=\"text-lg font-bold text-gray-900\">{sub.serviceName}</h3>\r\n                        <span className=\"inline-flex items-center px-3 py-1 mt-2 rounded-full text-xs font-medium bg-green-100 text-green-800\">\r\n                          <span className=\"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse\"></span>\r\n                          광고 진행중\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\r\n                      <div>\r\n                        <div className=\"text-gray-500 mb-1\">월 결제액</div>\r\n                        <div className=\"font-bold text-gray-900\">{sub.monthlyPrice.toLocaleString()}원</div>\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"text-gray-500 mb-1\">다음 결제일</div>\r\n                        <div className=\"font-bold text-gray-900\">\r\n                          {new Date(sub.nextBillingDate).toLocaleDateString('ko-KR')}\r\n                        </div>\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"text-gray-500 mb-1\">노출수</div>\r\n                        <div className=\"font-bold text-blue-600\">{sub.totalImpressions.toLocaleString()}회</div>\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"text-gray-500 mb-1\">클릭수</div>\r\n                        <div className=\"font-bold text-green-600\">\r\n                          {sub.totalClicks.toLocaleString()}회 ({sub.ctr.toFixed(2)}%)\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* 서비스 광고 관리 테이블 */}\r\n          {services.length > 0 && (\r\n            <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 p-8\">\r\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center\">\r\n                  <i className=\"fas fa-list text-blue-600\"></i>\r\n                </div>\r\n                서비스 광고 관리\r\n              </h2>\r\n\r\n              {/* 테이블 */}\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full\">\r\n                  <thead>\r\n                    <tr className=\"border-b-2 border-gray-200\">\r\n                      <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">서비스</th>\r\n                      <th className=\"text-center py-3 px-4 font-semibold text-gray-700\">상태</th>\r\n                      <th className=\"text-center py-3 px-4 font-semibold text-gray-700\">노출 수</th>\r\n                      <th className=\"text-center py-3 px-4 font-semibold text-gray-700\">클릭 수</th>\r\n                      <th className=\"text-center py-3 px-4 font-semibold text-gray-700\">평균 클릭률</th>\r\n                      <th className=\"text-center py-3 px-4 font-semibold text-gray-700\">신청 정보</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {services.map(service => (\r\n                      <tr key={service.id} className=\"border-b border-gray-100 hover:bg-gray-50 transition-colors\">\r\n                        {/* 서비스 썸네일 + 제목 (툴팁) */}\r\n                        <td className=\"py-3 px-4\">\r\n                          <div className=\"group relative\">\r\n                            <img\r\n                              src={service.thumbnailUrl || '/placeholder-service.png'}\r\n                              alt={service.title}\r\n                              className=\"w-16 h-16 object-cover rounded-lg cursor-pointer\"\r\n                            />\r\n                            {/* 툴팁 */}\r\n                            <div className=\"absolute left-0 top-full mt-2 hidden group-hover:block z-10 bg-gray-900 text-white text-sm py-1 px-3 rounded shadow-lg whitespace-nowrap\">\r\n                              {service.title}\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n\r\n                        {/* 상태 */}\r\n                        <td className=\"py-3 px-4 text-center\">\r\n                          <div className=\"flex flex-col items-center gap-1\">\r\n                            {service.hasActiveAd ? (\r\n                              service.adDetails?.status === 'pending_payment' ? (\r\n                                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800\">\r\n                                  <span className=\"w-2 h-2 bg-yellow-500 rounded-full mr-2 animate-pulse\"></span>\r\n                                  결제 대기중\r\n                                </span>\r\n                              ) : (\r\n                                <>\r\n                                  <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\r\n                                    <span className=\"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse\"></span>\r\n                                    광고 진행중\r\n                                  </span>\r\n                                  {service.adDetails?.isFreePromotion && service.adDetails?.promotionEndDate && (\r\n                                    <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mt-1\">\r\n                                      <i className=\"fas fa-gift mr-1 text-xs\"></i>\r\n                                      무료 프로모션 ({(() => {\r\n                                        const endDate = new Date(service.adDetails.promotionEndDate);\r\n                                        const today = new Date();\r\n                                        const daysLeft = Math.ceil((endDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\r\n                                        return daysLeft > 0 ? `${daysLeft}일 남음` : '종료';\r\n                                      })()})\r\n                                    </span>\r\n                                  )}\r\n                                </>\r\n                              )\r\n                            ) : (\r\n                              <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600\">\r\n                                미진행\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                        </td>\r\n\r\n                        {/* 노출 수 */}\r\n                        <td className=\"py-3 px-4 text-center font-semibold text-blue-600\">\r\n                          {service.adDetails?.totalImpressions.toLocaleString() || '-'}\r\n                        </td>\r\n\r\n                        {/* 클릭 수 */}\r\n                        <td className=\"py-3 px-4 text-center font-semibold text-green-600\">\r\n                          {service.adDetails?.totalClicks.toLocaleString() || '-'}\r\n                        </td>\r\n\r\n                        {/* 평균 클릭률 */}\r\n                        <td className=\"py-3 px-4 text-center font-semibold text-purple-600\">\r\n                          {service.adDetails ? `${service.adDetails.ctr.toFixed(2)}%` : '-'}\r\n                        </td>\r\n\r\n                        {/* 신청 정보 */}\r\n                        <td className=\"py-3 px-4 text-center\">\r\n                          {service.hasActiveAd ? (\r\n                            service.adDetails?.status === 'pending_payment' ? (\r\n                              <button\r\n                                onClick={() => {\r\n                                  console.log('입금 확인 클릭:', service.id);\r\n                                  setSelectedService(service.id);\r\n                                  setIsModalOpen(true);\r\n                                }}\r\n                                className=\"px-4 py-2 bg-yellow-600 text-white text-sm rounded-lg hover:bg-yellow-700 transition-colors\"\r\n                              >\r\n                                입금 확인\r\n                              </button>\r\n                            ) : (\r\n                              <button\r\n                                onClick={() => {\r\n                                  console.log('상세보기 클릭:', service.id);\r\n                                  setSelectedService(service.id);\r\n                                  setIsModalOpen(true);\r\n                                }}\r\n                                className=\"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors\"\r\n                              >\r\n                                상세보기\r\n                              </button>\r\n                            )\r\n                          ) : (\r\n                            <button\r\n                              onClick={() => {\r\n                                window.location.href = '/mypage/seller/advertising/bank-transfer';\r\n                              }}\r\n                              className=\"px-4 py-2 bg-brand-primary text-white text-sm rounded-lg hover:bg-blue-700 transition-colors\"\r\n                            >\r\n                              광고 신청\r\n                            </button>\r\n                          )}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* 모달 팝업 */}\r\n          {isModalOpen && selectedService && (\r\n            <div\r\n              className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\r\n              onClick={() => {\r\n                setIsModalOpen(false);\r\n                setSelectedService('');\r\n              }}\r\n            >\r\n              <div\r\n                className=\"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\"\r\n                onClick={(e) => e.stopPropagation()}\r\n              >\r\n                {/* 모달 헤더 */}\r\n                <div className=\"sticky top-0 bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center rounded-t-2xl\">\r\n                  <h2 className=\"text-2xl font-bold text-gray-900\">\r\n                    {services.find(s => s.id === selectedService)?.hasActiveAd ? '광고 상세 정보' : '광고 신청'}\r\n                  </h2>\r\n                  <button\r\n                    onClick={() => {\r\n                      setIsModalOpen(false);\r\n                      setSelectedService('');\r\n                    }}\r\n                    className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n                  >\r\n                    <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                    </svg>\r\n                  </button>\r\n                </div>\r\n\r\n                {/* 모달 내용 */}\r\n                <div className=\"p-8\">\r\n                  {(() => {\r\n                    const service = services.find(s => s.id === selectedService);\r\n                    if (!service) return null;\r\n\r\n                    // 광고 진행 중인 경우\r\n                    if (service.hasActiveAd && service.adDetails) {\r\n                      return (\r\n                        <div>\r\n                          <h3 className=\"text-xl font-bold text-gray-900 mb-4\">{service.title}</h3>\r\n                          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                            <div className=\"bg-white p-4 rounded-lg\">\r\n                              <div className=\"text-sm text-gray-600 mb-1\">월 결제액</div>\r\n                              <div className=\"text-2xl font-bold text-gray-900\">{service.adDetails.monthlyPrice.toLocaleString()}원</div>\r\n                            </div>\r\n                            <div className=\"bg-white p-4 rounded-lg\">\r\n                              <div className=\"text-sm text-gray-600 mb-1\">다음 결제일</div>\r\n                              <div className=\"text-lg font-bold text-gray-900\">\r\n                                {new Date(service.adDetails.nextBillingDate).toLocaleDateString('ko-KR')}\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"bg-white p-4 rounded-lg\">\r\n                              <div className=\"text-sm text-gray-600 mb-1\">광고 시작일</div>\r\n                              <div className=\"text-lg font-bold text-gray-900\">\r\n                                {new Date(service.adDetails.createdAt).toLocaleDateString('ko-KR')}\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"bg-white p-4 rounded-lg\">\r\n                              <div className=\"text-sm text-gray-600 mb-1\">총 노출 수</div>\r\n                              <div className=\"text-2xl font-bold text-blue-600\">{service.adDetails.totalImpressions.toLocaleString()}회</div>\r\n                            </div>\r\n                            <div className=\"bg-white p-4 rounded-lg\">\r\n                              <div className=\"text-sm text-gray-600 mb-1\">총 클릭 수</div>\r\n                              <div className=\"text-2xl font-bold text-green-600\">{service.adDetails.totalClicks.toLocaleString()}회</div>\r\n                            </div>\r\n                            <div className=\"bg-white p-4 rounded-lg\">\r\n                              <div className=\"text-sm text-gray-600 mb-1\">클릭률 (CTR)</div>\r\n                              <div className=\"text-2xl font-bold text-purple-600\">{service.adDetails.ctr.toFixed(2)}%</div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    }\r\n\r\n                    // 광고 신청 폼\r\n                    return (\r\n                      <div>\r\n                        <h3 className=\"text-xl font-bold text-gray-900 mb-4\">{service.title}</h3>\r\n\r\n                        <div className=\"space-y-6\">\r\n                          {/* 계약 기간 선택 */}\r\n                          <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                              <span className=\"inline-flex items-center justify-center w-6 h-6 rounded-full bg-brand-primary text-white text-xs font-bold mr-2\">1</span>\r\n                              계약 기간을 선택하세요\r\n                            </label>\r\n                    <select\r\n                      value={selectedMonths}\r\n                      onChange={(e) => setSelectedMonths(Number(e.target.value))}\r\n                      className=\"w-full border border-gray-300 rounded-lg px-4 py-3 text-gray-900 focus:ring-2 focus:ring-brand-primary focus:border-transparent transition-all mb-4\"\r\n                    >\r\n                      {[1, 3, 6, 12].map(months => {\r\n                        const price = calculateMonthlyPrice(months);\r\n                        const supplyTotal = price * months;\r\n                        const taxTotal = Math.round(supplyTotal * 0.1);\r\n                        const total = supplyTotal + taxTotal;\r\n                        const discount = months === 1 ? 0 : Math.round(((200000 * months - supplyTotal) / (200000 * months)) * 100);\r\n                        return (\r\n                          <option key={months} value={months}>\r\n                            {months}개월 - 월 {price.toLocaleString()}원 (총 {total.toLocaleString()}원, VAT포함)\r\n                            {discount > 0 && ` - ${discount}% 할인`}\r\n                          </option>\r\n                        );\r\n                      })}\r\n                    </select>\r\n\r\n                    <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6\">\r\n                      <div className=\"flex items-center justify-between mb-4\">\r\n                        <div>\r\n                          <h3 className=\"text-lg font-bold text-gray-900 mb-1\">광고 플랜</h3>\r\n                          <p className=\"text-sm text-gray-600\">카테고리 1페이지 완전 랜덤 노출</p>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          <div className=\"text-3xl font-bold text-brand-primary\">{monthlySupplyPrice.toLocaleString()}원</div>\r\n                          <div className=\"text-sm text-gray-600\">/ 월 (VAT 별도)</div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* VAT 정보 */}\r\n                      <div className=\"mb-4 p-3 bg-white border border-gray-200 rounded-lg\">\r\n                        <div className=\"text-sm space-y-1\">\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600\">공급가액 ({selectedMonths}개월)</span>\r\n                            <span className=\"font-bold text-gray-900\">{totalSupplyPrice.toLocaleString()}원</span>\r\n                          </div>\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600\">부가세 (10%)</span>\r\n                            <span className=\"font-bold text-gray-900\">{totalTaxAmount.toLocaleString()}원</span>\r\n                          </div>\r\n                          <div className=\"flex justify-between pt-2 border-t border-gray-200\">\r\n                            <span className=\"font-bold text-gray-900\">총 결제금액</span>\r\n                            <span className=\"font-bold text-brand-primary text-lg\">{totalPrice.toLocaleString()}원</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {discountRate > 0 && (\r\n                        <div className=\"mb-4 p-3 bg-green-100 border border-green-300 rounded-lg\">\r\n                          <div className=\"flex items-center gap-2 text-green-800\">\r\n                            <i className=\"fas fa-tag\"></i>\r\n                            <span className=\"font-bold\">{discountRate}% 할인 적용!</span>\r\n                          </div>\r\n                          <div className=\"text-sm text-green-700 mt-1\">\r\n                            {selectedMonths}개월 계약 시 공급가액 {totalSupplyPrice.toLocaleString()}원\r\n                            <span className=\"ml-2 line-through text-green-600\">{(200000 * selectedMonths).toLocaleString()}원</span>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <i className=\"fas fa-check-circle text-green-600\"></i>\r\n                          <span>무제한 노출</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <i className=\"fas fa-check-circle text-green-600\"></i>\r\n                          <span>무제한 클릭</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <i className=\"fas fa-check-circle text-green-600\"></i>\r\n                          <span>실시간 통계</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <i className=\"fas fa-check-circle text-green-600\"></i>\r\n                          <span>공정한 랜덤 노출</span>\r\n                        </div>\r\n                      </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* 결제 방식 선택 */}\r\n                          <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                              <span className=\"inline-flex items-center justify-center w-6 h-6 rounded-full bg-brand-primary text-white text-xs font-bold mr-2\">2</span>\r\n                              결제 방식을 선택하세요\r\n                            </label>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                      {/* 카드 (준비중) */}\r\n                      <div className=\"relative border-2 border-gray-200 rounded-lg p-4 opacity-50 cursor-not-allowed\">\r\n                        <div className=\"flex items-start gap-3\">\r\n                          <input\r\n                            type=\"radio\"\r\n                            name=\"paymentMethod\"\r\n                            value=\"card\"\r\n                            disabled\r\n                            className=\"mt-1\"\r\n                          />\r\n                          <div className=\"flex-1\">\r\n                            <div className=\"font-bold text-gray-900 mb-1\">카드 결제</div>\r\n                            <div className=\"text-sm text-gray-600\">즉시 광고 시작</div>\r\n                            <div className=\"text-xs text-orange-600 font-medium mt-1\">준비 중</div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* 무통장 입금 */}\r\n                      <div\r\n                        onClick={() => setSelectedPaymentMethod('bank_transfer')}\r\n                        className={`border-2 rounded-lg p-4 cursor-pointer transition-all ${\r\n                          selectedPaymentMethod === 'bank_transfer'\r\n                            ? 'border-brand-primary bg-blue-50'\r\n                            : 'border-gray-200 hover:border-gray-300'\r\n                        }`}\r\n                      >\r\n                        <div className=\"flex items-start gap-3\">\r\n                          <input\r\n                            type=\"radio\"\r\n                            name=\"paymentMethod\"\r\n                            value=\"bank_transfer\"\r\n                            checked={selectedPaymentMethod === 'bank_transfer'}\r\n                            onChange={() => setSelectedPaymentMethod('bank_transfer')}\r\n                            className=\"mt-1\"\r\n                          />\r\n                          <div className=\"flex-1\">\r\n                            <div className=\"font-bold text-gray-900 mb-1\">무통장 입금</div>\r\n                            <div className=\"text-sm text-gray-600\">승인 후 광고 시작</div>\r\n                            <div className=\"text-xs text-gray-500 mt-1\">1-2일 소요</div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* 구매 버튼 */}\r\n                          <div className=\"pt-4\">\r\n                            <button\r\n                              onClick={handleStartAdvertising}\r\n                              disabled={purchasing}\r\n                              className=\"w-full bg-brand-primary text-white py-4 rounded-lg font-bold hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl disabled:shadow-none text-lg\"\r\n                            >\r\n                              {purchasing ? (\r\n                                <span className=\"flex items-center justify-center gap-2\">\r\n                                  <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                                  처리 중...\r\n                                </span>\r\n                              ) : (\r\n                                <>\r\n                                  <i className=\"fas fa-rocket mr-2\"></i>\r\n                                  광고 시작하기\r\n                                </>\r\n                              )}\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })()}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* 서비스 없음 */}\r\n          {services.length === 0 && (!dashboard?.subscriptions || dashboard.subscriptions.length === 0) && (\r\n            <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 p-12 text-center\">\r\n              <i className=\"fas fa-bullhorn text-gray-300 text-6xl mb-4\"></i>\r\n              <h3 className=\"text-xl font-bold text-gray-900 mb-2\">광고할 서비스가 없습니다</h3>\r\n              <p className=\"text-gray-600 mb-6\">먼저 서비스를 등록해주세요</p>\r\n              <a\r\n                href=\"/mypage/seller/services/new\"\r\n                className=\"inline-flex items-center px-6 py-3 bg-brand-primary text-white rounded-lg hover:bg-blue-700 transition-colors font-medium\"\r\n              >\r\n                <i className=\"fas fa-plus mr-2\"></i>\r\n                서비스 등록하기\r\n              </a>\r\n            </div>\r\n          )}\r\n\r\n        </div>\r\n      </div>\r\n    </MypageLayoutWrapper>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\advertising\\payments\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\dashboard2\\Dashboard2Client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\dashboard2\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\dashboard2\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\dashboard\\SellerDashboardClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\dashboard\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\earnings\\SellerEarningsClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\earnings\\history\\WithdrawHistoryClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\earnings\\history\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\earnings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\earnings\\withdraw\\WithdrawClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2155,2158],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2155,2158],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport MypageLayoutWrapper from '@/components/mypage/MypageLayoutWrapper'\r\n\r\ninterface WithdrawClientProps {\r\n  sellerData: {\r\n    id: string\r\n    bank_name: string | null\r\n    account_number: string | null\r\n    account_holder: string | null\r\n  }\r\n  profileData?: {\r\n    name: string\r\n    profile_image?: string | null\r\n  } | null\r\n  availableBalance: number\r\n  pendingWithdrawal: {\r\n    id: string\r\n    amount: number\r\n    created_at: string\r\n  } | null\r\n}\r\n\r\nexport default function WithdrawClient({ sellerData, profileData, availableBalance, pendingWithdrawal }: WithdrawClientProps) {\r\n  const [amount, setAmount] = useState('')\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const router = useRouter()\r\n  const supabase = createClient()\r\n\r\n  const handleWithdraw = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setError(null)\r\n\r\n    const withdrawAmount = parseInt(amount)\r\n\r\n    // Validation\r\n    if (!withdrawAmount || withdrawAmount <= 0) {\r\n      setError('출금 금액을 입력해주세요.')\r\n      return\r\n    }\r\n\r\n    if (withdrawAmount > availableBalance) {\r\n      setError('출금 가능 금액을 초과했습니다.')\r\n      return\r\n    }\r\n\r\n    if (withdrawAmount < 10000) {\r\n      setError('최소 출금 금액은 10,000원입니다.')\r\n      return\r\n    }\r\n\r\n    if (!sellerData.bank_name || !sellerData.account_number) {\r\n      setError('계좌 정보를 먼저 등록해주세요.')\r\n      return\r\n    }\r\n\r\n    setIsLoading(true)\r\n\r\n    try {\r\n      const { error: withdrawError } = await supabase\r\n        .from('withdrawal_requests')\r\n        .insert({\r\n          seller_id: sellerData.id,\r\n          amount: withdrawAmount,\r\n          bank_name: sellerData.bank_name,\r\n          account_number: sellerData.account_number,\r\n          account_holder: sellerData.account_holder,\r\n          status: 'pending'\r\n        })\r\n\r\n      if (withdrawError) throw withdrawError\r\n\r\n      alert('출금 신청이 완료되었습니다.')\r\n      router.push('/mypage/seller/earnings')\r\n      router.refresh()\r\n    } catch (error: any) {\r\n      setError(error.message || '출금 신청 중 오류가 발생했습니다.')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <MypageLayoutWrapper mode=\"seller\" profileData={profileData}>\r\n      <div className=\"py-8 px-4\">\r\n        <div className=\"max-w-2xl mx-auto\">\r\n          <h1 className=\"text-2xl font-bold mb-6\">출금 신청</h1>\r\n\r\n          {/* Pending withdrawal notice */}\r\n          {pendingWithdrawal && (\r\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6\">\r\n              <p className=\"text-yellow-800 font-medium\">대기 중인 출금 신청이 있습니다.</p>\r\n              <p className=\"text-yellow-700 text-sm mt-1\">\r\n                금액: {pendingWithdrawal.amount.toLocaleString()}원\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n            <h2 className=\"text-lg font-semibold mb-4\">출금 가능 금액</h2>\r\n            <p className=\"text-3xl font-bold text-primary-600\">\r\n              {availableBalance.toLocaleString()}원\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n            <h2 className=\"text-lg font-semibold mb-4\">계좌 정보</h2>\r\n            {sellerData.bank_name && sellerData.account_number ? (\r\n              <div className=\"space-y-2\">\r\n                <p className=\"text-gray-600\">은행: {sellerData.bank_name}</p>\r\n                <p className=\"text-gray-600\">계좌번호: {sellerData.account_number}</p>\r\n                <p className=\"text-gray-600\">예금주: {sellerData.account_holder}</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"text-red-600\">\r\n                계좌 정보가 등록되지 않았습니다. 프로필 설정에서 등록해주세요.\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <form onSubmit={handleWithdraw} className=\"bg-white rounded-lg shadow p-6\">\r\n            <h2 className=\"text-lg font-semibold mb-4\">출금 신청</h2>\r\n\r\n            {error && (\r\n              <div className=\"bg-red-50 text-red-600 p-3 rounded-lg text-sm mb-4\">\r\n                {error}\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"mb-4\">\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                출금 금액\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                value={amount}\r\n                onChange={(e) => setAmount(e.target.value)}\r\n                className=\"input\"\r\n                placeholder=\"10,000\"\r\n                min=\"10000\"\r\n                max={availableBalance}\r\n                disabled={isLoading || !!pendingWithdrawal}\r\n              />\r\n              <p className=\"text-xs text-gray-500 mt-1\">\r\n                최소 출금 금액: 10,000원\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => router.back()}\r\n                className=\"flex-1 btn-secondary py-3\"\r\n              >\r\n                취소\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isLoading || !!pendingWithdrawal || !sellerData.bank_name}\r\n                className=\"flex-1 btn-ai py-3 disabled:opacity-50\"\r\n              >\r\n                {isLoading ? '신청 중...' : '출금 신청'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </MypageLayoutWrapper>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\earnings\\withdraw\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\orders\\SellerOrdersClient.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":114,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":114,"endColumn":20,"suggestions":[{"fix":{"range":[3280,3331],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'payload' is defined but never used. Allowed unused args must match /^_/u.","line":134,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":134,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useEffect, useRef } from 'react'\r\nimport { useSearchParams } from 'next/navigation'\r\nimport MypageLayoutWrapper from '@/components/mypage/MypageLayoutWrapper'\r\nimport OrderCard from '@/components/mypage/OrderCard'\r\nimport Link from 'next/link'\r\nimport EmptyState from '@/components/common/EmptyState'\r\nimport LoadingSpinner from '@/components/common/LoadingSpinner'\r\nimport ErrorState from '@/components/common/ErrorState'\r\nimport { logger } from '@/lib/logger'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport type { Order, Service, User } from '@/types/common'\r\n\r\ntype OrderStatus = 'all' | 'paid' | 'in_progress' | 'revision' | 'delivered' | 'completed' | 'cancelled'\r\n\r\ninterface OrderFilter {\r\n  status: OrderStatus\r\n  searchQuery: string\r\n  startDate: string\r\n  endDate: string\r\n  minPrice: string\r\n  maxPrice: string\r\n}\r\n\r\ninterface SellerOrderListItem extends Order {\r\n  order_number?: string\r\n  title?: string\r\n  delivery_date?: string | null\r\n  revision_count?: number\r\n  requirements?: string\r\n  service?: Service\r\n  buyer?: User\r\n}\r\n\r\nexport default function SellerOrdersClient({ sellerId }: { sellerId: string }) {\r\n  const searchParams = useSearchParams()\r\n  const statusFromUrl = (searchParams.get('status') as OrderStatus) || 'all'\r\n  const supabase = createClient()\r\n  const audioRef = useRef<HTMLAudioElement | null>(null)\r\n\r\n  const [orders, setOrders] = useState<SellerOrderListItem[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [statusCounts, setStatusCounts] = useState({\r\n    all: 0,\r\n    paid: 0,\r\n    in_progress: 0,\r\n    revision: 0,\r\n    delivered: 0,\r\n    completed: 0,\r\n    cancelled: 0\r\n  })\r\n\r\n  const [filters, setFilters] = useState<OrderFilter>({\r\n    status: statusFromUrl,\r\n    searchQuery: '',\r\n    startDate: '',\r\n    endDate: '',\r\n    minPrice: '',\r\n    maxPrice: ''\r\n  })\r\n\r\n  useEffect(() => {\r\n    setFilters(prev => ({ ...prev, status: statusFromUrl }))\r\n  }, [statusFromUrl])\r\n\r\n  useEffect(() => {\r\n    loadOrders()\r\n    loadStatusCounts()\r\n  }, [filters.status])\r\n\r\n  async function loadOrders() {\r\n    try {\r\n      setLoading(true)\r\n      setError(null)\r\n\r\n      const statusParam = filters.status === 'all' ? '' : `?status=${filters.status}`\r\n      const response = await fetch(`/api/orders/seller${statusParam}`)\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || '주문 목록을 불러올 수 없습니다')\r\n      }\r\n\r\n      const { orders } = await response.json()\r\n      setOrders(orders)\r\n    } catch (err: unknown) {\r\n      logger.error('주문 조회 실패:', err)\r\n      setError(err instanceof Error ? err.message : '주문 내역을 불러오는데 실패했습니다')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  async function loadStatusCounts() {\r\n    try {\r\n      const response = await fetch('/api/orders/seller/count')\r\n\r\n      if (!response.ok) {\r\n        throw new Error('카운트 조회 실패')\r\n      }\r\n\r\n      const { counts } = await response.json()\r\n      setStatusCounts(counts)\r\n    } catch (err) {\r\n      logger.error('상태별 카운트 조회 실패:', err)\r\n    }\r\n  }\r\n\r\n  const playNotificationSound = () => {\r\n    if (audioRef.current) {\r\n      audioRef.current.play().catch(err => {\r\n        console.log('Notification sound play failed:', err)\r\n      })\r\n    }\r\n  }\r\n\r\n  // Initialize audio\r\n  useEffect(() => {\r\n    audioRef.current = new Audio('/sounds/notification.mp3')\r\n    audioRef.current.volume = 0.5\r\n  }, [])\r\n\r\n  // Real-time subscription for new orders\r\n  useEffect(() => {\r\n    const channel = supabase\r\n      .channel('seller-orders')\r\n      .on('postgres_changes', {\r\n        event: 'INSERT',\r\n        schema: 'public',\r\n        table: 'orders',\r\n        filter: `seller_id=eq.${sellerId}`\r\n      }, async (payload) => {\r\n        playNotificationSound()\r\n        loadOrders()\r\n        loadStatusCounts()\r\n      })\r\n      .subscribe()\r\n\r\n    return () => {\r\n      supabase.removeChannel(channel)\r\n    }\r\n  }, [sellerId])\r\n\r\n  async function handleCompleteRevision(orderId: string) {\r\n    if (!confirm('수정을 완료하고 구매자에게 전달하시겠습니까?')) {\r\n      return\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`/api/orders/${orderId}/complete-revision`, {\r\n        method: 'PATCH'\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || '수정 완료 처리에 실패했습니다')\r\n      }\r\n\r\n      alert('수정이 완료되었습니다.')\r\n      loadOrders()\r\n      loadStatusCounts()\r\n    } catch (err: unknown) {\r\n      logger.error('수정 완료 처리 실패:', err)\r\n      alert(err instanceof Error ? err.message : '수정 완료 처리에 실패했습니다')\r\n    }\r\n  }\r\n\r\n  const filteredOrders = orders.filter(order => {\r\n    if (filters.searchQuery) {\r\n      const query = filters.searchQuery.toLowerCase()\r\n      const matchesBuyerName = order.buyer?.name?.toLowerCase().includes(query)\r\n      const matchesOrderNumber = order.order_number?.toLowerCase().includes(query)\r\n      const matchesTitle = order.title?.toLowerCase().includes(query)\r\n      if (!matchesBuyerName && !matchesOrderNumber && !matchesTitle) return false\r\n    }\r\n\r\n    if (filters.minPrice && order.total_amount < parseInt(filters.minPrice)) return false\r\n    if (filters.maxPrice && order.total_amount > parseInt(filters.maxPrice)) return false\r\n\r\n    return true\r\n  })\r\n\r\n  const tabs = [\r\n    { value: 'all', label: '전체', count: statusCounts.all },\r\n    { value: 'paid', label: '신규 주문', count: statusCounts.paid },\r\n    { value: 'in_progress', label: '진행중', count: statusCounts.in_progress },\r\n    { value: 'revision', label: '수정 요청', count: statusCounts.revision },\r\n    { value: 'delivered', label: '완료 대기', count: statusCounts.delivered },\r\n    { value: 'completed', label: '완료', count: statusCounts.completed },\r\n    { value: 'cancelled', label: '취소/환불', count: statusCounts.cancelled }\r\n  ]\r\n\r\n  const resetFilters = () => {\r\n    setFilters({\r\n      status: 'all',\r\n      searchQuery: '',\r\n      startDate: '',\r\n      endDate: '',\r\n      minPrice: '',\r\n      maxPrice: ''\r\n    })\r\n  }\r\n\r\n  const getStatusLabel = (status: string) => {\r\n    switch (status) {\r\n      case 'paid': return '결제완료'\r\n      case 'in_progress': return '진행중'\r\n      case 'revision': return '수정 요청'\r\n      case 'delivered': return '완료 대기'\r\n      case 'completed': return '완료'\r\n      case 'cancelled': return '취소/환불'\r\n      case 'refunded': return '환불완료'\r\n      default: return status\r\n    }\r\n  }\r\n\r\n  const getStatusColor = (status: string): 'red' | 'yellow' | 'green' | 'gray' => {\r\n    switch (status) {\r\n      case 'paid': return 'red'\r\n      case 'in_progress': return 'yellow'\r\n      case 'revision': return 'red'\r\n      case 'delivered': return 'green'\r\n      case 'completed': return 'gray'\r\n      default: return 'gray'\r\n    }\r\n  }\r\n\r\n  const getActionButtons = (order: SellerOrderListItem) => {\r\n    if (order.status === 'paid') {\r\n      return (\r\n        <>\r\n          <Link\r\n            href={`/mypage/seller/orders/${order.id}`}\r\n            className=\"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors text-sm font-medium\"\r\n          >\r\n            주문 확인\r\n          </Link>\r\n          <Link\r\n            href={`/chat?order=${order.id}`}\r\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium\"\r\n          >\r\n            메시지\r\n          </Link>\r\n        </>\r\n      )\r\n    }\r\n\r\n    if (order.status === 'in_progress') {\r\n      return (\r\n        <>\r\n          <Link\r\n            href={`/mypage/seller/orders/${order.id}`}\r\n            className=\"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors text-sm font-medium\"\r\n          >\r\n            상세보기\r\n          </Link>\r\n          <Link\r\n            href={`/chat?order=${order.id}`}\r\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium\"\r\n          >\r\n            메시지\r\n          </Link>\r\n        </>\r\n      )\r\n    }\r\n\r\n    if (order.status === 'revision') {\r\n      const revisionCount = order.revision_count || 0\r\n      return (\r\n        <>\r\n          <Link\r\n            href={`/mypage/seller/orders/${order.id}`}\r\n            className=\"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors text-sm font-medium flex items-center gap-2\"\r\n          >\r\n            <i className=\"fas fa-eye\"></i>\r\n            <span>수정 요청 확인</span>\r\n            {revisionCount > 0 && (\r\n              <span className=\"px-2 py-0.5 bg-red-500 text-white text-xs rounded-full\">\r\n                {revisionCount}차\r\n              </span>\r\n            )}\r\n          </Link>\r\n          <button\r\n            onClick={() => handleCompleteRevision(order.id)}\r\n            className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium\"\r\n          >\r\n            <i className=\"fas fa-check mr-2\"></i>\r\n            수정 완료\r\n          </button>\r\n          <Link\r\n            href={`/chat?order=${order.id}`}\r\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium\"\r\n          >\r\n            메시지\r\n          </Link>\r\n        </>\r\n      )\r\n    }\r\n\r\n    if (order.status === 'delivered') {\r\n      return (\r\n        <>\r\n          <Link\r\n            href={`/mypage/seller/orders/${order.id}`}\r\n            className=\"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors text-sm font-medium\"\r\n          >\r\n            상세보기\r\n          </Link>\r\n          <Link\r\n            href={`/chat?order=${order.id}`}\r\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium\"\r\n          >\r\n            메시지\r\n          </Link>\r\n        </>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <Link\r\n          href={`/mypage/seller/orders/${order.id}`}\r\n          className=\"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors text-sm font-medium\"\r\n        >\r\n          상세보기\r\n        </Link>\r\n        <Link\r\n          href={`/chat?order=${order.id}`}\r\n          className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium\"\r\n        >\r\n          메시지\r\n        </Link>\r\n      </>\r\n    )\r\n  }\r\n\r\n  const formatOrderData = (order: SellerOrderListItem) => {\r\n    return {\r\n      id: order.id,\r\n      orderNumber: order.order_number,\r\n      title: order.title || order.service?.title,\r\n      thumbnailUrl: order.service?.thumbnail_url,\r\n      buyerName: order.buyer?.name,\r\n      status: order.status,\r\n      statusLabel: getStatusLabel(order.status),\r\n      statusColor: getStatusColor(order.status),\r\n      price: order.total_amount,\r\n      orderDate: new Date(order.created_at).toLocaleString('ko-KR'),\r\n      expectedDeliveryDate: order.delivery_date ? new Date(order.delivery_date).toLocaleDateString('ko-KR') : '-',\r\n      daysLeft: order.delivery_date ? Math.ceil((new Date(order.delivery_date).getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24)) : 0,\r\n      requirements: order.requirements,\r\n      revisionCount: order.revision_count || 0\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <MypageLayoutWrapper mode=\"seller\">\r\n        <div className=\"py-8 px-4\">\r\n          <LoadingSpinner message=\"주문 내역을 불러오는 중...\" />\r\n        </div>\r\n      </MypageLayoutWrapper>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <MypageLayoutWrapper mode=\"seller\">\r\n        <div className=\"py-8 px-4\">\r\n          <ErrorState message={error} retry={loadOrders} />\r\n        </div>\r\n      </MypageLayoutWrapper>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <MypageLayoutWrapper mode=\"seller\">\r\n      <div className=\"py-8 px-4\">\r\n        {/* 페이지 헤더 */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-xl font-bold text-gray-900\">주문 관리</h1>\r\n          <p className=\"text-gray-600 mt-1 text-sm\">전체 주문 내역을 관리하세요</p>\r\n        </div>\r\n\r\n        {/* 탭 네비게이션 */}\r\n        <div className=\"bg-white rounded-lg border border-gray-200 mb-6\">\r\n          <div className=\"flex items-center overflow-x-auto\">\r\n            {tabs.map((tab) => (\r\n              <button\r\n                key={tab.value}\r\n                onClick={() => setFilters({ ...filters, status: tab.value as OrderStatus })}\r\n                className={`flex-shrink-0 px-6 py-4 font-medium text-sm border-b-2 transition-colors whitespace-nowrap ${\r\n                  filters.status === tab.value\r\n                    ? 'border-brand-primary text-brand-primary'\r\n                    : 'border-transparent text-gray-600 hover:text-gray-900'\r\n                }`}\r\n              >\r\n                {tab.label}\r\n                {tab.count > 0 && (\r\n                  <span className={`ml-2 px-2 py-0.5 rounded-full text-xs ${\r\n                    filters.status === tab.value\r\n                      ? 'bg-brand-primary text-white'\r\n                      : 'bg-gray-200 text-gray-600'\r\n                  }`}>\r\n                    {tab.count}\r\n                  </span>\r\n                )}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* 검색 및 필터 */}\r\n        <div className=\"bg-white rounded-lg border border-gray-200 p-6 mb-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n            {/* 검색 */}\r\n            <div className=\"lg:col-span-2\">\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                주문번호 / 구매자명 검색\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={filters.searchQuery}\r\n                onChange={(e) => setFilters({ ...filters, searchQuery: e.target.value })}\r\n                placeholder=\"검색어를 입력하세요\"\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n              />\r\n            </div>\r\n\r\n            {/* 기간 검색 */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">시작일</label>\r\n              <input\r\n                type=\"date\"\r\n                value={filters.startDate}\r\n                onChange={(e) => setFilters({ ...filters, startDate: e.target.value })}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">종료일</label>\r\n              <input\r\n                type=\"date\"\r\n                value={filters.endDate}\r\n                onChange={(e) => setFilters({ ...filters, endDate: e.target.value })}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n              />\r\n            </div>\r\n\r\n            {/* 가격 범위 */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">최소 금액</label>\r\n              <input\r\n                type=\"number\"\r\n                value={filters.minPrice}\r\n                onChange={(e) => setFilters({ ...filters, minPrice: e.target.value })}\r\n                placeholder=\"0\"\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">최대 금액</label>\r\n              <input\r\n                type=\"number\"\r\n                value={filters.maxPrice}\r\n                onChange={(e) => setFilters({ ...filters, maxPrice: e.target.value })}\r\n                placeholder=\"0\"\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n              />\r\n            </div>\r\n\r\n            {/* 초기화 버튼 */}\r\n            <div className=\"lg:col-span-2 flex items-end\">\r\n              <button\r\n                onClick={resetFilters}\r\n                className=\"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium\"\r\n              >\r\n                <i className=\"fas fa-redo-alt mr-2\"></i>\r\n                초기화\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* 결과 카운트 */}\r\n        <div className=\"mb-4 text-sm text-gray-600\">\r\n          총 <span className=\"font-bold text-gray-900\">{filteredOrders.length}</span>건의 주문\r\n        </div>\r\n\r\n        {/* 주문 목록 */}\r\n        <div className=\"space-y-4\">\r\n          {filteredOrders.length > 0 ? (\r\n            filteredOrders.map((order) => (\r\n              <OrderCard\r\n                key={order.id}\r\n                order={formatOrderData(order)}\r\n                mode=\"seller\"\r\n                actions={getActionButtons(order)}\r\n              />\r\n            ))\r\n          ) : (\r\n            <EmptyState\r\n              icon=\"fa-inbox\"\r\n              title=\"주문 내역이 없습니다\"\r\n              description=\"새로운 주문이 들어오면 여기에 표시됩니다\"\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* 페이지네이션 */}\r\n        {filteredOrders.length > 0 && (\r\n          <div className=\"mt-8 flex items-center justify-center gap-2\">\r\n            <button className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\">\r\n              <i className=\"fas fa-chevron-left\"></i>\r\n            </button>\r\n            <button className=\"px-4 py-2 bg-brand-primary text-white rounded-lg\">1</button>\r\n            <button className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\">2</button>\r\n            <button className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\">3</button>\r\n            <button className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\">\r\n              <i className=\"fas fa-chevron-right\"></i>\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </MypageLayoutWrapper>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\orders\\[id]\\SellerOrderDetailClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'router' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":17,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[624,627],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[624,627],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":248,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":248,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9776,9779],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9776,9779],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport MypageLayoutWrapper from '@/components/mypage/MypageLayoutWrapper'\r\nimport Link from 'next/link'\r\nimport { updateOrderStatus } from '@/lib/supabase/mutations/orders'\r\nimport { useRouter } from 'next/navigation'\r\nimport { logger } from '@/lib/logger'\r\nimport LoadingSpinner from '@/components/common/LoadingSpinner'\r\nimport ErrorState from '@/components/common/ErrorState'\r\n\r\ninterface Props {\r\n  orderId: string\r\n}\r\n\r\nexport default function SellerOrderDetailClient({ orderId }: Props) {\r\n  const router = useRouter()\r\n  const [order, setOrder] = useState<any>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [showDeliveryModal, setShowDeliveryModal] = useState(false)\r\n  const [submitting, setSubmitting] = useState(false)\r\n  const [deliveryMessage, setDeliveryMessage] = useState('')\r\n\r\n  useEffect(() => {\r\n    loadOrder()\r\n  }, [orderId])\r\n\r\n  async function loadOrder() {\r\n    try {\r\n      setLoading(true)\r\n      setError(null)\r\n\r\n      const response = await fetch(`/api/orders/${orderId}`)\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || '주문을 찾을 수 없습니다')\r\n      }\r\n\r\n      const { order } = await response.json()\r\n      setOrder(order)\r\n    } catch (err: unknown) {\r\n      logger.error('주문 조회 실패:', err)\r\n      setError(err instanceof Error ? err.message : '주문 정보를 불러오는데 실패했습니다')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  async function handleAcceptOrder() {\r\n    if (!confirm('주문을 접수하시겠습니까?\\n접수 후 작업을 시작할 수 있습니다.')) {\r\n      return\r\n    }\r\n\r\n    try {\r\n      setSubmitting(true)\r\n      await updateOrderStatus(orderId, 'in_progress')\r\n      await loadOrder() // 주문 정보 새로고침\r\n      alert('주문이 접수되었습니다. 구매자에게 작업 시작 알림이 전송되었습니다.')\r\n    } catch (err: unknown) {\r\n      logger.error('주문 접수 실패:', err)\r\n      alert('주문 접수에 실패했습니다: ' + (err instanceof Error ? err.message : '알 수 없는 오류'))\r\n    } finally {\r\n      setSubmitting(false)\r\n    }\r\n  }\r\n\r\n  async function handleDelivery() {\r\n    if (!deliveryMessage.trim()) {\r\n      alert('전달 메시지를 입력해주세요')\r\n      return\r\n    }\r\n\r\n    try {\r\n      setSubmitting(true)\r\n      await updateOrderStatus(orderId, 'delivered')\r\n      setShowDeliveryModal(false)\r\n      await loadOrder() // 주문 정보 새로고침\r\n      alert('납품이 완료되었습니다')\r\n    } catch (err: unknown) {\r\n      logger.error('납품 실패:', err)\r\n      alert('납품에 실패했습니다: ' + (err instanceof Error ? err.message : '알 수 없는 오류'))\r\n    } finally {\r\n      setSubmitting(false)\r\n    }\r\n  }\r\n\r\n  const getStatusLabel = (status: string) => {\r\n    switch (status) {\r\n      case 'paid': return '결제완료'\r\n      case 'in_progress': return '진행중'\r\n      case 'delivered': return '완료 대기'\r\n      case 'completed': return '완료'\r\n      case 'cancelled': return '취소/환불'\r\n      default: return status\r\n    }\r\n  }\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'paid': return 'bg-red-100 text-red-700'\r\n      case 'in_progress': return 'bg-yellow-100 text-yellow-700'\r\n      case 'delivered': return 'bg-blue-100 text-blue-700'\r\n      case 'completed': return 'bg-green-100 text-green-700'\r\n      case 'cancelled': return 'bg-gray-100 text-gray-700'\r\n      default: return 'bg-gray-100 text-gray-700'\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <MypageLayoutWrapper mode=\"seller\">\r\n        <div className=\"py-8 px-4\">\r\n          <LoadingSpinner message=\"주문 정보를 불러오는 중...\" />\r\n        </div>\r\n      </MypageLayoutWrapper>\r\n    )\r\n  }\r\n\r\n  if (error || !order) {\r\n    return (\r\n      <MypageLayoutWrapper mode=\"seller\">\r\n        <div className=\"py-8 px-4\">\r\n          <ErrorState message={error || '주문을 찾을 수 없습니다'} retry={loadOrder} />\r\n        </div>\r\n      </MypageLayoutWrapper>\r\n    )\r\n  }\r\n\r\n  const statusHistory = [\r\n    { status: '주문 접수', date: new Date(order.created_at).toLocaleString('ko-KR'), actor: '시스템' },\r\n    ...(order.paid_at ? [{ status: '결제 완료', date: new Date(order.paid_at).toLocaleString('ko-KR'), actor: '구매자' }] : []),\r\n    ...(order.started_at ? [{ status: '작업 시작', date: new Date(order.started_at).toLocaleString('ko-KR'), actor: '판매자' }] : []),\r\n    ...(order.delivered_at ? [{ status: '납품 완료', date: new Date(order.delivered_at).toLocaleString('ko-KR'), actor: '판매자' }] : []),\r\n    ...(order.completed_at ? [{ status: '구매 확정', date: new Date(order.completed_at).toLocaleString('ko-KR'), actor: '구매자' }] : [])\r\n  ]\r\n\r\n  return (\r\n    <MypageLayoutWrapper mode=\"seller\">\r\n      <div className=\"py-8 px-4\">\r\n        {/* 상단 네비게이션 */}\r\n        <div className=\"mb-6\">\r\n          <Link\r\n            href=\"/mypage/seller/orders\"\r\n            className=\"text-gray-600 hover:text-gray-900 flex items-center gap-2\"\r\n          >\r\n            <i className=\"fas fa-arrow-left\"></i>\r\n            <span>주문 목록으로</span>\r\n          </Link>\r\n        </div>\r\n\r\n        {/* 페이지 헤더 */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex items-start justify-between\">\r\n            <div>\r\n              <h1 className=\"text-xl font-bold text-gray-900\">주문 상세</h1>\r\n              <p className=\"text-gray-600 mt-1 text-sm\">주문 번호: #{order.order_number || order.id.slice(0, 8)}</p>\r\n            </div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <Link\r\n                href={`/chat?order=${orderId}`}\r\n                className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium\"\r\n              >\r\n                <i className=\"fas fa-comment mr-2\"></i>\r\n                메시지\r\n              </Link>\r\n              {order.status === 'in_progress' && (\r\n                <button\r\n                  onClick={() => setShowDeliveryModal(true)}\r\n                  className=\"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors font-medium\"\r\n                >\r\n                  <i className=\"fas fa-upload mr-2\"></i>\r\n                  납품하기\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n          {/* 왼쪽: 주요 정보 */}\r\n          <div className=\"lg:col-span-2 space-y-6\">\r\n            {/* 주문 정보 */}\r\n            <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">주문 정보</h2>\r\n\r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-start gap-4\">\r\n                  <div className=\"w-32 h-32 bg-gray-100 rounded-lg flex-shrink-0 flex items-center justify-center\">\r\n                    {order.service?.thumbnail_url ? (\r\n                      <img src={order.service.thumbnail_url} alt={order.title || order.service?.title} className=\"w-full h-full object-cover rounded-lg\" />\r\n                    ) : (\r\n                      <i className=\"fas fa-image text-gray-400 text-3xl\"></i>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <h3 className=\"text-lg font-bold text-gray-900 mb-2\">{order.title || order.service?.title}</h3>\r\n                    <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                      <div>\r\n                        <span className=\"text-gray-600\">패키지:</span>\r\n                        <span className=\"ml-2 font-medium\">{order.package || 'standard'}</span>\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"text-gray-600\">수정 횟수:</span>\r\n                        <span className=\"ml-2 font-medium\">{order.revision_count || 0}회</span>\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"text-gray-600\">예상 완료일:</span>\r\n                        <span className=\"ml-2 font-medium\">{order.delivery_date ? new Date(order.delivery_date).toLocaleDateString('ko-KR') : '-'}</span>\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"text-gray-600\">남은 기간:</span>\r\n                        <span className=\"ml-2 font-medium text-red-600\">\r\n                          {order.delivery_date ? `D-${Math.ceil((new Date(order.delivery_date).getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24))}일` : '-'}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* 요구사항 */}\r\n            <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">구매자 요구사항</h2>\r\n              <div className=\"bg-gray-50 rounded-lg p-4 mb-4\">\r\n                <p className=\"text-gray-700 whitespace-pre-wrap\">{order.requirements || '요구사항이 없습니다'}</p>\r\n              </div>\r\n              {order.buyer_note && (\r\n                <div className=\"bg-blue-50 rounded-lg p-4\">\r\n                  <div className=\"flex items-start gap-2\">\r\n                    <i className=\"fas fa-info-circle text-blue-600 mt-1\"></i>\r\n                    <div>\r\n                      <div className=\"font-medium text-blue-900 mb-1\">추가 메모</div>\r\n                      <p className=\"text-blue-700\">{order.buyer_note}</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* 납품 파일 */}\r\n            <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">납품 파일</h2>\r\n              {order.deliverables && order.deliverables.length > 0 ? (\r\n                <div className=\"space-y-3\">\r\n                  {order.deliverables.map((file: any) => (\r\n                    <div\r\n                      key={file.id}\r\n                      className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"\r\n                    >\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <i className=\"fas fa-file-alt text-blue-500 text-2xl\"></i>\r\n                        <div>\r\n                          <div className=\"font-medium text-gray-900\">{file.file_name}</div>\r\n                          <div className=\"text-sm text-gray-600\">\r\n                            {(file.file_size / 1024 / 1024).toFixed(2)}MB • {new Date(file.created_at).toLocaleString('ko-KR')}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <a\r\n                        href={file.file_url}\r\n                        download\r\n                        className=\"px-4 py-2 text-brand-primary hover:bg-blue-50 rounded-lg transition-colors\"\r\n                      >\r\n                        <i className=\"fas fa-download mr-2\"></i>\r\n                        다운로드\r\n                      </a>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-8 text-gray-500\">\r\n                  아직 납품한 파일이 없습니다\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* 상태 이력 */}\r\n            <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">상태 이력</h2>\r\n              <div className=\"space-y-3\">\r\n                {statusHistory.map((history, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className=\"flex items-start gap-3 pb-3 border-b border-gray-200 last:border-0\"\r\n                  >\r\n                    <div className=\"w-8 h-8 bg-brand-primary rounded-full flex items-center justify-center flex-shrink-0\">\r\n                      <i className=\"fas fa-check text-white text-sm\"></i>\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"font-medium text-gray-900\">{history.status}</div>\r\n                      <div className=\"text-sm text-gray-600\">{history.date} • {history.actor}</div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* 오른쪽: 사이드바 */}\r\n          <div className=\"space-y-6\">\r\n            {/* 현재 상태 */}\r\n            <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n              <h3 className=\"font-bold text-gray-900 mb-4\">현재 상태</h3>\r\n              <div className=\"flex items-center justify-center py-4\">\r\n                <span className={`px-6 py-3 rounded-lg font-bold text-lg ${getStatusColor(order.status)}`}>\r\n                  {getStatusLabel(order.status)}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* 구매자 정보 */}\r\n            <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n              <h3 className=\"font-bold text-gray-900 mb-4\">구매자 정보</h3>\r\n              <div className=\"flex items-center gap-3 mb-4\">\r\n                <div className=\"w-12 h-12 bg-brand-primary rounded-full flex items-center justify-center text-white font-bold\">\r\n                  {(order.buyer?.name || '구매자')[0]}\r\n                </div>\r\n                <div>\r\n                  <div className=\"font-medium text-gray-900\">{order.buyer?.name || '구매자'}</div>\r\n                  <div className=\"text-sm text-gray-600\">구매자</div>\r\n                </div>\r\n              </div>\r\n              <Link\r\n                href={`/chat?order=${orderId}`}\r\n                className=\"w-full px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors font-medium text-center block\"\r\n              >\r\n                <i className=\"fas fa-comment mr-2\"></i>\r\n                메시지 보내기\r\n              </Link>\r\n            </div>\r\n\r\n            {/* 결제 정보 */}\r\n            <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n              <h3 className=\"font-bold text-gray-900 mb-4\">결제 정보</h3>\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-gray-600\">주문 금액</span>\r\n                  <span className=\"font-medium\">{order.total_amount?.toLocaleString() || '0'}원</span>\r\n                </div>\r\n                <div className=\"flex items-center justify-between pt-3 border-t border-gray-200\">\r\n                  <span className=\"font-bold text-gray-900\">최종 금액</span>\r\n                  <span className=\"font-bold text-brand-primary text-lg\">{order.total_amount?.toLocaleString() || '0'}원</span>\r\n                </div>\r\n                <div className=\"pt-3 border-t border-gray-200 text-sm text-gray-600\">\r\n                  <div>주문일: {new Date(order.created_at).toLocaleString('ko-KR')}</div>\r\n                  {order.paid_at && <div>결제일: {new Date(order.paid_at).toLocaleString('ko-KR')}</div>}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* 빠른 액션 */}\r\n            <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n              <h3 className=\"font-bold text-gray-900 mb-4\">빠른 액션</h3>\r\n              <div className=\"space-y-2\">\r\n                {/* 결제 완료 상태일 때: 접수 버튼 표시 */}\r\n                {order.status === 'paid' && (\r\n                  <button\r\n                    onClick={handleAcceptOrder}\r\n                    disabled={submitting}\r\n                    className=\"w-full px-4 py-3 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  >\r\n                    {submitting ? (\r\n                      <>\r\n                        <i className=\"fas fa-spinner fa-spin mr-2\"></i>\r\n                        처리 중...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <i className=\"fas fa-check-circle mr-2\"></i>\r\n                        주문 접수하기\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                )}\r\n\r\n                {/* 진행 중 상태일 때: 납품 버튼 표시 */}\r\n                {order.status === 'in_progress' && (\r\n                  <button\r\n                    onClick={() => setShowDeliveryModal(true)}\r\n                    className=\"w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-bold text-lg\"\r\n                  >\r\n                    <i className=\"fas fa-upload mr-2\"></i>\r\n                    납품하기\r\n                  </button>\r\n                )}\r\n\r\n                <button className=\"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium\">\r\n                  <i className=\"fas fa-ban mr-2\"></i>\r\n                  취소 요청\r\n                </button>\r\n                <button className=\"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium\">\r\n                  <i className=\"fas fa-headset mr-2\"></i>\r\n                  고객센터 문의\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* 납품 모달 */}\r\n        {showDeliveryModal && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-lg max-w-2xl w-full p-6\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <h2 className=\"text-2xl font-bold text-gray-900\">납품하기</h2>\r\n                <button\r\n                  onClick={() => setShowDeliveryModal(false)}\r\n                  className=\"text-gray-400 hover:text-gray-600\"\r\n                >\r\n                  <i className=\"fas fa-times text-2xl\"></i>\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    파일 업로드\r\n                  </label>\r\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-brand-primary transition-colors cursor-pointer\">\r\n                    <i className=\"fas fa-cloud-upload-alt text-gray-400 text-4xl mb-3\"></i>\r\n                    <p className=\"text-gray-600\">클릭하여 파일 선택 또는 드래그 앤 드롭</p>\r\n                    <p className=\"text-sm text-gray-500 mt-2\">최대 100MB</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    전달 메시지\r\n                  </label>\r\n                  <textarea\r\n                    rows={4}\r\n                    value={deliveryMessage}\r\n                    onChange={(e) => setDeliveryMessage(e.target.value)}\r\n                    placeholder=\"구매자에게 전달할 메시지를 입력하세요\"\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                  ></textarea>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 pt-4\">\r\n                  <button\r\n                    onClick={() => setShowDeliveryModal(false)}\r\n                    disabled={submitting}\r\n                    className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50\"\r\n                  >\r\n                    취소\r\n                  </button>\r\n                  <button\r\n                    onClick={handleDelivery}\r\n                    disabled={submitting}\r\n                    className=\"flex-1 px-6 py-3 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors font-medium disabled:opacity-50\"\r\n                  >\r\n                    {submitting ? '처리중...' : '납품 완료'}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </MypageLayoutWrapper>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\orders\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\orders\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\portfolio\\SellerPortfolioClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\portfolio\\[id]\\PortfolioDetailClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sellerId' is defined but never used. Allowed unused args must match /^_/u.","line":30,"column":60,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":68}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport MypageLayoutWrapper from '@/components/mypage/MypageLayoutWrapper'\r\nimport Link from 'next/link'\r\nimport { logger } from '@/lib/logger'\r\n\r\ninterface Portfolio {\r\n  id: string\r\n  seller_id: string\r\n  title: string\r\n  description: string\r\n  category_id: string | null\r\n  thumbnail_url: string | null\r\n  image_urls: string[]\r\n  project_url: string | null\r\n  youtube_url: string | null\r\n  tags: string[]\r\n  view_count: number\r\n  created_at: string\r\n  updated_at: string\r\n}\r\n\r\ninterface Props {\r\n  portfolio: Portfolio\r\n  sellerId: string\r\n}\r\n\r\nexport default function PortfolioDetailClient({ portfolio, sellerId }: Props) {\r\n  const router = useRouter()\r\n  const [deleting, setDeleting] = useState(false)\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0)\r\n\r\n  // 썸네일 + 추가 이미지 배열\r\n  const allImages = [\r\n    portfolio.thumbnail_url,\r\n    ...(portfolio.image_urls || [])\r\n  ].filter(Boolean) as string[]\r\n\r\n  // YouTube 비디오 ID 추출\r\n  const getYoutubeVideoId = (url: string | null): string | null => {\r\n    if (!url) return null\r\n    const patterns = [\r\n      /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([^&\\n?#]+)/,\r\n      /youtube\\.com\\/embed\\/([^&\\n?#]+)/,\r\n      /youtube\\.com\\/v\\/([^&\\n?#]+)/\r\n    ]\r\n    for (const pattern of patterns) {\r\n      const match = url.match(pattern)\r\n      if (match) return match[1]\r\n    }\r\n    return null\r\n  }\r\n\r\n  const youtubeVideoId = getYoutubeVideoId(portfolio.youtube_url)\r\n\r\n  const handleDelete = async () => {\r\n    if (!confirm('정말 삭제하시겠습니까?')) return\r\n\r\n    try {\r\n      setDeleting(true)\r\n\r\n      const response = await fetch(`/api/seller/portfolio/${portfolio.id}`, {\r\n        method: 'DELETE'\r\n      })\r\n\r\n      if (!response.ok) {\r\n        throw new Error('삭제 실패')\r\n      }\r\n\r\n      alert('포트폴리오가 삭제되었습니다')\r\n      router.push('/mypage/seller/portfolio')\r\n      router.refresh()\r\n    } catch (error) {\r\n      logger.error('Portfolio delete error:', error)\r\n      alert('삭제에 실패했습니다')\r\n    } finally {\r\n      setDeleting(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <MypageLayoutWrapper mode=\"seller\">\r\n      <div className=\"w-full max-w-[1200px] px-4 py-4 sm:py-6 lg:py-8 mx-auto\">\r\n        <div className=\"max-w-4xl mx-auto\">\r\n          {/* 헤더 */}\r\n          <div className=\"mb-8\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <Link\r\n                href=\"/mypage/seller/portfolio\"\r\n                className=\"text-gray-600 hover:text-brand-primary transition-colors\"\r\n              >\r\n                <i className=\"fas fa-arrow-left mr-2\"></i>\r\n                포트폴리오 목록\r\n              </Link>\r\n              <div className=\"flex gap-2\">\r\n                <Link\r\n                  href={`/mypage/seller/portfolio/${portfolio.id}/edit`}\r\n                  className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium\"\r\n                >\r\n                  <i className=\"fas fa-edit mr-2\"></i>\r\n                  수정\r\n                </Link>\r\n                <button\r\n                  onClick={handleDelete}\r\n                  disabled={deleting}\r\n                  className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium disabled:bg-gray-300 disabled:cursor-not-allowed\"\r\n                >\r\n                  <i className=\"fas fa-trash mr-2\"></i>\r\n                  {deleting ? '삭제 중...' : '삭제'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <h1 className=\"text-xl font-bold text-gray-900\">{portfolio.title}</h1>\r\n            <div className=\"flex items-center gap-4 text-sm text-gray-600 mt-1\">\r\n              <span><i className=\"fas fa-eye mr-1\"></i>{portfolio.view_count || 0} 조회</span>\r\n              <span><i className=\"fas fa-calendar mr-1\"></i>{new Date(portfolio.created_at).toLocaleDateString('ko-KR')}</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* 이미지 갤러리 */}\r\n          {allImages.length > 0 && (\r\n            <div className=\"mb-8\">\r\n              <div className=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\r\n                {/* 메인 이미지 */}\r\n                <div className=\"aspect-[16/9] bg-gray-100 flex items-center justify-center\">\r\n                  <img\r\n                    src={allImages[currentImageIndex]}\r\n                    alt={portfolio.title}\r\n                    className=\"w-full h-full object-contain\"\r\n                  />\r\n                </div>\r\n\r\n                {/* 썸네일 네비게이션 */}\r\n                {allImages.length > 1 && (\r\n                  <div className=\"p-4 bg-gray-50 border-t border-gray-200\">\r\n                    <div className=\"flex gap-2 overflow-x-auto\">\r\n                      {allImages.map((image, index) => (\r\n                        <button\r\n                          key={index}\r\n                          onClick={() => setCurrentImageIndex(index)}\r\n                          className={`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all ${\r\n                            currentImageIndex === index\r\n                              ? 'border-brand-primary ring-2 ring-brand-primary ring-opacity-50'\r\n                              : 'border-gray-300 hover:border-gray-400'\r\n                          }`}\r\n                        >\r\n                          <img\r\n                            src={image}\r\n                            alt={`${portfolio.title} ${index + 1}`}\r\n                            className=\"w-full h-full object-cover\"\r\n                          />\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* YouTube 영상 */}\r\n          {youtubeVideoId && (\r\n            <div className=\"bg-white border border-gray-200 rounded-lg p-6 mb-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n                <i className=\"fab fa-youtube text-red-600 mr-2\"></i>\r\n                프로젝트 영상\r\n              </h2>\r\n              <div className=\"aspect-video bg-black rounded-lg overflow-hidden\">\r\n                <iframe\r\n                  width=\"100%\"\r\n                  height=\"100%\"\r\n                  src={`https://www.youtube.com/embed/${youtubeVideoId}`}\r\n                  title={portfolio.title}\r\n                  frameBorder=\"0\"\r\n                  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                  allowFullScreen\r\n                ></iframe>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* 설명 */}\r\n          <div className=\"bg-white border border-gray-200 rounded-lg p-6 mb-6\">\r\n            <h2 className=\"text-xl font-bold text-gray-900 mb-4\">프로젝트 설명</h2>\r\n            <p className=\"text-gray-700 whitespace-pre-wrap leading-relaxed\">\r\n              {portfolio.description}\r\n            </p>\r\n          </div>\r\n\r\n          {/* 프로젝트 URL */}\r\n          {portfolio.project_url && (\r\n            <div className=\"bg-white border border-gray-200 rounded-lg p-6 mb-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">프로젝트 링크</h2>\r\n              <a\r\n                href={portfolio.project_url}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"text-brand-primary hover:underline break-all\"\r\n              >\r\n                <i className=\"fas fa-external-link-alt mr-2\"></i>\r\n                {portfolio.project_url}\r\n              </a>\r\n            </div>\r\n          )}\r\n\r\n          {/* 태그 */}\r\n          {portfolio.tags && portfolio.tags.length > 0 && (\r\n            <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">태그</h2>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {portfolio.tags.map((tag, index) => (\r\n                  <span\r\n                    key={index}\r\n                    className=\"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm\"\r\n                  >\r\n                    #{tag}\r\n                  </span>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </MypageLayoutWrapper>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\portfolio\\[id]\\edit\\PortfolioEditClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'categoryTree' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":87,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":87,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useMemo } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport MypageLayoutWrapper from '@/components/mypage/MypageLayoutWrapper'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { logger } from '@/lib/logger'\r\nimport Link from 'next/link'\r\n\r\ninterface Portfolio {\r\n  id: string\r\n  seller_id: string\r\n  title: string\r\n  description: string\r\n  category_id: string | null\r\n  thumbnail_url: string | null\r\n  image_urls: string[]\r\n  project_url: string | null\r\n  youtube_url: string | null\r\n  service_id: string | null\r\n  tags: string[]\r\n  view_count: number\r\n  created_at: string\r\n  updated_at: string\r\n}\r\n\r\ninterface Category {\r\n  id: string\r\n  name: string\r\n  slug: string\r\n  parent_id: string | null\r\n}\r\n\r\ninterface Service {\r\n  id: string\r\n  title: string\r\n  status: string\r\n}\r\n\r\ninterface Props {\r\n  portfolio: Portfolio\r\n  sellerId: string\r\n  categories: Category[]\r\n  services: Service[]\r\n  linkedServiceIds: string[]\r\n}\r\n\r\nexport default function PortfolioEditClient({ portfolio, sellerId, categories, services, linkedServiceIds }: Props) {\r\n  const router = useRouter()\r\n  const [loading, setLoading] = useState(false)\r\n  const [uploading, setUploading] = useState(false)\r\n  const [formData, setFormData] = useState({\r\n    title: portfolio.title,\r\n    description: portfolio.description,\r\n    category_id: portfolio.category_id || '',\r\n    thumbnail_url: portfolio.thumbnail_url || '',\r\n    image_urls: portfolio.image_urls || [],\r\n    project_url: portfolio.project_url || '',\r\n    youtube_url: portfolio.youtube_url || '',\r\n    service_ids: linkedServiceIds, // 다중 선택으로 변경\r\n    tags: portfolio.tags || []\r\n  })\r\n  const [tagInput, setTagInput] = useState('')\r\n  const [imageFiles, setImageFiles] = useState<File[]>([])\r\n  const [imagePreviews, setImagePreviews] = useState<string[]>([])\r\n  const [existingImages, setExistingImages] = useState<string[]>([\r\n    portfolio.thumbnail_url,\r\n    ...(portfolio.image_urls || [])\r\n  ].filter(Boolean) as string[])\r\n  const [youtubeVideoId, setYoutubeVideoId] = useState(() => {\r\n    if (portfolio.youtube_url) {\r\n      const patterns = [\r\n        /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([^&\\n?#]+)/,\r\n        /youtube\\.com\\/embed\\/([^&\\n?#]+)/,\r\n        /youtube\\.com\\/v\\/([^&\\n?#]+)/\r\n      ]\r\n      for (const pattern of patterns) {\r\n        const match = portfolio.youtube_url.match(pattern)\r\n        if (match) return match[1]\r\n      }\r\n    }\r\n    return ''\r\n  })\r\n  const [fetchingYoutubeThumbnail, setFetchingYoutubeThumbnail] = useState(false)\r\n\r\n  // 카테고리 계층 구조 생성\r\n  const categoryTree = useMemo(() => {\r\n    const topLevel = categories.filter(c => !c.parent_id)\r\n    return topLevel.map(parent => ({\r\n      ...parent,\r\n      children: categories.filter(c => c.parent_id === parent.id).map(child => ({\r\n        ...child,\r\n        children: categories.filter(c => c.parent_id === child.id)\r\n      }))\r\n    }))\r\n  }, [categories])\r\n\r\n  // YouTube URL에서 비디오 ID 추출\r\n  const extractYoutubeVideoId = (url: string): string | null => {\r\n    const patterns = [\r\n      /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([^&\\n?#]+)/,\r\n      /youtube\\.com\\/embed\\/([^&\\n?#]+)/,\r\n      /youtube\\.com\\/v\\/([^&\\n?#]+)/\r\n    ]\r\n\r\n    for (const pattern of patterns) {\r\n      const match = url.match(pattern)\r\n      if (match) return match[1]\r\n    }\r\n    return null\r\n  }\r\n\r\n  // YouTube URL 입력 핸들러\r\n  const handleYoutubeUrlChange = async (url: string) => {\r\n    setFormData({ ...formData, youtube_url: url })\r\n\r\n    if (!url) {\r\n      setYoutubeVideoId('')\r\n      return\r\n    }\r\n\r\n    const videoId = extractYoutubeVideoId(url)\r\n    if (videoId) {\r\n      setYoutubeVideoId(videoId)\r\n\r\n      // YouTube 썸네일 자동 다운로드\r\n      try {\r\n        setFetchingYoutubeThumbnail(true)\r\n\r\n        // YouTube 썸네일 URL (maxresdefault가 없으면 hqdefault 사용)\r\n        const thumbnailUrl = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`\r\n\r\n        // 썸네일 이미지를 Blob으로 가져오기\r\n        const response = await fetch(thumbnailUrl)\r\n        if (!response.ok) {\r\n          // maxresdefault가 없으면 hqdefault 시도\r\n          const fallbackUrl = `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`\r\n          const fallbackResponse = await fetch(fallbackUrl)\r\n          const blob = await fallbackResponse.blob()\r\n\r\n          // Blob을 File로 변환\r\n          const file = new File([blob], `youtube-${videoId}.jpg`, { type: 'image/jpeg' })\r\n\r\n          // 기존 이미지 파일 배열에 추가\r\n          setImageFiles(prev => [file, ...prev])\r\n\r\n          // 미리보기 생성\r\n          const preview = URL.createObjectURL(blob)\r\n          setImagePreviews(prev => [preview, ...prev])\r\n        } else {\r\n          const blob = await response.blob()\r\n          const file = new File([blob], `youtube-${videoId}.jpg`, { type: 'image/jpeg' })\r\n          setImageFiles(prev => [file, ...prev])\r\n          const preview = URL.createObjectURL(blob)\r\n          setImagePreviews(prev => [preview, ...prev])\r\n        }\r\n      } catch (error) {\r\n        logger.error('Failed to fetch YouTube thumbnail:', error)\r\n      } finally {\r\n        setFetchingYoutubeThumbnail(false)\r\n      }\r\n    } else {\r\n      setYoutubeVideoId('')\r\n    }\r\n  }\r\n\r\n  // 이미지 파일 선택 핸들러\r\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = Array.from(e.target.files || [])\r\n    if (files.length === 0) return\r\n\r\n    // 기존 파일에 새 파일 추가 (누적)\r\n    setImageFiles(prev => [...prev, ...files])\r\n\r\n    // 미리보기 생성 (기존 미리보기에 새 미리보기 추가)\r\n    const previews = files.map(file => URL.createObjectURL(file))\r\n    setImagePreviews(prev => [...prev, ...previews])\r\n  }\r\n\r\n  // 새 이미지 삭제\r\n  const handleRemoveNewImage = (index: number) => {\r\n    const newFiles = imageFiles.filter((_, i) => i !== index)\r\n    const newPreviews = imagePreviews.filter((_, i) => i !== index)\r\n    setImageFiles(newFiles)\r\n    setImagePreviews(newPreviews)\r\n  }\r\n\r\n  // 기존 이미지 삭제\r\n  const handleRemoveExistingImage = (index: number) => {\r\n    setExistingImages(prev => prev.filter((_, i) => i !== index))\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n\r\n    if (!formData.title || !formData.description) {\r\n      alert('제목과 설명을 입력해주세요')\r\n      return\r\n    }\r\n\r\n    try {\r\n      setLoading(true)\r\n      setUploading(true)\r\n\r\n      let thumbnail_url = formData.thumbnail_url\r\n      let image_urls = formData.image_urls\r\n\r\n      // 새 이미지 파일 업로드\r\n      if (imageFiles.length > 0) {\r\n        const supabase = createClient()\r\n        const uploadedUrls: string[] = []\r\n\r\n        for (let i = 0; i < imageFiles.length; i++) {\r\n          const file = imageFiles[i]\r\n          const fileExt = file.name.split('.').pop()\r\n          const fileName = `${Date.now()}_${Math.random().toString(36).substring(2)}.${fileExt}`\r\n          const filePath = `portfolio/${fileName}`\r\n\r\n          // Supabase Storage에 직접 업로드\r\n          const { error: uploadError } = await supabase.storage\r\n            .from('portfolio')\r\n            .upload(filePath, file, { upsert: false })\r\n\r\n          if (uploadError) {\r\n            logger.error('Image upload failed:', uploadError)\r\n            throw new Error(`이미지 업로드 실패: ${uploadError.message}`)\r\n          }\r\n\r\n          // 공개 URL 가져오기\r\n          const { data: { publicUrl } } = supabase.storage\r\n            .from('portfolio')\r\n            .getPublicUrl(filePath)\r\n\r\n          uploadedUrls.push(publicUrl)\r\n        }\r\n\r\n        // 기존 이미지와 새 이미지 합치기\r\n        const allImages = [...existingImages, ...uploadedUrls]\r\n        thumbnail_url = allImages[0] || ''\r\n        image_urls = allImages.slice(1)\r\n      } else {\r\n        // 새 이미지 업로드가 없는 경우, 기존 이미지만 사용\r\n        thumbnail_url = existingImages[0] || ''\r\n        image_urls = existingImages.slice(1)\r\n      }\r\n\r\n      setUploading(false)\r\n\r\n      const response = await fetch(`/api/seller/portfolio/${portfolio.id}`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          ...formData,\r\n          thumbnail_url,\r\n          image_urls,\r\n          seller_id: sellerId\r\n        })\r\n      })\r\n\r\n      const result = await response.json()\r\n\r\n      if (!response.ok) {\r\n        logger.error('Portfolio update failed:', {\r\n          status: response.status,\r\n          error: result.error,\r\n          details: result.details\r\n        })\r\n        alert(`수정 실패: ${result.details || result.error || '알 수 없는 오류'}`)\r\n        return\r\n      }\r\n\r\n      alert('포트폴리오가 수정되었습니다')\r\n      router.push(`/mypage/seller/portfolio/${portfolio.id}`)\r\n      router.refresh()\r\n    } catch (error) {\r\n      logger.error('Portfolio update error:', error)\r\n      alert('수정에 실패했습니다: ' + (error instanceof Error ? error.message : '알 수 없는 오류'))\r\n    } finally {\r\n      setLoading(false)\r\n      setUploading(false)\r\n    }\r\n  }\r\n\r\n  const handleAddTag = () => {\r\n    if (tagInput.trim() && !formData.tags.includes(tagInput.trim())) {\r\n      setFormData({\r\n        ...formData,\r\n        tags: [...formData.tags, tagInput.trim()]\r\n      })\r\n      setTagInput('')\r\n    }\r\n  }\r\n\r\n  const handleRemoveTag = (tag: string) => {\r\n    setFormData({\r\n      ...formData,\r\n      tags: formData.tags.filter(t => t !== tag)\r\n    })\r\n  }\r\n\r\n  return (\r\n    <MypageLayoutWrapper mode=\"seller\">\r\n      <div className=\"py-8 px-4\">\r\n        <div className=\"max-w-3xl\">\r\n          <div className=\"mb-8\">\r\n            <Link\r\n              href={`/mypage/seller/portfolio/${portfolio.id}`}\r\n              className=\"text-gray-600 hover:text-brand-primary transition-colors mb-4 inline-block\"\r\n            >\r\n              <i className=\"fas fa-arrow-left mr-2\"></i>\r\n              포트폴리오 상세\r\n            </Link>\r\n            <h1 className=\"text-xl font-bold text-gray-900\">포트폴리오 수정</h1>\r\n            <p className=\"text-gray-600 mt-1 text-sm\">작업물 정보를 수정하세요</p>\r\n          </div>\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            {/* 제목 */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                제목 <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.title}\r\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                placeholder=\"포트폴리오 제목을 입력하세요\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* 연동 서비스 선택 (다중 선택) */}\r\n            {services.length > 0 && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  연동 서비스 <span className=\"text-gray-500 text-xs\">(다중 선택 가능 - 선택한 서비스의 상세 페이지에 이 포트폴리오가 표시됩니다)</span>\r\n                </label>\r\n                <div className=\"border border-gray-300 rounded-lg p-4 space-y-3 max-h-64 overflow-y-auto\">\r\n                  {services.map((service) => (\r\n                    <label\r\n                      key={service.id}\r\n                      className=\"flex items-start gap-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer transition-colors\"\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={formData.service_ids.includes(service.id)}\r\n                        onChange={(e) => {\r\n                          if (e.target.checked) {\r\n                            setFormData({\r\n                              ...formData,\r\n                              service_ids: [...formData.service_ids, service.id]\r\n                            })\r\n                          } else {\r\n                            setFormData({\r\n                              ...formData,\r\n                              service_ids: formData.service_ids.filter(id => id !== service.id)\r\n                            })\r\n                          }\r\n                        }}\r\n                        className=\"mt-1 w-4 h-4 text-brand-primary border-gray-300 rounded focus:ring-brand-primary\"\r\n                      />\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"text-sm font-medium text-gray-900\">{service.title}</p>\r\n                        {service.status === 'pending' && (\r\n                          <p className=\"text-xs text-gray-500 mt-1\">승인 대기중</p>\r\n                        )}\r\n                      </div>\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n                {formData.service_ids.length > 0 && (\r\n                  <p className=\"mt-2 text-sm text-gray-600\">\r\n                    <i className=\"fas fa-check-circle text-green-600 mr-1\"></i>\r\n                    {formData.service_ids.length}개의 서비스에 연결됩니다\r\n                  </p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* 설명 */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                설명 <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <textarea\r\n                value={formData.description}\r\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                rows={6}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                placeholder=\"프로젝트에 대한 자세한 설명을 입력하세요\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* 기존 이미지 */}\r\n            {existingImages.length > 0 && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  기존 이미지 <span className=\"text-gray-500 text-xs\">(첫 이미지가 썸네일이 됩니다)</span>\r\n                </label>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                  {existingImages.map((image, index) => (\r\n                    <div key={index} className=\"relative\">\r\n                      <img\r\n                        src={image}\r\n                        alt={`Existing ${index + 1}`}\r\n                        className=\"w-full h-32 object-cover rounded-lg\"\r\n                      />\r\n                      {index === 0 && (\r\n                        <span className=\"absolute top-2 left-2 bg-brand-primary text-white text-xs px-2 py-1 rounded\">\r\n                          썸네일\r\n                        </span>\r\n                      )}\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRemoveExistingImage(index)}\r\n                        className=\"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600\"\r\n                      >\r\n                        <i className=\"fas fa-times text-xs\"></i>\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* 새 이미지 업로드 */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                새 이미지 추가 {existingImages.length === 0 && <span className=\"text-gray-500 text-xs\">(첫 이미지가 썸네일이 됩니다)</span>}\r\n              </label>\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                multiple\r\n                onChange={handleImageChange}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n              />\r\n              {imagePreviews.length > 0 && (\r\n                <div className=\"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                  {imagePreviews.map((preview, index) => (\r\n                    <div key={index} className=\"relative\">\r\n                      <img\r\n                        src={preview}\r\n                        alt={`Preview ${index + 1}`}\r\n                        className=\"w-full h-32 object-cover rounded-lg\"\r\n                      />\r\n                      {existingImages.length === 0 && index === 0 && (\r\n                        <span className=\"absolute top-2 left-2 bg-brand-primary text-white text-xs px-2 py-1 rounded\">\r\n                          썸네일\r\n                        </span>\r\n                      )}\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRemoveNewImage(index)}\r\n                        className=\"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600\"\r\n                      >\r\n                        <i className=\"fas fa-times text-xs\"></i>\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* 프로젝트 URL */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                프로젝트 URL\r\n              </label>\r\n              <input\r\n                type=\"url\"\r\n                value={formData.project_url}\r\n                onChange={(e) => setFormData({ ...formData, project_url: e.target.value })}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                placeholder=\"https://example.com\"\r\n              />\r\n            </div>\r\n\r\n            {/* YouTube URL */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                YouTube 영상 URL <span className=\"text-gray-500 text-xs\">(영상이 포트폴리오에 삽입됩니다)</span>\r\n              </label>\r\n              <input\r\n                type=\"url\"\r\n                value={formData.youtube_url}\r\n                onChange={(e) => handleYoutubeUrlChange(e.target.value)}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                placeholder=\"https://www.youtube.com/watch?v=...\"\r\n                disabled={fetchingYoutubeThumbnail}\r\n              />\r\n              {fetchingYoutubeThumbnail && (\r\n                <p className=\"mt-2 text-sm text-gray-600\">\r\n                  <i className=\"fas fa-spinner fa-spin mr-2\"></i>\r\n                  YouTube 썸네일을 가져오는 중...\r\n                </p>\r\n              )}\r\n              {youtubeVideoId && (\r\n                <div className=\"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4\">\r\n                  <p className=\"text-sm text-gray-700 mb-2\">\r\n                    <i className=\"fab fa-youtube text-red-600 mr-2\"></i>\r\n                    YouTube 영상 미리보기\r\n                  </p>\r\n                  <div className=\"aspect-video bg-black rounded-lg overflow-hidden\">\r\n                    <iframe\r\n                      width=\"100%\"\r\n                      height=\"100%\"\r\n                      src={`https://www.youtube.com/embed/${youtubeVideoId}`}\r\n                      title=\"YouTube video preview\"\r\n                      frameBorder=\"0\"\r\n                      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                      allowFullScreen\r\n                    ></iframe>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* 태그 */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                태그\r\n              </label>\r\n              <div className=\"flex gap-2 mb-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={tagInput}\r\n                  onChange={(e) => setTagInput(e.target.value)}\r\n                  onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddTag())}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                  placeholder=\"태그 입력 후 Enter\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleAddTag}\r\n                  className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors\"\r\n                >\r\n                  추가\r\n                </button>\r\n              </div>\r\n              {formData.tags.length > 0 && (\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {formData.tags.map((tag) => (\r\n                    <span\r\n                      key={tag}\r\n                      className=\"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm\"\r\n                    >\r\n                      {tag}\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRemoveTag(tag)}\r\n                        className=\"hover:text-blue-900\"\r\n                      >\r\n                        <i className=\"fas fa-times\"></i>\r\n                      </button>\r\n                    </span>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* 버튼 */}\r\n            <div className=\"flex gap-3 pt-4\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => router.back()}\r\n                className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium\"\r\n              >\r\n                취소\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"flex-1 px-6 py-3 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors font-medium disabled:bg-gray-300 disabled:cursor-not-allowed\"\r\n              >\r\n                {uploading ? '이미지 업로드 중...' : loading ? '수정 중...' : '수정하기'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </MypageLayoutWrapper>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\portfolio\\[id]\\edit\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\portfolio\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\portfolio\\new\\PortfolioNewClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'categoryTree' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":50,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":50,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useMemo } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport MypageLayoutWrapper from '@/components/mypage/MypageLayoutWrapper'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { logger } from '@/lib/logger'\r\n\r\ninterface Category {\r\n  id: string\r\n  name: string\r\n  slug: string\r\n  parent_id: string | null\r\n}\r\n\r\ninterface Service {\r\n  id: string\r\n  title: string\r\n  status: string\r\n}\r\n\r\ninterface Props {\r\n  sellerId: string\r\n  categories: Category[]\r\n  services: Service[]\r\n}\r\n\r\nexport default function PortfolioNewClient({ sellerId, categories, services }: Props) {\r\n  const router = useRouter()\r\n  const [loading, setLoading] = useState(false)\r\n  const [uploading, setUploading] = useState(false)\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    category_id: '',\r\n    thumbnail_url: '',\r\n    image_urls: [] as string[],\r\n    project_url: '',\r\n    youtube_url: '',\r\n    service_ids: [] as string[], // 다중 선택으로 변경\r\n    tags: [] as string[]\r\n  })\r\n  const [tagInput, setTagInput] = useState('')\r\n  const [imageFiles, setImageFiles] = useState<File[]>([])\r\n  const [imagePreviews, setImagePreviews] = useState<string[]>([])\r\n  const [youtubeVideoId, setYoutubeVideoId] = useState('')\r\n  const [fetchingYoutubeThumbnail, setFetchingYoutubeThumbnail] = useState(false)\r\n\r\n  // 카테고리 계층 구조 생성\r\n  const categoryTree = useMemo(() => {\r\n    const topLevel = categories.filter(c => !c.parent_id)\r\n    return topLevel.map(parent => ({\r\n      ...parent,\r\n      children: categories.filter(c => c.parent_id === parent.id).map(child => ({\r\n        ...child,\r\n        children: categories.filter(c => c.parent_id === child.id)\r\n      }))\r\n    }))\r\n  }, [categories])\r\n\r\n  // YouTube URL에서 비디오 ID 추출\r\n  const extractYoutubeVideoId = (url: string): string | null => {\r\n    const patterns = [\r\n      /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([^&\\n?#]+)/,\r\n      /youtube\\.com\\/embed\\/([^&\\n?#]+)/,\r\n      /youtube\\.com\\/v\\/([^&\\n?#]+)/\r\n    ]\r\n\r\n    for (const pattern of patterns) {\r\n      const match = url.match(pattern)\r\n      if (match) return match[1]\r\n    }\r\n    return null\r\n  }\r\n\r\n  // YouTube URL 입력 핸들러\r\n  const handleYoutubeUrlChange = async (url: string) => {\r\n    setFormData({ ...formData, youtube_url: url })\r\n\r\n    if (!url) {\r\n      setYoutubeVideoId('')\r\n      return\r\n    }\r\n\r\n    const videoId = extractYoutubeVideoId(url)\r\n    if (videoId) {\r\n      setYoutubeVideoId(videoId)\r\n\r\n      // YouTube 썸네일 자동 다운로드\r\n      try {\r\n        setFetchingYoutubeThumbnail(true)\r\n\r\n        // YouTube 썸네일 URL (maxresdefault가 없으면 hqdefault 사용)\r\n        const thumbnailUrl = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`\r\n\r\n        // 썸네일 이미지를 Blob으로 가져오기\r\n        const response = await fetch(thumbnailUrl)\r\n        if (!response.ok) {\r\n          // maxresdefault가 없으면 hqdefault 시도\r\n          const fallbackUrl = `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`\r\n          const fallbackResponse = await fetch(fallbackUrl)\r\n          const blob = await fallbackResponse.blob()\r\n\r\n          // Blob을 File로 변환\r\n          const file = new File([blob], `youtube-${videoId}.jpg`, { type: 'image/jpeg' })\r\n\r\n          // 기존 이미지 파일 배열에 추가\r\n          setImageFiles(prev => [file, ...prev])\r\n\r\n          // 미리보기 생성\r\n          const preview = URL.createObjectURL(blob)\r\n          setImagePreviews(prev => [preview, ...prev])\r\n        } else {\r\n          const blob = await response.blob()\r\n          const file = new File([blob], `youtube-${videoId}.jpg`, { type: 'image/jpeg' })\r\n          setImageFiles(prev => [file, ...prev])\r\n          const preview = URL.createObjectURL(blob)\r\n          setImagePreviews(prev => [preview, ...prev])\r\n        }\r\n      } catch (error) {\r\n        logger.error('Failed to fetch YouTube thumbnail:', error)\r\n      } finally {\r\n        setFetchingYoutubeThumbnail(false)\r\n      }\r\n    } else {\r\n      setYoutubeVideoId('')\r\n    }\r\n  }\r\n\r\n  // 이미지 파일 선택 핸들러\r\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = Array.from(e.target.files || [])\r\n    if (files.length === 0) return\r\n\r\n    // 기존 파일에 새 파일 추가 (누적)\r\n    setImageFiles(prev => [...prev, ...files])\r\n\r\n    // 미리보기 생성 (기존 미리보기에 새 미리보기 추가)\r\n    const previews = files.map(file => URL.createObjectURL(file))\r\n    setImagePreviews(prev => [...prev, ...previews])\r\n  }\r\n\r\n  // 이미지 삭제\r\n  const handleRemoveImage = (index: number) => {\r\n    const newFiles = imageFiles.filter((_, i) => i !== index)\r\n    const newPreviews = imagePreviews.filter((_, i) => i !== index)\r\n    setImageFiles(newFiles)\r\n    setImagePreviews(newPreviews)\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n\r\n    if (!formData.title || !formData.description) {\r\n      alert('제목과 설명을 입력해주세요')\r\n      return\r\n    }\r\n\r\n    try {\r\n      setLoading(true)\r\n      setUploading(true)\r\n\r\n      let thumbnail_url = formData.thumbnail_url\r\n      let image_urls = formData.image_urls\r\n\r\n      // 이미지 파일 업로드 (클라이언트에서 직접 Supabase Storage에 업로드)\r\n      if (imageFiles.length > 0) {\r\n        const supabase = createClient()\r\n        const uploadedUrls: string[] = []\r\n\r\n        for (let i = 0; i < imageFiles.length; i++) {\r\n          const file = imageFiles[i]\r\n          const fileExt = file.name.split('.').pop()\r\n          const fileName = `${Date.now()}_${Math.random().toString(36).substring(2)}.${fileExt}`\r\n          const filePath = `portfolio/${fileName}`\r\n\r\n          // Supabase Storage에 직접 업로드\r\n          const { error: uploadError } = await supabase.storage\r\n            .from('portfolio')\r\n            .upload(filePath, file, { upsert: false })\r\n\r\n          if (uploadError) {\r\n            logger.error('Image upload failed:', uploadError)\r\n            throw new Error(`이미지 업로드 실패: ${uploadError.message}`)\r\n          }\r\n\r\n          // 공개 URL 가져오기\r\n          const { data: { publicUrl } } = supabase.storage\r\n            .from('portfolio')\r\n            .getPublicUrl(filePath)\r\n\r\n          uploadedUrls.push(publicUrl)\r\n        }\r\n\r\n        // 첫 번째 이미지를 썸네일로, 나머지를 포트폴리오 이미지로\r\n        thumbnail_url = uploadedUrls[0]\r\n        image_urls = uploadedUrls.slice(1)\r\n      }\r\n\r\n      setUploading(false)\r\n\r\n      const response = await fetch('/api/seller/portfolio', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          ...formData,\r\n          thumbnail_url,\r\n          image_urls,\r\n          seller_id: sellerId\r\n        })\r\n      })\r\n\r\n      const result = await response.json()\r\n\r\n      if (!response.ok) {\r\n        logger.error('Portfolio creation failed:', {\r\n          status: response.status,\r\n          error: result.error,\r\n          details: result.details\r\n        })\r\n        alert(`등록 실패: ${result.details || result.error || '알 수 없는 오류'}`)\r\n        return\r\n      }\r\n\r\n      alert('포트폴리오가 등록되었습니다')\r\n      router.push('/mypage/seller/portfolio')\r\n      router.refresh()\r\n    } catch (error) {\r\n      logger.error('Portfolio creation error:', error)\r\n      alert('등록에 실패했습니다: ' + (error instanceof Error ? error.message : '알 수 없는 오류'))\r\n    } finally {\r\n      setLoading(false)\r\n      setUploading(false)\r\n    }\r\n  }\r\n\r\n  const handleAddTag = () => {\r\n    if (tagInput.trim() && !formData.tags.includes(tagInput.trim())) {\r\n      setFormData({\r\n        ...formData,\r\n        tags: [...formData.tags, tagInput.trim()]\r\n      })\r\n      setTagInput('')\r\n    }\r\n  }\r\n\r\n  const handleRemoveTag = (tag: string) => {\r\n    setFormData({\r\n      ...formData,\r\n      tags: formData.tags.filter(t => t !== tag)\r\n    })\r\n  }\r\n\r\n  return (\r\n    <MypageLayoutWrapper mode=\"seller\">\r\n      <div className=\"w-full max-w-[1200px] px-4 py-4 sm:py-6 lg:py-8 mx-auto\">\r\n        <div className=\"max-w-3xl\">\r\n          <div className=\"mb-8\">\r\n            <h1 className=\"text-xl font-bold text-gray-900\">포트폴리오 등록</h1>\r\n            <p className=\"text-gray-600 mt-1 text-sm\">작업물을 등록하여 고객에게 보여주세요</p>\r\n          </div>\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            {/* 제목 */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                제목 <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.title}\r\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                placeholder=\"포트폴리오 제목을 입력하세요\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* 연동 서비스 선택 (다중 선택) */}\r\n            {services.length > 0 && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  연동 서비스 <span className=\"text-gray-500 text-xs\">(다중 선택 가능 - 선택한 서비스의 상세 페이지에 이 포트폴리오가 표시됩니다)</span>\r\n                </label>\r\n                <div className=\"border border-gray-300 rounded-lg p-4 space-y-3 max-h-64 overflow-y-auto\">\r\n                  {services.map((service) => (\r\n                    <label\r\n                      key={service.id}\r\n                      className=\"flex items-start gap-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer transition-colors\"\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={formData.service_ids.includes(service.id)}\r\n                        onChange={(e) => {\r\n                          if (e.target.checked) {\r\n                            setFormData({\r\n                              ...formData,\r\n                              service_ids: [...formData.service_ids, service.id]\r\n                            })\r\n                          } else {\r\n                            setFormData({\r\n                              ...formData,\r\n                              service_ids: formData.service_ids.filter(id => id !== service.id)\r\n                            })\r\n                          }\r\n                        }}\r\n                        className=\"mt-1 w-4 h-4 text-brand-primary border-gray-300 rounded focus:ring-brand-primary\"\r\n                      />\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"text-sm font-medium text-gray-900\">{service.title}</p>\r\n                        {service.status === 'pending' && (\r\n                          <p className=\"text-xs text-gray-500 mt-1\">승인 대기중</p>\r\n                        )}\r\n                      </div>\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n                {formData.service_ids.length > 0 && (\r\n                  <p className=\"mt-2 text-sm text-gray-600\">\r\n                    <i className=\"fas fa-check-circle text-green-600 mr-1\"></i>\r\n                    {formData.service_ids.length}개의 서비스에 연결됩니다\r\n                  </p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* 설명 */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                설명 <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <textarea\r\n                value={formData.description}\r\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                rows={6}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                placeholder=\"프로젝트에 대한 자세한 설명을 입력하세요\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* 이미지 업로드 */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                이미지 업로드 <span className=\"text-gray-500 text-xs\">(첫 이미지가 썸네일이 됩니다)</span>\r\n              </label>\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                multiple\r\n                onChange={handleImageChange}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n              />\r\n              {imagePreviews.length > 0 && (\r\n                <div className=\"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                  {imagePreviews.map((preview, index) => (\r\n                    <div key={index} className=\"relative\">\r\n                      <img\r\n                        src={preview}\r\n                        alt={`Preview ${index + 1}`}\r\n                        className=\"w-full h-32 object-cover rounded-lg\"\r\n                      />\r\n                      {index === 0 && (\r\n                        <span className=\"absolute top-2 left-2 bg-brand-primary text-white text-xs px-2 py-1 rounded\">\r\n                          썸네일\r\n                        </span>\r\n                      )}\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRemoveImage(index)}\r\n                        className=\"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600\"\r\n                      >\r\n                        <i className=\"fas fa-times text-xs\"></i>\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* 프로젝트 URL */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                프로젝트 URL\r\n              </label>\r\n              <input\r\n                type=\"url\"\r\n                value={formData.project_url}\r\n                onChange={(e) => setFormData({ ...formData, project_url: e.target.value })}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                placeholder=\"https://example.com\"\r\n              />\r\n            </div>\r\n\r\n            {/* YouTube URL */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                YouTube 영상 URL <span className=\"text-gray-500 text-xs\">(영상이 포트폴리오에 삽입됩니다)</span>\r\n              </label>\r\n              <input\r\n                type=\"url\"\r\n                value={formData.youtube_url}\r\n                onChange={(e) => handleYoutubeUrlChange(e.target.value)}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                placeholder=\"https://www.youtube.com/watch?v=...\"\r\n                disabled={fetchingYoutubeThumbnail}\r\n              />\r\n              {fetchingYoutubeThumbnail && (\r\n                <p className=\"mt-2 text-sm text-gray-600\">\r\n                  <i className=\"fas fa-spinner fa-spin mr-2\"></i>\r\n                  YouTube 썸네일을 가져오는 중...\r\n                </p>\r\n              )}\r\n              {youtubeVideoId && (\r\n                <div className=\"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4\">\r\n                  <p className=\"text-sm text-gray-700 mb-2\">\r\n                    <i className=\"fab fa-youtube text-red-600 mr-2\"></i>\r\n                    YouTube 영상 미리보기\r\n                  </p>\r\n                  <div className=\"aspect-video bg-black rounded-lg overflow-hidden\">\r\n                    <iframe\r\n                      width=\"100%\"\r\n                      height=\"100%\"\r\n                      src={`https://www.youtube.com/embed/${youtubeVideoId}`}\r\n                      title=\"YouTube video preview\"\r\n                      frameBorder=\"0\"\r\n                      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                      allowFullScreen\r\n                    ></iframe>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* 태그 */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                태그\r\n              </label>\r\n              <div className=\"flex gap-2 mb-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={tagInput}\r\n                  onChange={(e) => setTagInput(e.target.value)}\r\n                  onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddTag())}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                  placeholder=\"태그 입력 후 Enter\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleAddTag}\r\n                  className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors\"\r\n                >\r\n                  추가\r\n                </button>\r\n              </div>\r\n              {formData.tags.length > 0 && (\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {formData.tags.map((tag) => (\r\n                    <span\r\n                      key={tag}\r\n                      className=\"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm\"\r\n                    >\r\n                      {tag}\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRemoveTag(tag)}\r\n                        className=\"hover:text-blue-900\"\r\n                      >\r\n                        <i className=\"fas fa-times\"></i>\r\n                      </button>\r\n                    </span>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* 버튼 */}\r\n            <div className=\"flex gap-3 pt-4\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => router.back()}\r\n                className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium\"\r\n              >\r\n                취소\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"flex-1 px-6 py-3 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors font-medium disabled:bg-gray-300 disabled:cursor-not-allowed\"\r\n              >\r\n                {uploading ? '이미지 업로드 중...' : loading ? '등록 중...' : '등록하기'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </MypageLayoutWrapper>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\portfolio\\new\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\portfolio\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\profile\\SellerProfileClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\profile\\edit\\SellerProfileEditClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'display_name' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":45,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'bio' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":45,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'profile_image' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":45,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":47}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport MypageLayoutWrapper from '@/components/mypage/MypageLayoutWrapper'\r\nimport { logger } from '@/lib/logger'\r\nimport type { Seller } from '@/types/common'\r\n\r\ninterface SellerProfile extends Omit<Seller, 'created_at' | 'updated_at'> {\r\n  display_name?: string\r\n  bio?: string | null\r\n  profile_image?: string | null\r\n}\r\n\r\ninterface Props {\r\n  profile: SellerProfile\r\n}\r\n\r\nexport default function SellerProfileEditClient({ profile: initialProfile }: Props) {\r\n  const router = useRouter()\r\n  const [saving, setSaving] = useState(false)\r\n  const [profile, setProfile] = useState(initialProfile)\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n\r\n    try {\r\n      setSaving(true)\r\n      const supabase = createClient()\r\n\r\n      // 1. Update profiles table (display_name -> name, bio, profile_image)\r\n      const { error: profileError } = await supabase\r\n        .from('profiles')\r\n        .update({\r\n          name: profile.display_name,\r\n          bio: profile.bio,\r\n          updated_at: new Date().toISOString()\r\n        })\r\n        .eq('user_id', profile.user_id)\r\n\r\n      if (profileError) throw profileError\r\n\r\n      // 2. Update sellers table (remove display_name, bio, profile_image from update)\r\n      const { display_name, bio, profile_image, ...sellerData } = profile\r\n      const { error: sellerError } = await supabase\r\n        .from('sellers')\r\n        .update(sellerData)\r\n        .eq('id', profile.id)\r\n\r\n      if (sellerError) throw sellerError\r\n\r\n      alert('프로필이 저장되었습니다')\r\n      router.push('/mypage/seller/profile')\r\n      router.refresh()\r\n    } catch (error) {\r\n      logger.error('Failed to save profile:', error)\r\n      alert('프로필 저장에 실패했습니다')\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <MypageLayoutWrapper mode=\"seller\">\r\n      <div className=\"py-8 px-4\">\r\n        <div className=\"mb-6 lg:mb-8 pt-12 lg:pt-0\">\r\n          <h1 className=\"text-xl font-bold text-gray-900\">판매자 정보 수정</h1>\r\n          <p className=\"text-gray-600 mt-1 text-sm\">판매자 프로필 및 정산 정보를 수정하세요</p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"max-w-4xl space-y-6\">\r\n          <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n            <h2 className=\"text-xl font-bold text-gray-900 mb-6\">프로필 정보</h2>\r\n\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  판매자명 (활동명) *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={profile.display_name || ''}\r\n                  onChange={(e) => setProfile({ ...profile, display_name: e.target.value })}\r\n                  required\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  자기소개 *\r\n                </label>\r\n                <textarea\r\n                  rows={6}\r\n                  value={profile.bio || ''}\r\n                  onChange={(e) => setProfile({ ...profile, bio: e.target.value })}\r\n                  required\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                  placeholder=\"자신의 전문성과 경력을 소개해주세요\"\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n            <h2 className=\"text-xl font-bold text-gray-900 mb-6\">연락처 정보</h2>\r\n\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  전화번호 *\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  value={profile.phone || ''}\r\n                  onChange={(e) => setProfile({ ...profile, phone: e.target.value })}\r\n                  required\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                />\r\n                <div className=\"mt-2\">\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={profile.show_phone || false}\r\n                      onChange={(e) => setProfile({ ...profile, show_phone: e.target.checked })}\r\n                      className=\"w-4 h-4 text-brand-primary rounded\"\r\n                    />\r\n                    <span className=\"ml-2 text-sm text-gray-700\">프로필에 전화번호 공개</span>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  카카오톡 ID\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={profile.kakao_id || ''}\r\n                  onChange={(e) => setProfile({ ...profile, kakao_id: e.target.value })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  WhatsApp\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={profile.whatsapp || ''}\r\n                  onChange={(e) => setProfile({ ...profile, whatsapp: e.target.value })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  웹사이트\r\n                </label>\r\n                <input\r\n                  type=\"url\"\r\n                  value={profile.website || ''}\r\n                  onChange={(e) => setProfile({ ...profile, website: e.target.value })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  연락 가능 시간\r\n                </label>\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label htmlFor=\"contact-start-time\" className=\"block text-xs text-gray-600 mb-1\">시작 시간</label>\r\n                    <select\r\n                      id=\"contact-start-time\"\r\n                      value={profile.contact_hours?.split('-')[0] || '09:00'}\r\n                      onChange={(e) => {\r\n                        const endTime = profile.contact_hours?.split('-')[1] || '18:00'\r\n                        setProfile({ ...profile, contact_hours: `${e.target.value}-${endTime}` })\r\n                      }}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                    >\r\n                      {Array.from({ length: 24 }, (_, i) => {\r\n                        const hour = i.toString().padStart(2, '0')\r\n                        return [\r\n                          <option key={`${hour}:00`} value={`${hour}:00`}>{`${hour}:00`}</option>,\r\n                          <option key={`${hour}:30`} value={`${hour}:30`}>{`${hour}:30`}</option>\r\n                        ]\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                  <div>\r\n                    <label htmlFor=\"contact-end-time\" className=\"block text-xs text-gray-600 mb-1\">종료 시간</label>\r\n                    <select\r\n                      id=\"contact-end-time\"\r\n                      value={profile.contact_hours?.split('-')[1] || '18:00'}\r\n                      onChange={(e) => {\r\n                        const startTime = profile.contact_hours?.split('-')[0] || '09:00'\r\n                        setProfile({ ...profile, contact_hours: `${startTime}-${e.target.value}` })\r\n                      }}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                    >\r\n                      {Array.from({ length: 24 }, (_, i) => {\r\n                        const hour = i.toString().padStart(2, '0')\r\n                        return [\r\n                          <option key={`${hour}:00`} value={`${hour}:00`}>{`${hour}:00`}</option>,\r\n                          <option key={`${hour}:30`} value={`${hour}:30`}>{`${hour}:30`}</option>\r\n                        ]\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <p className=\"mt-1 text-sm text-gray-500\">\r\n                  구매자가 연락 가능한 시간대를 선택해주세요\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n            <h2 className=\"text-xl font-bold text-gray-900 mb-6\">정산 정보</h2>\r\n\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  은행명 *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={profile.bank_name || ''}\r\n                  onChange={(e) => setProfile({ ...profile, bank_name: e.target.value })}\r\n                  required\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  예금주명 *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={profile.account_holder || ''}\r\n                  onChange={(e) => setProfile({ ...profile, account_holder: e.target.value })}\r\n                  required\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  계좌번호 *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={profile.account_number || ''}\r\n                  onChange={(e) => setProfile({ ...profile, account_number: e.target.value })}\r\n                  required\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={profile.is_business || false}\r\n                    onChange={(e) => setProfile({ ...profile, is_business: e.target.checked })}\r\n                    className=\"w-4 h-4 text-brand-primary rounded\"\r\n                  />\r\n                  <span className=\"ml-2 text-sm text-gray-700\">사업자입니다</span>\r\n                </label>\r\n              </div>\r\n\r\n              {profile.is_business && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    사업자 번호\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={profile.business_number || ''}\r\n                    onChange={(e) => setProfile({ ...profile, business_number: e.target.value })}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              <div>\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={profile.tax_invoice_available || false}\r\n                    onChange={(e) => setProfile({ ...profile, tax_invoice_available: e.target.checked })}\r\n                    className=\"w-4 h-4 text-brand-primary rounded\"\r\n                  />\r\n                  <span className=\"ml-2 text-sm text-gray-700\">세금계산서 발행 가능</span>\r\n                </label>\r\n                <p className=\"mt-1 ml-6 text-sm text-gray-500\">\r\n                  사업자인 경우 체크하시면 구매자에게 세금계산서 발행 가능 여부가 표시됩니다\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex gap-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => router.back()}\r\n              disabled={saving}\r\n              className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50\"\r\n            >\r\n              취소\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={saving}\r\n              className=\"flex-1 px-6 py-3 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors font-medium disabled:opacity-50\"\r\n            >\r\n              {saving ? '저장중...' : '저장하기'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </MypageLayoutWrapper>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\profile\\edit\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":13,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":30}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { redirect } from 'next/navigation'\r\nimport { createClient } from '@/lib/supabase/server'\r\nimport SellerProfileEditClient from './SellerProfileEditClient'\r\n\r\nexport default async function SellerProfileEditPage() {\r\n  const supabase = await createClient()\r\n  const { data: { user } } = await supabase.auth.getUser()\r\n\r\n  if (!user) {\r\n    redirect('/auth/login')\r\n  }\r\n\r\n  const { data: seller, error } = await supabase\r\n    .from('sellers')\r\n    .select(`\r\n      *,\r\n      users!inner(profile_image)\r\n    `)\r\n    .eq('user_id', user.id)\r\n    .maybeSingle()\r\n\r\n  if (!seller) {\r\n    redirect('/mypage/seller/register')\r\n  }\r\n\r\n  // users.profile_image를 seller.profile_image로 병합\r\n  const profileWithImage = {\r\n    ...seller,\r\n    profile_image: seller.users?.profile_image || seller.profile_image\r\n  }\r\n\r\n  return <SellerProfileEditClient profile={profileWithImage} />\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\profile\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\register\\SellerRegisterClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'birthDate' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":136,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":136,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'gender' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":136,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":136,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'seller' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":233,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":233,"endColumn":27},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":280,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":280,"endColumn":91,"suggestions":[{"messageId":"addBrackets","fix":{"range":[7994,8180],"text":"{ const hasProfileImage = !!formData.profileImage || !!initialProfile?.profile_image\r\n        result = !!formData.displayName && formData.bio.length >= 50 && hasProfileImage\r\n        break }"},"desc":"Add {} brackets around the case block."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport MypageLayoutWrapper from '@/components/mypage/MypageLayoutWrapper'\r\nimport Link from 'next/link'\r\n\r\ntype Step = 1 | 2 | 3 | 4\r\n\r\ninterface SellerFormData {\r\n  // 1단계: 신원 인증\r\n  realName: string\r\n  phone: string\r\n  accountNumber: string\r\n  accountHolder: string\r\n  bankName: string\r\n  businessNumber: string\r\n  isBusiness: boolean\r\n\r\n  // 2단계: 판매자 프로필\r\n  displayName: string\r\n  profileImage: File | null\r\n  bio: string\r\n\r\n  // 3단계: 연락처 정보\r\n  publicPhone: string\r\n  showPhone: boolean\r\n  kakaoId: string\r\n  kakaoOpenChat: string\r\n  whatsapp: string\r\n  website: string\r\n  preferredContact: string[]\r\n\r\n  // 4단계: 약관 동의\r\n  termsAgree: boolean\r\n  commissionAgree: boolean\r\n  refundAgree: boolean\r\n}\r\n\r\ninterface Props {\r\n  userId: string\r\n  initialProfile?: {\r\n    name: string\r\n    profile_image?: string | null\r\n  } | null\r\n}\r\n\r\nexport default function SellerRegisterClient({ userId, initialProfile }: Props) {\r\n  const router = useRouter()\r\n  const [currentStep, setCurrentStep] = useState<Step>(1)\r\n  const [loading, setLoading] = useState(false)\r\n  const [profilePreview, setProfilePreview] = useState<string | null>(initialProfile?.profile_image || null)\r\n  const [isVerified, setIsVerified] = useState(false)\r\n\r\n  const [formData, setFormData] = useState<SellerFormData>({\r\n    realName: '',\r\n    phone: '',\r\n    accountNumber: '',\r\n    accountHolder: '',\r\n    bankName: '',\r\n    businessNumber: '',\r\n    isBusiness: false,\r\n    displayName: initialProfile?.name || '',\r\n    profileImage: null,\r\n    bio: '',\r\n    publicPhone: '',\r\n    showPhone: false,\r\n    kakaoId: '',\r\n    kakaoOpenChat: '',\r\n    whatsapp: '',\r\n    website: '',\r\n    preferredContact: [],\r\n    termsAgree: false,\r\n    commissionAgree: false,\r\n    refundAgree: false,\r\n  })\r\n\r\n  const handleProfileImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0]\r\n    if (file) {\r\n      if (file.size > 5 * 1024 * 1024) {\r\n        alert('파일 크기는 5MB를 초과할 수 없습니다.')\r\n        return\r\n      }\r\n      if (!file.type.startsWith('image/')) {\r\n        alert('이미지 파일만 업로드 가능합니다.')\r\n        return\r\n      }\r\n      setFormData({ ...formData, profileImage: file })\r\n      const reader = new FileReader()\r\n      reader.onloadend = () => {\r\n        setProfilePreview(reader.result as string)\r\n      }\r\n      reader.readAsDataURL(file)\r\n    }\r\n  }\r\n\r\n  const handlePreferredContactToggle = (contact: string) => {\r\n    const current = formData.preferredContact\r\n    if (current.includes(contact)) {\r\n      setFormData({\r\n        ...formData,\r\n        preferredContact: current.filter(c => c !== contact)\r\n      })\r\n    } else {\r\n      setFormData({\r\n        ...formData,\r\n        preferredContact: [...current, contact]\r\n      })\r\n    }\r\n  }\r\n\r\n  // NICE 본인인증 처리\r\n  const handleNiceVerification = () => {\r\n    // NICE 본인인증 팝업 열기\r\n    const width = 500\r\n    const height = 600\r\n    const left = (window.screen.width - width) / 2\r\n    const top = (window.screen.height - height) / 2\r\n\r\n    // 실제 환경에서는 /api/nice/request 엔드포인트로 인증 요청\r\n    // 여기서는 시뮬레이션\r\n    const popup = window.open(\r\n      '/api/nice/verify',\r\n      'niceVerification',\r\n      `width=${width},height=${height},left=${left},top=${top},scrollbars=yes`\r\n    )\r\n\r\n    // 팝업에서 메시지 받기 (본인인증 완료 시)\r\n    const handleMessage = (event: MessageEvent) => {\r\n      // 보안을 위해 origin 체크 필요\r\n      if (event.origin !== window.location.origin) return\r\n\r\n      if (event.data.type === 'NICE_VERIFICATION_SUCCESS') {\r\n        const { name, phone, birthDate, gender } = event.data.data\r\n\r\n        setFormData({\r\n          ...formData,\r\n          realName: name,\r\n          phone: phone\r\n        })\r\n        setIsVerified(true)\r\n\r\n        alert('본인인증이 완료되었습니다.')\r\n        window.removeEventListener('message', handleMessage)\r\n      } else if (event.data.type === 'NICE_VERIFICATION_FAILED') {\r\n        alert('본인인증에 실패했습니다. 다시 시도해주세요.')\r\n        window.removeEventListener('message', handleMessage)\r\n      }\r\n    }\r\n\r\n    window.addEventListener('message', handleMessage)\r\n\r\n    // 팝업이 닫혔는지 체크\r\n    const checkPopupClosed = setInterval(() => {\r\n      if (popup && popup.closed) {\r\n        clearInterval(checkPopupClosed)\r\n        window.removeEventListener('message', handleMessage)\r\n      }\r\n    }, 500)\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    setLoading(true)\r\n\r\n    try {\r\n      const supabase = createClient()\r\n\r\n      // 1. 프로필 이미지 업로드\r\n      let profileImageUrl = initialProfile?.profile_image || ''\r\n      if (formData.profileImage) {\r\n        const fileExt = formData.profileImage.name.split('.').pop()\r\n        const fileName = `${userId}-profile.${fileExt}`\r\n        const filePath = `seller-profiles/${fileName}`\r\n\r\n        const { error: uploadError } = await supabase.storage\r\n          .from('profiles')\r\n          .upload(filePath, formData.profileImage, { upsert: true })\r\n\r\n        if (uploadError) {\r\n          alert('프로필 이미지 업로드에 실패했습니다: ' + uploadError.message)\r\n          setLoading(false)\r\n          return\r\n        }\r\n\r\n        const { data: { publicUrl } } = supabase.storage\r\n          .from('profiles')\r\n          .getPublicUrl(filePath)\r\n\r\n        profileImageUrl = publicUrl\r\n      }\r\n\r\n      // 2. profiles 테이블 업데이트 (display_name, profile_image, bio)\r\n      const { error: profileError } = await supabase\r\n        .from('profiles')\r\n        .update({\r\n          name: formData.displayName,\r\n          profile_image: profileImageUrl || null,\r\n          bio: formData.bio,\r\n          updated_at: new Date().toISOString()\r\n        })\r\n        .eq('user_id', userId)\r\n\r\n      if (profileError) {\r\n        alert(`프로필 업데이트에 실패했습니다.\\n\\n에러: ${profileError.message}\\n코드: ${profileError.code}`)\r\n        setLoading(false)\r\n        return\r\n      }\r\n\r\n      // 3. sellers 테이블에 판매자 정보 등록 (display_name, profile_image 제거됨)\r\n      const insertData = {\r\n        user_id: userId,\r\n        real_name: formData.realName,\r\n        bio: formData.bio,\r\n        phone: formData.phone,\r\n        show_phone: formData.showPhone,\r\n        kakao_id: formData.kakaoId || null,\r\n        kakao_openchat: formData.kakaoOpenChat || null,\r\n        whatsapp: formData.whatsapp || null,\r\n        website: formData.website || null,\r\n        preferred_contact: formData.preferredContact,\r\n        account_number: formData.accountNumber,\r\n        account_holder: formData.accountHolder,\r\n        bank_name: formData.bankName,\r\n        business_number: formData.isBusiness ? formData.businessNumber : null,\r\n        is_business: formData.isBusiness,\r\n        certificates: null,\r\n        experience: null,\r\n        status: 'pending_review'\r\n      }\r\n\r\n      const { data: seller, error: sellerError } = await supabase\r\n        .from('sellers')\r\n        .insert(insertData)\r\n        .select()\r\n        .single()\r\n\r\n      if (sellerError) {\r\n        alert(`판매자 등록에 실패했습니다.\\n\\n에러: ${sellerError.message}\\n코드: ${sellerError.code}\\n\\n관리자에게 문의해주세요.`)\r\n        setLoading(false)\r\n        return\r\n      }\r\n\r\n      alert('판매자로 등록되었습니다! 서비스를 등록하세요.')\r\n\r\n      router.push('/mypage/seller/dashboard')\r\n      router.refresh()\r\n\r\n    } catch (error: unknown) {\r\n      const message = error instanceof Error ? error.message : '알 수 없는 오류가 발생했습니다'\r\n      alert(`판매자 등록 중 오류가 발생했습니다.\\n\\n${message}`)\r\n      setLoading(false)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const nextStep = () => {\r\n    if (currentStep < 4) {\r\n      setCurrentStep((currentStep + 1) as Step)\r\n    }\r\n  }\r\n\r\n  const prevStep = () => {\r\n    if (currentStep > 1) {\r\n      setCurrentStep((currentStep - 1) as Step)\r\n    }\r\n  }\r\n\r\n  const canProceed = () => {\r\n    let result = false\r\n    switch (currentStep) {\r\n      case 1:\r\n        result = isVerified && !!formData.accountNumber &&\r\n               !!formData.accountHolder && !!formData.bankName\r\n        break\r\n      case 2:\r\n        // 프로필 이미지: 새로 업로드했거나 기존 이미지가 있으면 통과\r\n        const hasProfileImage = !!formData.profileImage || !!initialProfile?.profile_image\r\n        result = !!formData.displayName && formData.bio.length >= 50 && hasProfileImage\r\n        break\r\n      case 3:\r\n        result = true // 연락처는 선택사항\r\n        break\r\n      case 4:\r\n        result = formData.termsAgree && formData.commissionAgree && formData.refundAgree\r\n        break\r\n      default:\r\n        result = false\r\n    }\r\n    return result\r\n  }\r\n\r\n  return (\r\n    <MypageLayoutWrapper mode=\"buyer\">\r\n      <div className=\"py-8 px-4\">\r\n        {/* 상단 네비게이션 */}\r\n        <div className=\"mb-6\">\r\n          <Link\r\n            href=\"/mypage\"\r\n            className=\"text-gray-600 hover:text-gray-900 flex items-center gap-2\"\r\n          >\r\n            <i className=\"fas fa-arrow-left\"></i>\r\n            <span>마이페이지로</span>\r\n          </Link>\r\n        </div>\r\n\r\n        {/* 페이지 헤더 */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-xl font-bold text-gray-900\">판매자 등록</h1>\r\n          <p className=\"text-gray-600 mt-1 text-sm\">재능을 판매하기 위해 판매자 정보를 입력해주세요</p>\r\n        </div>\r\n\r\n        {/* 진행 단계 표시 */}\r\n        <div className=\"max-w-4xl mb-8\">\r\n          <div className=\"flex items-center justify-between\">\r\n            {[1, 2, 3, 4].map((step) => (\r\n              <div key={step} className=\"flex items-center flex-1\">\r\n                <div className={`flex items-center justify-center w-10 h-10 rounded-full font-bold ${\r\n                  currentStep >= step ? 'bg-brand-primary text-white' : 'bg-gray-200 text-gray-500'\r\n                }`}>\r\n                  {step}\r\n                </div>\r\n                {step < 4 && (\r\n                  <div className={`flex-1 h-1 mx-2 ${\r\n                    currentStep > step ? 'bg-brand-primary' : 'bg-gray-200'\r\n                  }`}></div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"flex justify-between mt-2 text-sm\">\r\n            <span className={currentStep === 1 ? 'text-brand-primary font-medium' : 'text-gray-500'}>신원인증</span>\r\n            <span className={currentStep === 2 ? 'text-brand-primary font-medium' : 'text-gray-500'}>프로필</span>\r\n            <span className={currentStep === 3 ? 'text-brand-primary font-medium' : 'text-gray-500'}>연락처</span>\r\n            <span className={currentStep === 4 ? 'text-brand-primary font-medium' : 'text-gray-500'}>약관동의</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"max-w-4xl\">\r\n          {/* 1단계: 신원 인증 */}\r\n          {currentStep === 1 && (\r\n            <div className=\"bg-white rounded-lg border border-gray-200 p-6 mb-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-6\">1단계: 신원 인증</h2>\r\n              <div className=\"space-y-4\">\r\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4\">\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <i className=\"fas fa-info-circle text-blue-500 mt-1\"></i>\r\n                    <div>\r\n                      <p className=\"text-sm font-medium text-blue-900\">본인인증 안내</p>\r\n                      <p className=\"text-sm text-blue-700 mt-1\">\r\n                        NICE 평가정보를 통한 휴대폰 본인인증이 필요합니다. 인증 완료 시 실명과 휴대폰 번호가 자동으로 입력됩니다.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    본인인증 *\r\n                  </label>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={handleNiceVerification}\r\n                    disabled={isVerified}\r\n                    className={`w-full px-6 py-4 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 ${\r\n                      isVerified\r\n                        ? 'bg-green-100 text-green-800 cursor-not-allowed'\r\n                        : 'bg-brand-primary text-white hover:bg-[#1a4d8f]'\r\n                    }`}\r\n                  >\r\n                    <i className={`fas ${isVerified ? 'fa-check-circle' : 'fa-shield-alt'}`}></i>\r\n                    {isVerified ? '본인인증 완료' : 'NICE 휴대폰 본인인증'}\r\n                  </button>\r\n                  {!isVerified && (\r\n                    <p className=\"text-sm text-gray-500 mt-2\">\r\n                      클릭하여 NICE 평가정보 본인인증을 진행해주세요\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {isVerified && (\r\n                  <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                    <div className=\"flex items-start gap-3\">\r\n                      <i className=\"fas fa-check-circle text-green-600 mt-1\"></i>\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"text-sm font-medium text-green-900 mb-2\">인증 완료</p>\r\n                        <div className=\"space-y-1\">\r\n                          <p className=\"text-sm text-green-800\">\r\n                            <span className=\"font-medium\">이름:</span> {formData.realName}\r\n                          </p>\r\n                          <p className=\"text-sm text-green-800\">\r\n                            <span className=\"font-medium\">휴대폰:</span> {formData.phone}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"border-t pt-4 mt-6\">\r\n                  <h3 className=\"font-medium text-gray-900 mb-4\">정산 계좌 정보</h3>\r\n\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label htmlFor=\"bankName\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                        은행명 *\r\n                      </label>\r\n                      <select\r\n                        id=\"bankName\"\r\n                        value={formData.bankName}\r\n                        onChange={(e) => setFormData({ ...formData, bankName: e.target.value })}\r\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                        required\r\n                      >\r\n                        <option value=\"\">선택하세요</option>\r\n                        <option value=\"KB국민은행\">KB국민은행</option>\r\n                        <option value=\"신한은행\">신한은행</option>\r\n                        <option value=\"우리은행\">우리은행</option>\r\n                        <option value=\"하나은행\">하나은행</option>\r\n                        <option value=\"NH농협은행\">NH농협은행</option>\r\n                        <option value=\"IBK기업은행\">IBK기업은행</option>\r\n                        <option value=\"카카오뱅크\">카카오뱅크</option>\r\n                        <option value=\"토스뱅크\">토스뱅크</option>\r\n                      </select>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                        예금주명 *\r\n                      </label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={formData.accountHolder}\r\n                        onChange={(e) => setFormData({ ...formData, accountHolder: e.target.value })}\r\n                        placeholder=\"홍길동\"\r\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"mt-4\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      계좌번호 *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={formData.accountNumber}\r\n                      onChange={(e) => setFormData({ ...formData, accountNumber: e.target.value })}\r\n                      placeholder=\"123-456-789012\"\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"border-t pt-4 mt-6\">\r\n                  <label className=\"flex items-center gap-2 mb-4\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={formData.isBusiness}\r\n                      onChange={(e) => setFormData({ ...formData, isBusiness: e.target.checked })}\r\n                      className=\"w-4 h-4 text-brand-primary border-gray-300 rounded focus:ring-brand-primary\"\r\n                    />\r\n                    <span className=\"text-sm font-medium text-gray-700\">사업자입니다</span>\r\n                  </label>\r\n\r\n                  {formData.isBusiness && (\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                        사업자 등록번호\r\n                      </label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={formData.businessNumber}\r\n                        onChange={(e) => setFormData({ ...formData, businessNumber: e.target.value })}\r\n                        placeholder=\"123-45-67890\"\r\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* 2단계: 판매자 프로필 */}\r\n          {currentStep === 2 && (\r\n            <div className=\"bg-white rounded-lg border border-gray-200 p-6 mb-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-6\">2단계: 판매자 프로필</h2>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    프로필 사진 *\r\n                  </label>\r\n                  {initialProfile?.profile_image && !formData.profileImage && (\r\n                    <div className=\"mb-3 bg-blue-50 border border-blue-200 rounded-lg p-3\">\r\n                      <p className=\"text-sm text-blue-800\">\r\n                        <i className=\"fas fa-info-circle mr-1\"></i>\r\n                        현재 회원 프로필 사진이 사용됩니다. 변경하려면 새 사진을 업로드하세요.\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                  <div className=\"space-y-3\">\r\n                    {profilePreview ? (\r\n                      <div className=\"flex items-center gap-4\">\r\n                        <img\r\n                          src={profilePreview}\r\n                          alt=\"프로필 미리보기\"\r\n                          className=\"w-32 h-32 object-cover rounded-full border border-gray-300\"\r\n                        />\r\n                        <div className=\"flex flex-col gap-2\">\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => {\r\n                              setFormData({ ...formData, profileImage: null })\r\n                              setProfilePreview(initialProfile?.profile_image || null)\r\n                            }}\r\n                            className=\"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm\"\r\n                          >\r\n                            <i className=\"fas fa-times mr-1\"></i>\r\n                            {formData.profileImage ? '변경 취소' : '이미지 제거'}\r\n                          </button>\r\n                          {initialProfile?.profile_image && formData.profileImage && (\r\n                            <p className=\"text-xs text-gray-500\">기존 이미지로 되돌아갑니다</p>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <label className=\"inline-block px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors cursor-pointer\">\r\n                        <input\r\n                          type=\"file\"\r\n                          accept=\"image/*\"\r\n                          onChange={handleProfileImageChange}\r\n                          className=\"hidden\"\r\n                        />\r\n                        <i className=\"fas fa-camera mr-2\"></i>\r\n                        프로필 사진 선택\r\n                      </label>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    판매자명 (활동명) *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.displayName}\r\n                    onChange={(e) => setFormData({ ...formData, displayName: e.target.value })}\r\n                    placeholder=\"예: 디자이너 홍길동\"\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                    required\r\n                  />\r\n                  <p className=\"text-sm text-gray-500 mt-1\">구매자에게 보여질 이름입니다</p>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    자기소개 * (최소 50자)\r\n                  </label>\r\n                  <textarea\r\n                    value={formData.bio}\r\n                    onChange={(e) => setFormData({ ...formData, bio: e.target.value })}\r\n                    rows={6}\r\n                    maxLength={300}\r\n                    placeholder=\"자신의 전문 분야, 경력, 강점 등을 소개해주세요\"\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                    required\r\n                  ></textarea>\r\n                  <p className={`text-sm mt-1 ${formData.bio.length < 50 ? 'text-red-600' : 'text-gray-500'}`}>\r\n                    {formData.bio.length}/50자\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* 3단계: 연락처 정보 */}\r\n          {currentStep === 3 && (\r\n            <div className=\"bg-white rounded-lg border border-gray-200 p-6 mb-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-6\">3단계: 연락처 정보 (선택)</h2>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"flex items-center gap-2 mb-2\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={formData.showPhone}\r\n                      onChange={(e) => setFormData({ ...formData, showPhone: e.target.checked })}\r\n                      className=\"w-4 h-4 text-brand-primary border-gray-300 rounded focus:ring-brand-primary\"\r\n                    />\r\n                    <span className=\"text-sm font-medium text-gray-700\">전화번호 공개</span>\r\n                  </label>\r\n                  {formData.showPhone && (\r\n                    <input\r\n                      type=\"tel\"\r\n                      value={formData.publicPhone}\r\n                      onChange={(e) => {\r\n                        const value = e.target.value.replace(/[^0-9-]/g, '')\r\n                        setFormData({ ...formData, publicPhone: value })\r\n                      }}\r\n                      placeholder=\"010-1234-5678\"\r\n                      pattern=\"[0-9-]*\"\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                    />\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    카카오톡 ID\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.kakaoId}\r\n                    onChange={(e) => setFormData({ ...formData, kakaoId: e.target.value })}\r\n                    placeholder=\"kakaotalk_id\"\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    카카오톡 오픈채팅 링크\r\n                  </label>\r\n                  <input\r\n                    type=\"url\"\r\n                    value={formData.kakaoOpenChat}\r\n                    onChange={(e) => setFormData({ ...formData, kakaoOpenChat: e.target.value })}\r\n                    placeholder=\"https://open.kakao.com/...\"\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    WhatsApp\r\n                  </label>\r\n                  <input\r\n                    type=\"tel\"\r\n                    value={formData.whatsapp}\r\n                    onChange={(e) => {\r\n                      const value = e.target.value.replace(/[^0-9]/g, '')\r\n                      setFormData({ ...formData, whatsapp: value })\r\n                    }}\r\n                    placeholder=\"821012345678 (국가번호 포함, 하이픈 없이)\"\r\n                    pattern=\"[0-9]*\"\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                  />\r\n                  <p className=\"text-sm text-gray-500 mt-1\">\r\n                    클릭 시 바로 WhatsApp 채팅 연결됩니다 (예: 821012345678)\r\n                  </p>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    개인 웹사이트/블로그\r\n                  </label>\r\n                  <input\r\n                    type=\"url\"\r\n                    value={formData.website}\r\n                    onChange={(e) => setFormData({ ...formData, website: e.target.value })}\r\n                    placeholder=\"https://...\"\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    선호하는 연락 수단 (복수 선택 가능)\r\n                  </label>\r\n                  <div className=\"space-y-2\">\r\n                    {['플랫폼 메시지', '카카오톡', 'WhatsApp', '이메일', '전화'].map((contact) => (\r\n                      <label key={contact} className=\"flex items-center gap-2\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={formData.preferredContact.includes(contact)}\r\n                          onChange={() => handlePreferredContactToggle(contact)}\r\n                          className=\"w-4 h-4 text-brand-primary border-gray-300 rounded focus:ring-brand-primary\"\r\n                        />\r\n                        <span className=\"text-sm text-gray-700\">{contact}</span>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* 4단계: 약관 동의 */}\r\n          {currentStep === 4 && (\r\n            <div className=\"bg-white rounded-lg border border-gray-200 p-6 mb-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-6\">4단계: 운영 정책 동의</h2>\r\n              <div className=\"space-y-4\">\r\n                <div className=\"border rounded-lg p-4\">\r\n                  <label className=\"flex items-start gap-3\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={formData.termsAgree}\r\n                      onChange={(e) => setFormData({ ...formData, termsAgree: e.target.checked })}\r\n                      className=\"w-5 h-5 text-brand-primary border-gray-300 rounded focus:ring-brand-primary mt-0.5\"\r\n                      required\r\n                    />\r\n                    <div className=\"flex-1\">\r\n                      <span className=\"font-medium text-gray-900\">판매자 이용약관 동의 (필수)</span>\r\n                      <p className=\"text-sm text-gray-600 mt-1\">\r\n                        판매자로서 준수해야 할 규정과 책임사항에 동의합니다.\r\n                      </p>\r\n                    </div>\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"border rounded-lg p-4\">\r\n                  <label className=\"flex items-start gap-3\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={formData.commissionAgree}\r\n                      onChange={(e) => setFormData({ ...formData, commissionAgree: e.target.checked })}\r\n                      className=\"w-5 h-5 text-brand-primary border-gray-300 rounded focus:ring-brand-primary mt-0.5\"\r\n                      required\r\n                    />\r\n                    <div className=\"flex-1\">\r\n                      <span className=\"font-medium text-gray-900\">수수료 정책 확인 (필수)</span>\r\n                      <p className=\"text-sm text-gray-600 mt-1\">\r\n                        거래 금액의 20% 플랫폼 수수료가 부과됩니다.\r\n                      </p>\r\n                    </div>\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"border rounded-lg p-4\">\r\n                  <label className=\"flex items-start gap-3\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={formData.refundAgree}\r\n                      onChange={(e) => setFormData({ ...formData, refundAgree: e.target.checked })}\r\n                      className=\"w-5 h-5 text-brand-primary border-gray-300 rounded focus:ring-brand-primary mt-0.5\"\r\n                      required\r\n                    />\r\n                    <div className=\"flex-1\">\r\n                      <span className=\"font-medium text-gray-900\">환불 정책 동의 (필수)</span>\r\n                      <p className=\"text-sm text-gray-600 mt-1\">\r\n                        작업 시작 전 취소 시 전액 환불, 진행 중 환불은 협의를 통해 결정됩니다.\r\n                      </p>\r\n                    </div>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* 네비게이션 버튼 */}\r\n          <div className=\"flex gap-3\">\r\n            {currentStep > 1 && (\r\n              <button\r\n                type=\"button\"\r\n                onClick={prevStep}\r\n                className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium\"\r\n              >\r\n                <i className=\"fas fa-arrow-left mr-2\"></i>\r\n                이전\r\n              </button>\r\n            )}\r\n\r\n            {currentStep < 4 ? (\r\n              <button\r\n                type=\"button\"\r\n                onClick={nextStep}\r\n                disabled={!canProceed()}\r\n                className=\"flex-1 px-6 py-3 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors font-medium disabled:bg-gray-400 disabled:cursor-not-allowed\"\r\n              >\r\n                다음\r\n                <i className=\"fas fa-arrow-right ml-2\"></i>\r\n              </button>\r\n            ) : (\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleSubmit}\r\n                disabled={!canProceed() || loading}\r\n                className=\"flex-1 px-6 py-3 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors font-medium disabled:bg-gray-400 disabled:cursor-not-allowed\"\r\n              >\r\n                {loading ? (\r\n                  <>\r\n                    <i className=\"fas fa-spinner fa-spin mr-2\"></i>\r\n                    등록 중...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <i className=\"fas fa-check mr-2\"></i>\r\n                    판매자 등록 완료\r\n                  </>\r\n                )}\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </MypageLayoutWrapper>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\register\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\reviews\\SellerReviewsClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\reviews\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\services\\SellerServicesClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'rejectedRevision' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":50,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":50,"endColumn":35}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport Link from 'next/link'\r\nimport EmptyState from '@/components/common/EmptyState'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { logger } from '@/lib/logger'\r\nimport MypageLayoutWrapper from '@/components/mypage/MypageLayoutWrapper'\r\nimport type { Service } from '@/types/common'\r\n\r\ntype ServiceStatus = 'all' | 'active' | 'inactive' | 'pending'\r\n\r\ninterface ServiceWithRejection extends Service {\r\n  rejectedRevision?: {\r\n    id: string\r\n    rejection_reason: string\r\n  }\r\n}\r\n\r\ninterface Props {\r\n  initialServices: ServiceWithRejection[]\r\n  statusFilter: ServiceStatus\r\n  statusCounts: {\r\n    all: number\r\n    active: number\r\n    inactive: number\r\n    pending: number\r\n  }\r\n}\r\n\r\nexport default function SellerServicesClient({ initialServices, statusFilter, statusCounts }: Props) {\r\n  const [searchQuery, setSearchQuery] = useState('')\r\n  const [services, setServices] = useState(initialServices)\r\n\r\n  async function handleDismissRejection(revisionId: string) {\r\n    if (!confirm('이 반려 메시지를 삭제하시겠습니까?')) return\r\n\r\n    try {\r\n      const supabase = createClient()\r\n      const { error } = await supabase\r\n        .from('service_revisions')\r\n        .delete()\r\n        .eq('id', revisionId)\r\n\r\n      if (error) throw error\r\n\r\n      // UI 업데이트\r\n      setServices(services.map((service: ServiceWithRejection) => {\r\n        if (service.rejectedRevision?.id === revisionId) {\r\n          const { rejectedRevision, ...rest } = service\r\n          return rest\r\n        }\r\n        return service\r\n      }))\r\n\r\n      alert('반려 메시지가 삭제되었습니다.')\r\n    } catch (err: unknown) {\r\n      logger.error('반려 메시지 삭제 실패:', err)\r\n      alert('삭제에 실패했습니다: ' + (err instanceof Error ? err.message : '알 수 없는 오류'))\r\n    }\r\n  }\r\n\r\n  async function handleToggleStatus(serviceId: string, currentStatus: string) {\r\n    const newStatus = currentStatus === 'active' ? 'inactive' : 'active'\r\n    const message = newStatus === 'active'\r\n      ? '서비스를 활성화하시겠습니까? 고객에게 다시 노출됩니다.'\r\n      : '서비스를 일시정지하시겠습니까? 고객에게 노출되지 않습니다.'\r\n\r\n    if (!confirm(message)) return\r\n\r\n    try {\r\n      const supabase = createClient()\r\n      const { error } = await supabase\r\n        .from('services')\r\n        .update({ status: newStatus })\r\n        .eq('id', serviceId)\r\n\r\n      if (error) throw error\r\n\r\n      // UI 업데이트\r\n      setServices(services.map((service: ServiceWithRejection) =>\r\n        service.id === serviceId ? { ...service, status: newStatus } : service\r\n      ))\r\n\r\n      alert(newStatus === 'active' ? '서비스가 활성화되었습니다.' : '서비스가 일시정지되었습니다.')\r\n    } catch (err: unknown) {\r\n      logger.error('상태 변경 실패:', err)\r\n      alert('상태 변경에 실패했습니다: ' + (err instanceof Error ? err.message : '알 수 없는 오류'))\r\n    }\r\n  }\r\n\r\n  async function handleDeleteService(serviceId: string, serviceTitle: string) {\r\n    if (!confirm(`\"${serviceTitle}\" 서비스를 삭제하시겠습니까?\\n\\n⚠️ 이 작업은 되돌릴 수 없습니다.\\n- 진행 중인 주문이 있는 경우 삭제할 수 없습니다.\\n- 모든 통계 데이터가 함께 삭제됩니다.`)) return\r\n\r\n    try {\r\n      const supabase = createClient()\r\n\r\n      // 1. 진행 중인 주문 확인\r\n      const { data: activeOrders, error: ordersError } = await supabase\r\n        .from('orders')\r\n        .select('id')\r\n        .eq('service_id', serviceId)\r\n        .in('status', ['paid', 'in_progress', 'delivered'])\r\n        .limit(1)\r\n\r\n      if (ordersError) throw ordersError\r\n\r\n      if (activeOrders && activeOrders.length > 0) {\r\n        alert('진행 중인 주문이 있어 삭제할 수 없습니다.\\n모든 주문이 완료되거나 취소된 후 삭제할 수 있습니다.')\r\n        return\r\n      }\r\n\r\n      // 2. 서비스 삭제 (CASCADE로 관련 데이터도 함께 삭제됨)\r\n      const { error: deleteError } = await supabase\r\n        .from('services')\r\n        .delete()\r\n        .eq('id', serviceId)\r\n\r\n      if (deleteError) throw deleteError\r\n\r\n      // UI 업데이트\r\n      setServices(services.filter((service: ServiceWithRejection) => service.id !== serviceId))\r\n\r\n      alert('서비스가 성공적으로 삭제되었습니다.')\r\n    } catch (err: unknown) {\r\n      logger.error('서비스 삭제 실패:', err)\r\n      alert('삭제에 실패했습니다: ' + (err instanceof Error ? err.message : '알 수 없는 오류'))\r\n    }\r\n  }\r\n\r\n  const filteredServices = services.filter(service => {\r\n    if (searchQuery) {\r\n      const query = searchQuery.toLowerCase()\r\n      return service.title?.toLowerCase().includes(query)\r\n    }\r\n    return true\r\n  })\r\n\r\n  const tabs = [\r\n    { value: 'all', label: '전체', count: statusCounts.all },\r\n    { value: 'active', label: '활성', count: statusCounts.active },\r\n    { value: 'inactive', label: '비활성', count: statusCounts.inactive },\r\n    { value: 'pending', label: '검토중', count: statusCounts.pending }\r\n  ]\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    switch (status) {\r\n      case 'active':\r\n        return <span className=\"px-3 py-1.5 bg-green-100 text-green-700 rounded-full text-xs font-medium flex items-center gap-1\">\r\n          <i className=\"fas fa-check-circle\"></i>\r\n          활성\r\n        </span>\r\n      case 'inactive':\r\n        return <span className=\"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-xs font-medium\">비활성</span>\r\n      case 'pending':\r\n        return <span className=\"px-3 py-1.5 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium flex items-center gap-1\">\r\n          <i className=\"fas fa-clock\"></i>\r\n          검토중\r\n        </span>\r\n      case 'rejected':\r\n        return <span className=\"px-3 py-1.5 bg-red-100 text-red-700 rounded-full text-xs font-medium flex items-center gap-1\">\r\n          <i className=\"fas fa-times-circle\"></i>\r\n          반려됨\r\n        </span>\r\n      case 'draft':\r\n        return <span className=\"px-3 py-1.5 bg-blue-100 text-blue-700 rounded-full text-xs font-medium\">임시저장</span>\r\n      default:\r\n        return <span className=\"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-xs font-medium\">{status}</span>\r\n    }\r\n  }\r\n\r\n  return (\r\n    <MypageLayoutWrapper mode=\"seller\">\r\n      <div className=\"py-8 px-4\">\r\n        <div className=\"mb-8 flex items-center justify-between\">\r\n          <div>\r\n            <h1 className=\"text-xl font-bold text-gray-900\">서비스 관리</h1>\r\n            <p className=\"text-gray-600 mt-1 text-sm\">내 서비스를 관리하세요</p>\r\n          </div>\r\n          <Link\r\n            href=\"/mypage/seller/services/new\"\r\n            className=\"px-6 py-3 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors font-medium\"\r\n          >\r\n            <i className=\"fas fa-plus mr-2\"></i>\r\n            새 서비스 등록\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg border border-gray-200 mb-6\">\r\n          <div className=\"flex items-center overflow-x-auto\">\r\n            {tabs.map((tab) => (\r\n              <Link\r\n                key={tab.value}\r\n                href={`/mypage/seller/services?status=${tab.value}`}\r\n                className={`flex-shrink-0 px-6 py-4 font-medium text-sm border-b-2 transition-colors whitespace-nowrap ${\r\n                  statusFilter === tab.value\r\n                    ? 'border-brand-primary text-brand-primary'\r\n                    : 'border-transparent text-gray-600 hover:text-gray-900'\r\n                }`}\r\n              >\r\n                {tab.label}\r\n                {tab.count > 0 && (\r\n                  <span className={`ml-2 px-2 py-0.5 rounded-full text-xs ${\r\n                    statusFilter === tab.value\r\n                      ? 'bg-brand-primary text-white'\r\n                      : 'bg-gray-200 text-gray-600'\r\n                  }`}>\r\n                    {tab.count}\r\n                  </span>\r\n                )}\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg border border-gray-200 p-4 mb-6\">\r\n          <input\r\n            type=\"text\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            placeholder=\"서비스 검색...\"\r\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-4 text-sm text-gray-600\">\r\n          총 <span className=\"font-bold text-gray-900\">{filteredServices.length}</span>개의 서비스\r\n        </div>\r\n\r\n        {filteredServices.length > 0 ? (\r\n          <div className=\"space-y-4\">\r\n            {filteredServices.map((service) => (\r\n              <div key={service.id} className=\"bg-white border border-gray-200 rounded-lg overflow-hidden hover:border-brand-primary transition-colors\">\r\n                <div className=\"flex\">\r\n                  {/* 왼쪽 썸네일 */}\r\n                  <div className=\"w-48 h-32 bg-gray-100 flex items-center justify-center flex-shrink-0\">\r\n                    {service.thumbnail_url ? (\r\n                      <img src={service.thumbnail_url} alt={service.title} className=\"w-full h-full object-cover\" />\r\n                    ) : (\r\n                      <i className=\"fas fa-image text-gray-400 text-3xl\"></i>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* 오른쪽 내용 */}\r\n                  <div className=\"flex-1 p-4 flex flex-col\">\r\n                    <div className=\"flex items-start justify-between mb-2\">\r\n                      <h3 className=\"text-lg font-bold text-gray-900 flex-1\">{service.title}</h3>\r\n                      <div className=\"flex gap-2\">\r\n                        {getStatusBadge(service.status)}\r\n                        {service.hasPendingRevision && (\r\n                          <span className=\"px-3 py-1.5 bg-orange-100 text-orange-800 rounded-full text-xs font-medium flex items-center gap-1\">\r\n                            <i className=\"fas fa-hourglass-half\"></i>\r\n                            승인 대기중\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <p className=\"text-sm text-gray-600 mb-3 line-clamp-2 flex-1\">{service.description}</p>\r\n\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center gap-4 text-sm text-gray-600\">\r\n                        <span className=\"font-medium text-gray-900\">{service.price?.toLocaleString()}원~</span>\r\n                        <span><i className=\"fas fa-eye mr-1\"></i>{service.view_count || 0}</span>\r\n                        <span><i className=\"fas fa-heart mr-1\"></i>{service.favorite_count || 0}</span>\r\n                        <span><i className=\"fas fa-shopping-cart mr-1\"></i>{service.order_count || 0}</span>\r\n                      </div>\r\n\r\n                      <div className=\"flex gap-2 flex-wrap\">\r\n                        <Link\r\n                          href={`/mypage/seller/services/${service.id}/edit`}\r\n                          className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium\"\r\n                        >\r\n                          <i className=\"fas fa-edit mr-1\"></i>\r\n                          수정\r\n                        </Link>\r\n                        <Link\r\n                          href={`/services/${service.id}`}\r\n                          target=\"_blank\"\r\n                          className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium\"\r\n                        >\r\n                          <i className=\"fas fa-eye mr-1\"></i>\r\n                          보기\r\n                        </Link>\r\n                        <Link\r\n                          href={`/mypage/seller/services/statistics?id=${service.id}`}\r\n                          className=\"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors text-sm font-medium\"\r\n                        >\r\n                          <i className=\"fas fa-chart-bar mr-1\"></i>\r\n                          통계\r\n                        </Link>\r\n\r\n                        {/* 활성화/일시정지 버튼 - active 또는 inactive 상태일 때만 표시 */}\r\n                        {(service.status === 'active' || service.status === 'inactive') && (\r\n                          <button\r\n                            onClick={() => handleToggleStatus(service.id, service.status)}\r\n                            className={`px-4 py-2 border rounded-lg transition-colors text-sm font-medium ${\r\n                              service.status === 'active'\r\n                                ? 'border-yellow-400 bg-yellow-50 text-yellow-700 hover:bg-yellow-100'\r\n                                : 'border-green-400 bg-green-50 text-green-700 hover:bg-green-100'\r\n                            }`}\r\n                          >\r\n                            <i className={`fas ${service.status === 'active' ? 'fa-pause' : 'fa-play'} mr-1`}></i>\r\n                            {service.status === 'active' ? '일시정지' : '활성화'}\r\n                          </button>\r\n                        )}\r\n\r\n                        {/* 삭제 버튼 */}\r\n                        <button\r\n                          onClick={() => handleDeleteService(service.id, service.title)}\r\n                          className=\"px-4 py-2 border border-red-300 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition-colors text-sm font-medium\"\r\n                        >\r\n                          <i className=\"fas fa-trash mr-1\"></i>\r\n                          삭제\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* 반려 메시지 */}\r\n                {service.rejectedRevision && (\r\n                  <div className=\"mt-3 mx-4 mb-4 p-4 bg-red-50 border-l-4 border-red-500 rounded\">\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center gap-2 mb-2\">\r\n                          <i className=\"fas fa-exclamation-circle text-red-500\"></i>\r\n                          <span className=\"font-bold text-red-800\">수정 요청이 반려되었습니다</span>\r\n                          <span className=\"text-xs text-red-600\">\r\n                            ({new Date(service.rejectedRevision.reviewed_at).toLocaleDateString('ko-KR')})\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-sm text-red-700 whitespace-pre-wrap\">\r\n                          {service.rejectedRevision.admin_note}\r\n                        </p>\r\n                      </div>\r\n                      <button\r\n                        onClick={() => handleDismissRejection(service.rejectedRevision.id)}\r\n                        className=\"ml-4 px-3 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors\"\r\n                      >\r\n                        <i className=\"fas fa-times mr-1\"></i>\r\n                        확인\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <EmptyState\r\n            icon=\"fa-briefcase\"\r\n            title=\"등록된 서비스가 없습니다\"\r\n            description=\"첫 서비스를 등록해보세요\"\r\n          />\r\n        )}\r\n      </div>\r\n    </MypageLayoutWrapper>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\services\\[id]\\edit\\EditServiceClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\services\\[id]\\edit\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\services\\new\\NewServiceClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\services\\new\\NewServiceClientV2.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\services\\new\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\services\\new\\steps\\Step1BasicInfo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\services\\new\\steps\\Step2Pricing.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\services\\new\\steps\\Step3Description.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\services\\new\\steps\\Step4Images.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\services\\new\\steps\\Step5Requirements.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\services\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\services\\statistics\\ServiceStatisticsClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'serviceId' is defined but never used. Allowed unused args must match /^_/u.","line":22,"column":89,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":98},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":115,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":115,"endColumn":50}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport MypageLayoutWrapper from '@/components/mypage/MypageLayoutWrapper'\r\nimport Link from 'next/link'\r\n\r\ninterface Props {\r\n  stats: {\r\n    serviceName: string\r\n    period: string\r\n    viewCount: number\r\n    favoriteCount: number\r\n    orderCount: number\r\n    revenue: number\r\n    avgRating: number\r\n    reviewCount: number\r\n  }\r\n  dailyViews: Array<{ date: string; views: number }>\r\n  ratingPercentages: number[]\r\n  serviceId?: string\r\n}\r\n\r\nexport default function ServiceStatisticsClient({ stats, dailyViews, ratingPercentages, serviceId }: Props) {\r\n  return (\r\n    <MypageLayoutWrapper mode=\"seller\">\r\n      <div className=\"w-full max-w-[1200px] px-4 py-4 sm:py-6 lg:py-8 mx-auto\">\r\n        {/* 상단 네비게이션 */}\r\n        <div className=\"mb-6\">\r\n          <Link\r\n            href=\"/mypage/seller/services\"\r\n            className=\"text-gray-600 hover:text-gray-900 flex items-center gap-2\"\r\n          >\r\n            <i className=\"fas fa-arrow-left\"></i>\r\n            <span>서비스 관리로</span>\r\n          </Link>\r\n        </div>\r\n\r\n        {/* 페이지 헤더 */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-xl font-bold text-gray-900\">서비스 통계</h1>\r\n          <p className=\"text-gray-600 mt-1 text-sm\">{stats.serviceName} - {stats.period}</p>\r\n        </div>\r\n\r\n        {/* 주요 지표 */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n          <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <span className=\"text-gray-600 text-sm\">조회수</span>\r\n              <i className=\"fas fa-eye text-blue-500 text-xl\"></i>\r\n            </div>\r\n            <div className=\"text-3xl font-bold text-gray-900\">{stats.viewCount}</div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <span className=\"text-gray-600 text-sm\">찜</span>\r\n              <i className=\"fas fa-heart text-red-500 text-xl\"></i>\r\n            </div>\r\n            <div className=\"text-3xl font-bold text-gray-900\">{stats.favoriteCount}</div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <span className=\"text-gray-600 text-sm\">주문 수</span>\r\n              <i className=\"fas fa-shopping-cart text-green-500 text-xl\"></i>\r\n            </div>\r\n            <div className=\"text-3xl font-bold text-gray-900\">{stats.orderCount}</div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <span className=\"text-gray-600 text-sm\">매출</span>\r\n              <i className=\"fas fa-sack-dollar text-purple-500 text-xl\"></i>\r\n            </div>\r\n            <div className=\"text-3xl font-bold text-gray-900\">{stats.revenue.toLocaleString()}원</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* 차트 */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\r\n          {/* 조회수 추이 */}\r\n          <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n            <h2 className=\"text-lg font-bold text-gray-900 mb-4\">일별 조회수</h2>\r\n            <div className=\"space-y-2\">\r\n              {dailyViews.map((day) => (\r\n                <div key={day.date} className=\"flex items-center gap-3\">\r\n                  <span className=\"text-sm text-gray-600 w-12\">{day.date}</span>\r\n                  <div className=\"flex-1 bg-gray-100 rounded-full h-6 overflow-hidden\">\r\n                    <div\r\n                      className=\"bg-brand-primary h-full rounded-full flex items-center justify-end pr-2\"\r\n                      style={{ width: `${(day.views / 25) * 100}%` }}\r\n                    >\r\n                      <span className=\"text-xs text-white font-medium\">{day.views}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* 평점 분포 */}\r\n          <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n            <h2 className=\"text-lg font-bold text-gray-900 mb-4\">평점 분포</h2>\r\n            <div className=\"flex items-center gap-4 mb-4\">\r\n              <div className=\"text-5xl font-bold text-gray-900\">{stats.avgRating}</div>\r\n              <div>\r\n                <div className=\"flex items-center gap-1 mb-1\">\r\n                  {[1, 2, 3, 4, 5].map((star) => (\r\n                    <i key={star} className={`fas fa-star ${star <= Math.floor(stats.avgRating) ? 'text-yellow-400' : 'text-gray-300'}`}></i>\r\n                  ))}\r\n                </div>\r\n                <div className=\"text-sm text-gray-600\">{stats.reviewCount}개의 리뷰</div>\r\n              </div>\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              {[5, 4, 3, 2, 1].map((rating, index) => {\r\n                const percentage = ratingPercentages[rating - 1] || 0\r\n                return (\r\n                  <div key={rating} className=\"flex items-center gap-3\">\r\n                    <span className=\"text-sm text-gray-600 w-12\">{rating}점</span>\r\n                    <div className=\"flex-1 bg-gray-100 rounded-full h-4 overflow-hidden\">\r\n                      <div\r\n                        className=\"bg-yellow-400 h-full rounded-full\"\r\n                        style={{ width: `${percentage}%` }}\r\n                      ></div>\r\n                    </div>\r\n                    <span className=\"text-sm text-gray-600 w-12 text-right\">{percentage.toFixed(0)}%</span>\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* 전환율 */}\r\n        <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n          <h2 className=\"text-lg font-bold text-gray-900 mb-4\">전환율</h2>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\r\n              <div className=\"text-sm text-gray-600 mb-2\">조회 → 찜</div>\r\n              <div className=\"text-2xl font-bold text-gray-900\">{((stats.favoriteCount / stats.viewCount) * 100).toFixed(1)}%</div>\r\n            </div>\r\n            <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\r\n              <div className=\"text-sm text-gray-600 mb-2\">조회 → 주문</div>\r\n              <div className=\"text-2xl font-bold text-gray-900\">{((stats.orderCount / stats.viewCount) * 100).toFixed(1)}%</div>\r\n            </div>\r\n            <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\r\n              <div className=\"text-sm text-gray-600 mb-2\">찜 → 주문</div>\r\n              <div className=\"text-2xl font-bold text-gray-900\">{((stats.orderCount / stats.favoriteCount) * 100).toFixed(1)}%</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </MypageLayoutWrapper>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\services\\statistics\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\statistics\\SellerStatisticsClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\seller\\statistics\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\settings\\SettingsClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\settings\\edit\\SettingsEditClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'data' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":76,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":76,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport MypageLayoutWrapper from '@/components/mypage/MypageLayoutWrapper'\r\nimport { createClient } from '@/lib/supabase/client'\r\n\r\ninterface ProfileData {\r\n  name?: string\r\n  email?: string\r\n  profile_image?: string | null\r\n  phone?: string | null\r\n  bio?: string | null\r\n}\r\n\r\ninterface Props {\r\n  profile: ProfileData | null\r\n  isSeller: boolean\r\n}\r\n\r\nexport default function SettingsEditClient({ profile, isSeller }: Props) {\r\n  const router = useRouter()\r\n  const [activeTab, setActiveTab] = useState('profile')\r\n  const [isLoading, setIsLoading] = useState(false)\r\n\r\n  // 프로필 정보\r\n  const [name, setName] = useState(profile?.name || '')\r\n  const [bio, setBio] = useState('')\r\n  const [profileImage, setProfileImage] = useState(profile?.profile_image || '')\r\n  const [uploading, setUploading] = useState(false)\r\n\r\n  // 비밀번호 변경\r\n  const [currentPassword, setCurrentPassword] = useState('')\r\n  const [newPassword, setNewPassword] = useState('')\r\n  const [confirmPassword, setConfirmPassword] = useState('')\r\n\r\n  // 알림 설정\r\n  const [orderNotification, setOrderNotification] = useState(true)\r\n  const [messageNotification, setMessageNotification] = useState(true)\r\n  const [reviewNotification, setReviewNotification] = useState(true)\r\n\r\n  const supabase = createClient()\r\n\r\n  // 프로필 이미지 업로드\r\n  const handleImageUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0]\r\n    if (!file) return\r\n\r\n    // 파일 크기 체크 (5MB)\r\n    if (file.size > 5 * 1024 * 1024) {\r\n      alert('파일 크기는 5MB 이하만 가능합니다.')\r\n      return\r\n    }\r\n\r\n    // 이미지 파일 체크\r\n    if (!file.type.startsWith('image/')) {\r\n      alert('이미지 파일만 업로드 가능합니다.')\r\n      return\r\n    }\r\n\r\n    try {\r\n      setUploading(true)\r\n\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n      if (!user) {\r\n        alert('로그인이 필요합니다.')\r\n        return\r\n      }\r\n\r\n      // 파일 확장자 추출\r\n      const fileExt = file.name.split('.').pop()\r\n      const fileName = `${user.id}_${Date.now()}.${fileExt}`\r\n      const filePath = `profiles/${fileName}`\r\n\r\n      // Supabase Storage에 업로드\r\n      const { data, error: uploadError } = await supabase.storage\r\n        .from('profiles')\r\n        .upload(filePath, file, {\r\n          upsert: true\r\n        })\r\n\r\n      if (uploadError) {\r\n        console.error('Upload error:', uploadError)\r\n        throw uploadError\r\n      }\r\n\r\n      // Public URL 가져오기\r\n      const { data: { publicUrl } } = supabase.storage\r\n        .from('profiles')\r\n        .getPublicUrl(filePath)\r\n\r\n      setProfileImage(publicUrl)\r\n      alert('프로필 이미지가 업로드되었습니다.')\r\n    } catch (error) {\r\n      console.error('Image upload error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\r\n      alert('이미지 업로드 중 오류가 발생했습니다.')\r\n    } finally {\r\n      setUploading(false)\r\n    }\r\n  }\r\n\r\n  // 프로필 저장\r\n  const handleSaveProfile = async () => {\r\n    try {\r\n      setIsLoading(true)\r\n\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n      if (!user) {\r\n        alert('로그인이 필요합니다.')\r\n        return\r\n      }\r\n\r\n      // API를 통해 프로필 업데이트 (RLS 우회)\r\n      const response = await fetch('/api/users/profile', {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          name,\r\n          profile_image: profileImage\r\n        })\r\n      })\r\n\r\n      const result = await response.json()\r\n\r\n      if (!response.ok) {\r\n        console.error('=== PROFILE UPDATE ERROR ===')\r\n        console.error('Status:', response.status)\r\n        console.error('Response:', result)\r\n        console.error('Error Message:', result.error instanceof Error ? result.error.message : String(result.error))\r\n        console.error('Error Details:', result.details)\r\n\r\n        // 더 자세한 오류 메시지\r\n        let errorMessage = '프로필 저장 중 오류가 발생했습니다.\\n\\n'\r\n\r\n        if (response.status === 500 && result.details && result.details.includes('SUPABASE_SERVICE_ROLE_KEY')) {\r\n          errorMessage += '서버 설정 오류: 관리자에게 문의해주세요.\\n'\r\n          errorMessage += '(환경 변수가 설정되지 않았습니다)'\r\n        } else {\r\n          errorMessage += `오류: ${result.error || '알 수 없는 오류'}\\n`\r\n          errorMessage += `코드: ${result.code || 'N/A'}\\n`\r\n          if (result.details) {\r\n            errorMessage += `상세: ${result.details}`\r\n          }\r\n        }\r\n\r\n        alert(errorMessage)\r\n        return\r\n      }\r\n\r\n      alert('프로필이 저장되었습니다.')\r\n      router.push('/mypage/settings')\r\n    } catch (error: unknown) {\r\n      console.error('Profile save error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\r\n      if (!(error instanceof Error) || !error.message) {\r\n        alert('프로필 저장 중 알 수 없는 오류가 발생했습니다.')\r\n      }\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  // 비밀번호 변경\r\n  const handleChangePassword = async () => {\r\n    try {\r\n      if (!currentPassword || !newPassword || !confirmPassword) {\r\n        alert('모든 필드를 입력해주세요.')\r\n        return\r\n      }\r\n\r\n      if (newPassword !== confirmPassword) {\r\n        alert('새 비밀번호가 일치하지 않습니다.')\r\n        return\r\n      }\r\n\r\n      if (newPassword.length < 6) {\r\n        alert('비밀번호는 최소 6자 이상이어야 합니다.')\r\n        return\r\n      }\r\n\r\n      setIsLoading(true)\r\n\r\n      const { error } = await supabase.auth.updateUser({\r\n        password: newPassword\r\n      })\r\n\r\n      if (error) throw error\r\n\r\n      alert('비밀번호가 변경되었습니다.')\r\n      setCurrentPassword('')\r\n      setNewPassword('')\r\n      setConfirmPassword('')\r\n      router.push('/mypage/settings')\r\n    } catch (error) {\r\n      console.error('Password change error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\r\n      alert('비밀번호 변경 중 오류가 발생했습니다.')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  // 알림 설정 저장\r\n  const handleSaveNotifications = async () => {\r\n    try {\r\n      setIsLoading(true)\r\n\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n      if (!user) {\r\n        alert('로그인이 필요합니다.')\r\n        return\r\n      }\r\n\r\n      // 알림 설정을 users 테이블이나 별도 notification_settings 테이블에 저장\r\n      const { error } = await supabase\r\n        .from('users')\r\n        .update({\r\n          notification_settings: {\r\n            order: orderNotification,\r\n            message: messageNotification,\r\n            review: reviewNotification\r\n          }\r\n        })\r\n        .eq('id', user.id)\r\n\r\n      if (error) throw error\r\n\r\n      alert('알림 설정이 저장되었습니다.')\r\n      router.push('/mypage/settings')\r\n    } catch (error) {\r\n      console.error('Notification settings save error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\r\n      alert('알림 설정 저장 중 오류가 발생했습니다.')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <MypageLayoutWrapper mode={isSeller ? 'seller' : 'buyer'}>\r\n      <div className=\"py-8 px-4\">\r\n        <div className=\"mb-8 flex items-center justify-between\">\r\n          <div>\r\n            <h1 className=\"text-xl font-bold text-gray-900\">설정 수정</h1>\r\n            <p className=\"text-gray-600 mt-1 text-sm\">계정 및 알림 설정을 수정하세요</p>\r\n          </div>\r\n          <button\r\n            onClick={() => router.push('/mypage/settings')}\r\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\r\n          >\r\n            <i className=\"fas fa-times mr-2\"></i>\r\n            취소\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"flex gap-6\">\r\n          {/* 탭 메뉴 */}\r\n          <div className=\"w-64 bg-white rounded-lg border border-gray-200 p-4\">\r\n            <button\r\n              onClick={() => setActiveTab('profile')}\r\n              className={`w-full px-4 py-2 rounded-lg text-left transition-colors ${\r\n                activeTab === 'profile' ? 'bg-brand-primary text-white' : 'text-gray-700 hover:bg-gray-100'\r\n              }`}\r\n            >\r\n              <i className=\"fas fa-user mr-2\"></i>\r\n              프로필\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('account')}\r\n              className={`w-full px-4 py-2 rounded-lg text-left transition-colors mt-2 ${\r\n                activeTab === 'account' ? 'bg-brand-primary text-white' : 'text-gray-700 hover:bg-gray-100'\r\n              }`}\r\n            >\r\n              <i className=\"fas fa-key mr-2\"></i>\r\n              계정 보안\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('notifications')}\r\n              className={`w-full px-4 py-2 rounded-lg text-left transition-colors mt-2 ${\r\n                activeTab === 'notifications' ? 'bg-brand-primary text-white' : 'text-gray-700 hover:bg-gray-100'\r\n              }`}\r\n            >\r\n              <i className=\"fas fa-bell mr-2\"></i>\r\n              알림 설정\r\n            </button>\r\n          </div>\r\n\r\n          {/* 설정 내용 */}\r\n          <div className=\"flex-1\">\r\n            {activeTab === 'profile' && (\r\n              <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n                <h2 className=\"text-xl font-bold text-gray-900 mb-6\">프로필 설정</h2>\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">프로필 이미지</label>\r\n                    <div className=\"flex items-center gap-4\">\r\n                      {profileImage ? (\r\n                        <img\r\n                          src={profileImage}\r\n                          alt=\"프로필 이미지\"\r\n                          className=\"w-20 h-20 rounded-full object-cover border-2 border-gray-200\"\r\n                        />\r\n                      ) : (\r\n                        <div className=\"w-20 h-20 bg-brand-primary rounded-full flex items-center justify-center text-white text-2xl font-bold\">\r\n                          {name?.[0] || profile?.name?.[0] || 'U'}\r\n                        </div>\r\n                      )}\r\n                      <div>\r\n                        <input\r\n                          type=\"file\"\r\n                          id=\"profile-image-upload\"\r\n                          accept=\"image/*\"\r\n                          onChange={handleImageUpload}\r\n                          disabled={uploading}\r\n                          className=\"hidden\"\r\n                        />\r\n                        <label\r\n                          htmlFor=\"profile-image-upload\"\r\n                          className={`inline-block px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm cursor-pointer ${\r\n                            uploading ? 'opacity-50 cursor-not-allowed' : ''\r\n                          }`}\r\n                        >\r\n                          {uploading ? '업로드 중...' : '변경'}\r\n                        </label>\r\n                        <p className=\"text-xs text-gray-500 mt-1\">JPG, PNG (최대 5MB)</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">이름</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={name}\r\n                      onChange={(e) => setName(e.target.value)}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">이메일</label>\r\n                    <input\r\n                      type=\"email\"\r\n                      defaultValue={profile?.email || ''}\r\n                      disabled\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">자기소개</label>\r\n                    <textarea\r\n                      rows={4}\r\n                      value={bio}\r\n                      onChange={(e) => setBio(e.target.value)}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                      placeholder=\"자기소개를 입력하세요\"\r\n                    ></textarea>\r\n                  </div>\r\n\r\n                  <button\r\n                    onClick={handleSaveProfile}\r\n                    disabled={isLoading}\r\n                    className=\"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  >\r\n                    {isLoading ? '저장 중...' : '저장'}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'account' && (\r\n              <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n                <h2 className=\"text-xl font-bold text-gray-900 mb-6\">계정 보안</h2>\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">현재 비밀번호</label>\r\n                    <input\r\n                      type=\"password\"\r\n                      value={currentPassword}\r\n                      onChange={(e) => setCurrentPassword(e.target.value)}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">새 비밀번호</label>\r\n                    <input\r\n                      type=\"password\"\r\n                      value={newPassword}\r\n                      onChange={(e) => setNewPassword(e.target.value)}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">비밀번호 확인</label>\r\n                    <input\r\n                      type=\"password\"\r\n                      value={confirmPassword}\r\n                      onChange={(e) => setConfirmPassword(e.target.value)}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent\"\r\n                    />\r\n                  </div>\r\n\r\n                  <button\r\n                    onClick={handleChangePassword}\r\n                    disabled={isLoading}\r\n                    className=\"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  >\r\n                    {isLoading ? '변경 중...' : '비밀번호 변경'}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'notifications' && (\r\n              <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n                <h2 className=\"text-xl font-bold text-gray-900 mb-6\">알림 설정</h2>\r\n                <div className=\"space-y-4\">\r\n                  <label className=\"flex items-center justify-between p-4 border border-gray-200 rounded-lg\">\r\n                    <div>\r\n                      <div className=\"font-medium text-gray-900\">주문 알림</div>\r\n                      <div className=\"text-sm text-gray-600\">새 주문이 들어오면 알림을 받습니다</div>\r\n                    </div>\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={orderNotification}\r\n                      onChange={(e) => setOrderNotification(e.target.checked)}\r\n                      className=\"w-5 h-5 text-brand-primary\"\r\n                    />\r\n                  </label>\r\n\r\n                  <label className=\"flex items-center justify-between p-4 border border-gray-200 rounded-lg\">\r\n                    <div>\r\n                      <div className=\"font-medium text-gray-900\">메시지 알림</div>\r\n                      <div className=\"text-sm text-gray-600\">새 메시지가 오면 알림을 받습니다</div>\r\n                    </div>\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={messageNotification}\r\n                      onChange={(e) => setMessageNotification(e.target.checked)}\r\n                      className=\"w-5 h-5 text-brand-primary\"\r\n                    />\r\n                  </label>\r\n\r\n                  <label className=\"flex items-center justify-between p-4 border border-gray-200 rounded-lg\">\r\n                    <div>\r\n                      <div className=\"font-medium text-gray-900\">리뷰 알림</div>\r\n                      <div className=\"text-sm text-gray-600\">새 리뷰가 등록되면 알림을 받습니다</div>\r\n                    </div>\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={reviewNotification}\r\n                      onChange={(e) => setReviewNotification(e.target.checked)}\r\n                      className=\"w-5 h-5 text-brand-primary\"\r\n                    />\r\n                  </label>\r\n\r\n                  <button\r\n                    onClick={handleSaveNotifications}\r\n                    disabled={isLoading}\r\n                    className=\"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-[#1a4d8f] transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  >\r\n                    {isLoading ? '저장 중...' : '저장'}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </MypageLayoutWrapper>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\settings\\edit\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\mypage\\settings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\payment\\[paymentRequestId]\\PaymentClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\payment\\[paymentRequestId]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\payment\\bank-transfer\\[orderId]\\BankTransferClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\payment\\bank-transfer\\[orderId]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\payment\\direct\\[orderId]\\DirectPaymentClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PortOne' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport * as PortOne from '@portone/browser-sdk/v2'\n\ninterface Order {\n  id: string\n  buyer_id: string\n  seller_id: string\n  service_id: string | null\n  amount: number\n  title: string\n  description: string | null\n  delivery_days: number\n  revision_count: number\n  status: string\n  merchant_uid: string\n  created_at: string\n}\n\ninterface Seller {\n  id: string\n  business_name: string | null\n  display_name: string | null\n  profile_image: string | null\n  user_id: string\n}\n\ninterface Buyer {\n  id: string\n  name: string | null\n  email: string | null\n  phone: string | null\n}\n\ninterface Props {\n  order: Order\n  seller: Seller | null\n  buyer: Buyer | null\n}\n\nexport default function DirectPaymentClient({ order, seller, buyer }: Props) {\n  const router = useRouter()\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [agreedToTerms, setAgreedToTerms] = useState(false)\n  const [paymentMethod, setPaymentMethod] = useState<'card' | 'bank'>('card')\n\n  const handlePayment = async () => {\n    if (!agreedToTerms) {\n      alert('구매 조건을 확인하고 동의해주세요')\n      return\n    }\n\n    if (isProcessing) return\n\n    // 클라이언트 사이드 금액 검증\n    if (order.amount < 1000 || order.amount > 100000000) {\n      alert('유효하지 않은 결제 금액입니다')\n      return\n    }\n\n    setIsProcessing(true)\n\n    try {\n      // 무통장 입금 선택 시\n      if (paymentMethod === 'bank') {\n        router.push(`/payment/bank-transfer/${order.id}`)\n        return\n      }\n\n      // 카드 결제 (PortOne 건너뛰고 바로 결제 완료 처리)\n      // 테스트용: 실제 결제 없이 바로 paid 상태로 변경\n      const verifyResponse = await fetch('/api/payments/mock-payment', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          order_id: order.id\n        })\n      })\n\n      if (!verifyResponse.ok) {\n        const error = await verifyResponse.json()\n        throw new Error(error.error || '결제 처리 실패')\n      }\n\n      // 성공\n      alert('결제가 완료되었습니다! (테스트 모드)')\n      router.push(`/mypage/buyer/orders/${order.id}`)\n      return\n\n      // 실제 PortOne 결제 (나중에 사용)\n      /*\n      if (!process.env.NEXT_PUBLIC_PORTONE_CHANNEL_KEY) {\n        alert('결제 채널이 설정되지 않았습니다.')\n        setIsProcessing(false)\n        return\n      }\n\n        storeId: process.env.NEXT_PUBLIC_PORTONE_STORE_ID!,\n        paymentId: order.merchant_uid,\n        orderName: order.title,\n        totalAmount: order.amount,\n        currency: 'CURRENCY_KRW',\n        channelKey: process.env.NEXT_PUBLIC_PORTONE_CHANNEL_KEY,\n        payMethod: 'CARD',\n        customer: {\n          fullName: buyer?.name || '구매자',\n          phoneNumber: buyer?.phone || undefined,\n          email: buyer?.email || undefined\n        },\n        redirectUrl: `${window.location.origin}/payment/complete`,\n        noticeUrls: [`${window.location.origin}/api/payments/webhook`],\n        customData: {\n          order_id: order.id,\n          purchase_type: 'direct'\n        }\n      })\n\n      if (response?.code != null) {\n        alert(`결제 실패: ${response.message}`)\n        setIsProcessing(false)\n        return\n      }\n\n      const verifyResponse = await fetch('/api/payments/verify-direct', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          payment_id: response?.paymentId,\n          order_id: order.id\n        })\n      })\n\n      if (!verifyResponse.ok) {\n        const error = await verifyResponse.json()\n        throw new Error(error.error || '결제 검증 실패')\n      }\n\n      alert('결제가 완료되었습니다!')\n      router.push(`/mypage/buyer/orders/${order.id}`)\n      */\n    } catch (error) {\n      console.error('Payment error:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n      alert(error instanceof Error ? error.message : '결제 중 오류가 발생했습니다')\n      setIsProcessing(false)\n    }\n  }\n\n  const sellerName = seller?.display_name || seller?.business_name || '판매자'\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 pt-16\">\n      <div className=\"container mx-auto px-4 py-8 max-w-2xl\">\n        {/* 헤더 */}\n        <div className=\"mb-6\">\n          <button\n            onClick={() => router.back()}\n            className=\"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4\"\n          >\n            <i className=\"fas fa-arrow-left\"></i>\n            <span>뒤로가기</span>\n          </button>\n          <h1 className=\"text-2xl font-bold text-gray-900\">결제하기</h1>\n        </div>\n\n        {/* 주문 정보 */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-4\">\n          <h2 className=\"text-lg font-bold text-gray-900 mb-4\">주문 정보</h2>\n\n          <div className=\"space-y-3\">\n            <div className=\"flex justify-between items-start\">\n              <span className=\"text-gray-600\">상품명</span>\n              <span className=\"font-medium text-gray-900 text-right\">{order.title}</span>\n            </div>\n\n            {order.description && (\n              <div className=\"flex justify-between items-start\">\n                <span className=\"text-gray-600\">설명</span>\n                <span className=\"text-sm text-gray-700 text-right max-w-xs\">\n                  {order.description}\n                </span>\n              </div>\n            )}\n\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">판매자</span>\n              <span className=\"font-medium text-gray-900\">{sellerName}</span>\n            </div>\n\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">작업 기간</span>\n              <span className=\"text-gray-900\">{order.delivery_days}일</span>\n            </div>\n\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">수정 횟수</span>\n              <span className=\"text-gray-900\">{order.revision_count === 999 ? '무제한' : `${order.revision_count}회`}</span>\n            </div>\n\n            <div className=\"pt-4 border-t border-gray-200\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-lg font-bold text-gray-900\">총 결제금액</span>\n                <span className=\"text-2xl font-bold text-brand-primary\">\n                  {order.amount.toLocaleString()}원\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* 결제 수단 선택 */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-4\">\n          <h2 className=\"text-lg font-bold text-gray-900 mb-4\">결제 수단 선택</h2>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <button\n              type=\"button\"\n              onClick={() => setPaymentMethod('card')}\n              className={`p-4 rounded-lg border-2 transition-all ${\n                paymentMethod === 'card'\n                  ? 'border-brand-primary bg-blue-50'\n                  : 'border-gray-200 hover:border-gray-300'\n              }`}\n            >\n              <div className=\"flex flex-col items-center gap-2\">\n                <i className=\"fas fa-credit-card text-2xl text-brand-primary\"></i>\n                <span className=\"font-medium\">카드 결제</span>\n                <span className=\"text-xs text-gray-500\">PortOne 결제창</span>\n              </div>\n            </button>\n\n            <button\n              type=\"button\"\n              onClick={() => setPaymentMethod('bank')}\n              className={`p-4 rounded-lg border-2 transition-all ${\n                paymentMethod === 'bank'\n                  ? 'border-brand-primary bg-blue-50'\n                  : 'border-gray-200 hover:border-gray-300'\n              }`}\n            >\n              <div className=\"flex flex-col items-center gap-2\">\n                <i className=\"fas fa-university text-2xl text-brand-primary\"></i>\n                <span className=\"font-medium\">무통장 입금</span>\n                <span className=\"text-xs text-gray-500\">계좌 이체</span>\n              </div>\n            </button>\n          </div>\n        </div>\n\n        {/* 구매자 정보 */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-4\">\n          <h2 className=\"text-lg font-bold text-gray-900 mb-4\">구매자 정보</h2>\n\n          <div className=\"space-y-3\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">이름</span>\n              <span className=\"text-gray-900\">{buyer?.name || '-'}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">이메일</span>\n              <span className=\"text-gray-900\">{buyer?.email || '-'}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">연락처</span>\n              <span className=\"text-gray-900\">{buyer?.phone || '-'}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* 구매 조건 동의 */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\">\n          <h2 className=\"text-lg font-bold text-gray-900 mb-4\">구매 조건 확인 및 동의</h2>\n\n          <div className=\"space-y-3 mb-4\">\n            <div className=\"flex items-start gap-2 text-sm text-gray-600\">\n              <i className=\"fas fa-check text-green-600 mt-1\"></i>\n              <span>작업 완료 후 {order.delivery_days}일 이내에 납품됩니다</span>\n            </div>\n            <div className=\"flex items-start gap-2 text-sm text-gray-600\">\n              <i className=\"fas fa-check text-green-600 mt-1\"></i>\n              <span>최대 {order.revision_count === 999 ? '무제한' : `${order.revision_count}회`}까지 수정 요청이 가능합니다</span>\n            </div>\n            <div className=\"flex items-start gap-2 text-sm text-gray-600\">\n              <i className=\"fas fa-check text-green-600 mt-1\"></i>\n              <span>결제 후 환불은 판매자와 협의가 필요합니다</span>\n            </div>\n          </div>\n\n          <label className=\"flex items-center gap-3 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={agreedToTerms}\n              onChange={(e) => setAgreedToTerms(e.target.checked)}\n              className=\"w-5 h-5 text-brand-primary border-gray-300 rounded focus:ring-brand-primary\"\n            />\n            <span className=\"text-sm text-gray-900\">\n              위 구매 조건을 확인하였으며, 이에 동의합니다\n            </span>\n          </label>\n        </div>\n\n        {/* 결제 버튼 */}\n        <button\n          onClick={handlePayment}\n          disabled={!agreedToTerms || isProcessing}\n          className=\"w-full py-4 bg-brand-primary text-white rounded-lg font-bold text-lg hover:bg-[#1a4d8f] transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          {isProcessing ? (\n            <>\n              <i className=\"fas fa-spinner fa-spin mr-2\"></i>\n              결제 처리 중...\n            </>\n          ) : (\n            <>\n              {order.amount.toLocaleString()}원 결제하기\n            </>\n          )}\n        </button>\n\n        {/* 안내 메시지 */}\n        <div className=\"mt-6 bg-blue-50 rounded-lg p-4 border border-blue-200\">\n          <p className=\"text-sm text-blue-900\">\n            <i className=\"fas fa-info-circle mr-2\"></i>\n            결제 후 작업이 시작되며, 판매자와의 소통은 채팅을 통해 진행됩니다.\n          </p>\n        </div>\n      </div>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\payment\\direct\\[orderId]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\privacy\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\services\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getYoutubeVideoId' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":114,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2900,2903],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2900,2903],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":115,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2944,2947],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2944,2947],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":190,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":190,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4961,4964],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4961,4964],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":193,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":193,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5042,5045],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5042,5045],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":215,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":215,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5858,5861],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5858,5861],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":215,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":215,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":504,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":504,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19479,19482],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19479,19482],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { notFound } from 'next/navigation'\nimport Link from 'next/link'\nimport { createClient } from '@/lib/supabase/server'\nimport ViewTracker from '@/components/services/ViewTracker'\nimport FavoriteButton from '@/components/services/FavoriteButton'\nimport PortfolioGrid from '@/components/services/PortfolioGrid'\nimport ExpertResponseBanner from '@/components/services/ExpertResponseBanner'\nimport ContactSellerButton from '@/components/services/ContactSellerButton'\nimport PurchaseButton from '@/components/services/PurchaseButton'\nimport { logger } from '@/lib/logger'\nimport { getCategoryPath } from '@/lib/categories'\n\n// 동적 렌더링 강제 (찜 개수 실시간 반영)\nexport const dynamic = 'force-dynamic'\n\ninterface ServiceDetailProps {\n  params: Promise<{\n    id: string\n  }>\n}\n\n// YouTube 비디오 ID 추출 함수\nfunction getYoutubeVideoId(url: string | null): string | null {\n  if (!url) return null\n\n  const patterns = [\n    /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([^&\\n?#]+)/,\n    /youtube\\.com\\/embed\\/([^&\\n?#]+)/,\n    /youtube\\.com\\/v\\/([^&\\n?#]+)/\n  ]\n\n  for (const pattern of patterns) {\n    const match = url.match(pattern)\n    if (match) return match[1]\n  }\n\n  return null\n}\n\nexport default async function ServiceDetailPage({ params }: ServiceDetailProps) {\n  const { id } = await params\n  const supabase = await createClient()\n\n  // 현재 로그인한 사용자 확인\n  const { data: { user } } = await supabase.auth.getUser()\n\n  const { data: service, error } = await supabase\n    .from('services')\n    .select(`\n      *,\n      seller:sellers(\n        id,\n        business_name,\n        contact_hours,\n        tax_invoice_available,\n        user_id,\n        bio,\n        phone,\n        created_at\n      ),\n      service_categories(\n        category:categories(id, name, slug)\n      )\n    `)\n    .eq('id', id)\n    .single()\n\n  if (error) {\n    logger.error('Service fetch error:', error)\n    notFound()\n  }\n\n  if (!service) {\n    notFound()\n  }\n\n  // 이 서비스와 연결된 포트폴리오 조회 (portfolio_services 중간 테이블 사용)\n  let linkedPortfolios: Array<{\n    id: string\n    title: string\n    thumbnail_url: string | null\n    description: string\n    youtube_url: string | null\n    project_url: string | null\n    image_urls: string[]\n    tags: string[]\n    created_at: string\n  }> = []\n\n  try {\n    const { data: portfolioLinks, error: portfolioError } = await supabase\n      .from('portfolio_services')\n      .select(`\n        portfolio:seller_portfolio(\n          id,\n          title,\n          thumbnail_url,\n          description,\n          youtube_url,\n          project_url,\n          image_urls,\n          tags,\n          created_at\n        )\n      `)\n      .eq('service_id', id)\n      .order('created_at', { ascending: false })\n\n    if (portfolioError) {\n      logger.error('Portfolio links fetch error:', portfolioError)\n    } else if (portfolioLinks) {\n      // portfolios 데이터 구조 평탄화\n      linkedPortfolios = portfolioLinks\n        .map((link: any) => link.portfolio)\n        .filter((p: any) => p !== null && p !== undefined && typeof p === 'object')\n    }\n  } catch (error) {\n    logger.error('Portfolio fetch exception:', error)\n    // 에러가 있어도 페이지는 계속 렌더링 (포트폴리오만 없는 상태로)\n  }\n\n  // seller의 user 정보를 별도로 조회\n  if (service?.seller?.user_id) {\n    const { data: userData } = await supabase\n      .from('users')\n      .select('id, name, email, profile_image, created_at')\n      .eq('id', service.seller.user_id)\n      .single()\n\n    if (userData) {\n      service.seller.user = userData\n    }\n  }\n\n  // 이 서비스에 대한 리뷰 조회\n  const { data: serviceReviews } = await supabase\n    .from('reviews')\n    .select(`\n      id,\n      rating,\n      comment,\n      created_at,\n      buyer:users!buyer_id(id, name, profile_image),\n      seller_reply,\n      seller_reply_at\n    `)\n    .eq('service_id', id)\n    .eq('is_visible', true)\n    .order('created_at', { ascending: false })\n\n  // seller의 통계 정보 조회\n  const sellerStats = {\n    totalOrders: 0,\n    satisfactionRate: 0,\n    avgResponseTime: '10분 이내'\n  }\n\n  if (service?.seller?.id) {\n    // 총 거래 건수 (완료된 주문)\n    const { count: orderCount } = await supabase\n      .from('orders')\n      .select('*', { count: 'exact', head: true })\n      .eq('seller_id', service.seller.id)\n      .eq('status', 'completed')\n\n    sellerStats.totalOrders = orderCount || 0\n\n    // 만족도 계산 (평균 평점)\n    // 먼저 판매자의 모든 서비스 ID 조회\n    const { data: sellerServices } = await supabase\n      .from('services')\n      .select('id')\n      .eq('seller_id', service.seller.id)\n\n    if (sellerServices && sellerServices.length > 0) {\n      const serviceIds = sellerServices.map(s => s.id)\n\n      const { data: reviews } = await supabase\n        .from('reviews')\n        .select('rating')\n        .in('service_id', serviceIds)\n\n      if (reviews && reviews.length > 0) {\n        const avgRating = reviews.reduce((sum, r) => sum + r.rating, 0) / reviews.length\n        sellerStats.satisfactionRate = Math.round((avgRating / 5) * 100)\n      }\n    }\n  }\n\n  const categories = service.service_categories?.map((sc: any) => sc.category) || []\n\n  // 카테고리 경로 가져오기 (1차 > 2차 > 3차)\n  let categoryPath: any[] = []\n  if (categories.length > 0) {\n    // 첫 번째 카테고리의 전체 경로를 가져옴\n    categoryPath = await getCategoryPath(categories[0].id)\n  }\n\n  // 실제 리뷰 데이터로 평균 별점 계산\n  const averageRating = serviceReviews && serviceReviews.length > 0\n    ? (serviceReviews.reduce((sum, r) => sum + r.rating, 0) / serviceReviews.length).toFixed(1)\n    : '0.0'\n  const reviewCount = serviceReviews?.length || 0\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* 조회수 추적 */}\n      <ViewTracker serviceId={id} />\n\n      {/* 상단 네비게이션 (Breadcrumb) */}\n      <nav className=\"bg-white border-b mt-16\">\n        <div className=\"container-1200 px-4 py-4\">\n          <div className=\"flex items-center gap-2 text-sm\">\n            <Link href=\"/\" className=\"text-gray-500 hover:text-gray-700\">홈</Link>\n            {categoryPath.map((cat: any, index: number) => (\n              <div key={cat.id} className=\"flex items-center gap-2\">\n                <span className=\"text-gray-400\">/</span>\n                <Link\n                  href={`/categories/${cat.slug}`}\n                  className=\"text-gray-500 hover:text-gray-700\"\n                >\n                  {cat.name}\n                </Link>\n              </div>\n            ))}\n          </div>\n        </div>\n      </nav>\n\n      {/* 제목 및 판매자 프로필 영역 - 전체 가로 배경 */}\n      <div className=\"w-full\" style={{ background: 'radial-gradient(ellipse at center, #a7f3d0 0%, #d1fae5 50%, #ecfdf5 100%)' }}>\n        <div className=\"container-1200 px-4 py-8\">\n          <div className=\"flex flex-col lg:flex-row gap-5\">\n            {/* 왼쪽: 제목, 통계, 판매자 카드 */}\n            <div className=\"flex-1\">\n              <h1 className=\"text-2xl font-bold mb-6\">{service.title}</h1>\n\n              {/* 통계 */}\n              <div className=\"flex items-center gap-6 py-3 mb-6 text-sm relative z-10\">\n                <div className=\"flex items-center gap-2\">\n                  {/* 별점 5개 표시 */}\n                  {[1, 2, 3, 4, 5].map((star) => (\n                    <i\n                      key={star}\n                      className=\"fas fa-star text-yellow-400\"\n                    ></i>\n                  ))}\n                  <span className=\"font-bold ml-1\">{averageRating}</span>\n                  <span className=\"text-gray-500\">({reviewCount})</span>\n                </div>\n                <div className=\"flex items-center gap-2 text-gray-600\">\n                  <i className=\"fas fa-heart text-red-400\"></i>\n                  <span className=\"font-bold\">{service.wishlist_count || 0}</span>\n                </div>\n              </div>\n\n              {/* 판매자 정보 카드 */}\n              <div className=\"bg-white rounded-lg p-3 h-[70px] flex items-center\">\n                <div className=\"flex items-center gap-3 w-full\">\n                  {/* 프로필 이미지 */}\n                  <div className=\"w-[54px] h-[54px] bg-gray-200 rounded-full overflow-hidden flex-shrink-0\">\n                    {service.seller?.user?.profile_image ? (\n                      <img src={service.seller.user.profile_image} alt={service.seller.business_name} className=\"w-full h-full object-cover\" />\n                    ) : (\n                      <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\n                        <i className=\"fas fa-user text-xl\"></i>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* 정보 영역 */}\n                  <div className=\"flex-1 flex flex-col justify-center gap-1 min-w-0\">\n                    {/* 판매자명 */}\n                    <h3 className=\"font-bold text-sm leading-tight truncate\">\n                      {service.seller?.business_name}\n                    </h3>\n\n                    {/* 정보 한 줄 */}\n                    <div className=\"flex items-center gap-3 text-xs text-gray-600\">\n                      {/* 연락 가능 시간 */}\n                      {service.seller?.contact_hours && (\n                        <span className=\"whitespace-nowrap\">\n                          연락: {service.seller.contact_hours}\n                        </span>\n                      )}\n\n                      {/* 평균 응답 시간 */}\n                      <span className=\"whitespace-nowrap\">\n                        응답: 00분\n                      </span>\n\n                      {/* 세금계산서 */}\n                      <span className=\"whitespace-nowrap\">\n                        세금계산서: {service.seller?.tax_invoice_available ? (\n                          <span className=\"text-green-600 font-medium\">가능</span>\n                        ) : (\n                          <span className=\"text-gray-500\">불가</span>\n                        )}\n                      </span>\n                    </div>\n                  </div>\n\n                  {/* 버튼 */}\n                  <div className=\"flex gap-2 flex-shrink-0\">\n                    <button className=\"px-3 py-1.5 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-xs whitespace-nowrap\">\n                      <i className=\"far fa-comment mr-1\"></i> 문의\n                    </button>\n                    <button className=\"px-3 py-1.5 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-xs whitespace-nowrap\">\n                      <i className=\"far fa-user mr-1\"></i> 프로필\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              {/* 탭 메뉴 */}\n              <div className=\"flex gap-4 mt-6 border-b border-gray-200\">\n                <a href=\"#portfolio\" className=\"pb-3 px-2 text-sm hover:text-brand-primary hover:border-b-2 hover:border-brand-primary transition-colors\">\n                  포트폴리오\n                </a>\n                <a href=\"#description\" className=\"pb-3 px-2 text-sm hover:text-brand-primary hover:border-b-2 hover:border-brand-primary transition-colors\">\n                  서비스 설명\n                </a>\n                <a href=\"#price\" className=\"pb-3 px-2 text-sm hover:text-brand-primary hover:border-b-2 hover:border-brand-primary transition-colors\">\n                  가격 정보\n                </a>\n                <a href=\"#expert\" className=\"pb-3 px-2 text-sm hover:text-brand-primary hover:border-b-2 hover:border-brand-primary transition-colors\">\n                  전문가 정보\n                </a>\n                <a href=\"#reviews\" className=\"pb-3 px-2 text-sm hover:text-brand-primary hover:border-b-2 hover:border-brand-primary transition-colors\">\n                  리뷰\n                </a>\n              </div>\n            </div>\n\n            {/* 오른쪽: 썸네일 (배경색 영역 내부, 상단만 포함) */}\n            <div className=\"w-full lg:w-[350px] flex-shrink-0\">\n              <div className=\"bg-white rounded-xl overflow-hidden shadow-sm\">\n                <div className=\"h-[260px] relative bg-gray-100\">\n                  {service.thumbnail_url ? (\n                    <img\n                      src={service.thumbnail_url}\n                      alt={service.title}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  ) : (\n                    <div className=\"absolute inset-0 flex items-center justify-center text-gray-400\">\n                      <i className=\"fas fa-image text-[40px]\"></i>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* 메인 컨텐츠 영역 */}\n      <div className=\"container-1200 px-4 pb-8 pt-5\">\n        <div className=\"flex flex-col lg:flex-row gap-5\">\n          {/* 왼쪽: 서비스 설명 */}\n          <div className=\"flex-1 min-w-0 space-y-8\">\n            {/* 포트폴리오 */}\n            {linkedPortfolios && linkedPortfolios.length > 0 && (\n              <div id=\"portfolio\" className=\"bg-white rounded-xl shadow-sm p-6 scroll-mt-20\">\n                <h2 className=\"text-xl font-bold mb-6\">포트폴리오 ({linkedPortfolios.length})</h2>\n                <PortfolioGrid portfolios={linkedPortfolios} />\n              </div>\n            )}\n\n            {/* 서비스 설명 */}\n            <div id=\"description\" className=\"bg-white rounded-xl shadow-sm p-6 scroll-mt-20 overflow-hidden\">\n              <h2 className=\"text-xl font-bold mb-4\">서비스 설명</h2>\n              <div className=\"prose prose-lg max-w-none whitespace-pre-wrap break-words overflow-wrap-anywhere\" style={{ wordBreak: 'break-word', overflowWrap: 'anywhere' }}>\n                {service.description}\n              </div>\n            </div>\n\n            {/* 전문가 정보 */}\n            {service.seller && (\n              <div id=\"expert\" className=\"bg-white rounded-xl shadow-sm p-6 scroll-mt-20\">\n                <h2 className=\"text-xl font-bold mb-6\">전문가 정보</h2>\n\n                {/* 전문가 카드 */}\n                <div className=\"border border-gray-200 rounded-lg p-6\">\n                {/* 상단 알림 배너 (응답 시간) */}\n                <ExpertResponseBanner avgResponseTime={sellerStats.avgResponseTime} />\n\n                {/* 전문가 기본 정보 */}\n                <div className=\"flex items-start justify-between mb-6\">\n                  <div className=\"flex items-start gap-4\">\n                    {/* 프로필 이미지 */}\n                    <div className=\"w-16 h-16 rounded-full bg-brand-primary flex items-center justify-center text-white text-2xl font-bold flex-shrink-0\">\n                      {service.seller?.user?.profile_image ? (\n                        <img\n                          src={service.seller.user.profile_image}\n                          alt={service.seller.business_name}\n                          className=\"w-full h-full rounded-full object-cover\"\n                        />\n                      ) : (\n                        <span>{(service.seller?.business_name || 'U')[0]}</span>\n                      )}\n                    </div>\n\n                    {/* 이름 및 영업 시간 */}\n                    <div>\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <h3 className=\"text-lg font-bold text-gray-900\">\n                          {service.seller?.business_name}\n                        </h3>\n                        <span className=\"text-yellow-500\">\n                          <i className=\"fas fa-crown\"></i>\n                        </span>\n                      </div>\n                      <p className=\"text-sm text-gray-600 mb-1\">\n                        영업 가능 시간: {service.seller?.contact_hours || '9시 - 18시'}\n                      </p>\n                      <p className=\"text-sm text-gray-600\">\n                        평균 응답 시간: {sellerStats.avgResponseTime}\n                      </p>\n                      <div className=\"mt-2 flex gap-2\">\n                        <span className=\"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded\">\n                          결제 전 전화상담 제공\n                        </span>\n                        <button className=\"text-xs px-2 py-1 border border-gray-300 text-gray-700 rounded hover:bg-gray-50\">\n                          연락처 보기\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* 문의하기 버튼 */}\n                  <Link\n                    href=\"/chat\"\n                    className=\"px-6 py-2 border border-brand-primary text-brand-primary rounded-lg hover:bg-brand-primary hover:text-white transition-colors font-medium\"\n                  >\n                    문의하기\n                  </Link>\n                </div>\n\n                {/* 통계 정보 */}\n                <div className=\"grid grid-cols-4 gap-4 py-4 border-t border-gray-200\">\n                  <div className=\"text-center\">\n                    <div className=\"text-sm text-gray-600 mb-1\">총 거래 건수</div>\n                    <div className=\"text-lg font-bold text-gray-900\">{sellerStats.totalOrders}건</div>\n                  </div>\n                  <div className=\"text-center\">\n                    <div className=\"text-sm text-gray-600 mb-1\">만족도</div>\n                    <div className=\"text-lg font-bold text-gray-900\">{sellerStats.satisfactionRate}%</div>\n                  </div>\n                  <div className=\"text-center\">\n                    <div className=\"text-sm text-gray-600 mb-1\">회원구분</div>\n                    <div className=\"text-lg font-bold text-gray-900\">기업회원</div>\n                  </div>\n                  <div className=\"text-center\">\n                    <div className=\"text-sm text-gray-600 mb-1\">세금계산서</div>\n                    <div className=\"text-lg font-bold text-gray-900\">\n                      {service.seller?.tax_invoice_available ? '발행 가능' : '미발행'}\n                    </div>\n                  </div>\n                </div>\n\n                {/* 전문가 소개 */}\n                {service.seller?.bio && (\n                  <div className=\"mt-6 pt-6 border-t border-gray-200\">\n                    <h4 className=\"font-bold text-gray-900 mb-3\">전문가 소개</h4>\n                    <p className=\"text-gray-700 whitespace-pre-wrap leading-relaxed break-words overflow-wrap-anywhere\">\n                      {service.seller.bio}\n                    </p>\n                  </div>\n                )}\n              </div>\n              </div>\n            )}\n\n            {/* 리뷰 */}\n            <div id=\"reviews\" className=\"bg-white rounded-xl shadow-sm p-6 scroll-mt-20\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-xl font-bold\">\n                  리뷰 ({serviceReviews?.length || 0})\n                </h2>\n                {serviceReviews && serviceReviews.length > 0 && (\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"flex items-center gap-1\">\n                      {[1, 2, 3, 4, 5].map((star) => (\n                        <i\n                          key={star}\n                          className={`fas fa-star ${\n                            star <= Math.round(serviceReviews.reduce((sum, r) => sum + r.rating, 0) / serviceReviews.length)\n                              ? 'text-yellow-400'\n                              : 'text-gray-300'\n                          }`}\n                        ></i>\n                      ))}\n                    </div>\n                    <span className=\"font-bold text-lg\">\n                      {(serviceReviews.reduce((sum, r) => sum + r.rating, 0) / serviceReviews.length).toFixed(1)}\n                    </span>\n                  </div>\n                )}\n              </div>\n\n              {serviceReviews && serviceReviews.length > 0 ? (\n                <div className=\"space-y-6\">\n                  {serviceReviews.map((review: any) => (\n                    <div key={review.id} className=\"border-b border-gray-200 pb-6 last:border-0\">\n                      {/* 리뷰 헤더 */}\n                      <div className=\"flex items-start justify-between mb-3\">\n                        <div className=\"flex items-center gap-3\">\n                          {/* 프로필 이미지 */}\n                          <div className=\"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden\">\n                            {review.buyer?.profile_image ? (\n                              <img\n                                src={review.buyer.profile_image}\n                                alt={review.buyer.name}\n                                className=\"w-full h-full object-cover\"\n                              />\n                            ) : (\n                              <i className=\"fas fa-user text-gray-400\"></i>\n                            )}\n                          </div>\n                          <div>\n                            <div className=\"font-medium text-gray-900\">\n                              {review.buyer?.name || '익명'}\n                            </div>\n                            <div className=\"text-sm text-gray-500\">\n                              {new Date(review.created_at).toLocaleDateString('ko-KR')}\n                            </div>\n                          </div>\n                        </div>\n                        {/* 별점 */}\n                        <div className=\"flex items-center gap-1\">\n                          {[1, 2, 3, 4, 5].map((star) => (\n                            <i\n                              key={star}\n                              className={`fas fa-star text-sm ${\n                                star <= review.rating ? 'text-yellow-400' : 'text-gray-300'\n                              }`}\n                            ></i>\n                          ))}\n                        </div>\n                      </div>\n\n                      {/* 리뷰 내용 */}\n                      <p className=\"text-gray-700 mb-4 whitespace-pre-wrap\">\n                        {review.comment}\n                      </p>\n\n                      {/* 판매자 답변 */}\n                      {review.seller_reply && (\n                        <div className=\"bg-gray-50 rounded-lg p-4 ml-8\">\n                          <div className=\"flex items-center gap-2 mb-2\">\n                            <i className=\"fas fa-reply text-brand-primary\"></i>\n                            <span className=\"text-sm font-medium text-gray-900\">판매자 답변</span>\n                            <span className=\"text-xs text-gray-500\">\n                              {new Date(review.seller_reply_at).toLocaleDateString('ko-KR')}\n                            </span>\n                          </div>\n                          <p className=\"text-gray-700 whitespace-pre-wrap\">{review.seller_reply}</p>\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-12\">\n                  <i className=\"fas fa-star text-gray-300 text-5xl mb-4\"></i>\n                  <p className=\"text-gray-600\">아직 작성된 리뷰가 없습니다</p>\n                  <p className=\"text-sm text-gray-500 mt-2\">첫 번째 리뷰를 작성해보세요!</p>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* 오른쪽: 가격, 안전거래 */}\n          <div className=\"w-full lg:w-[350px] flex-shrink-0\">\n            <div className=\"sticky top-12 space-y-6\">\n              {/* 가격 정보 */}\n              <div id=\"price\" className=\"bg-white rounded-xl shadow-sm overflow-hidden scroll-mt-20\">\n                <div className=\"p-6\">\n                  <div className=\"text-2xl font-bold mb-1\">\n                    {service.price?.toLocaleString() || 0}원\n                  </div>\n                  <div className=\"text-sm text-gray-600 mb-6\">\n                    {service.delivery_days || 0}일 이내 완료 · {service.revision_count === 999 ? '무제한' : `${service.revision_count || 0}회`} 수정\n                  </div>\n\n                  {service.seller?.id && user && (\n                    <PurchaseButton\n                      sellerId={service.seller.id}\n                      serviceId={id}\n                      currentUserId={user.id}\n                      sellerUserId={service.seller.user_id}\n                      serviceTitle={service.title}\n                      servicePrice={service.price || 0}\n                      deliveryDays={service.delivery_days || 7}\n                      revisionCount={service.revision_count || 0}\n                      serviceDescription={service.description}\n                    />\n                  )}\n\n                  {service.seller?.id && user && service.seller.user_id !== user.id && (\n                    <ContactSellerButton sellerId={service.seller.id} serviceId={id} />\n                  )}\n\n                  <div className=\"flex gap-2 mt-3\">\n                    <FavoriteButton serviceId={id} />\n                    <button className=\"flex-1 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\">\n                      <i className=\"fas fa-share\"></i> 공유\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              {/* 안전거래 배지 */}\n              <div className=\"bg-blue-50 rounded-xl p-4 text-center\">\n                <i className=\"fas fa-shield-alt text-2xl text-brand-primary mb-2\"></i>\n                <h4 className=\"font-bold mb-1\">100% 안전거래</h4>\n                <p className=\"text-xs text-gray-600\">\n                  에스크로 결제 시스템으로<br/>\n                  안전하게 거래하세요\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\app\\terms\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\admin\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\admin\\Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\analytics\\PageViewTracker.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":28,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":28,"endColumn":22,"suggestions":[{"fix":{"range":[826,876],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { usePathname, useSearchParams } from 'next/navigation'\r\n\r\nexport function PageViewTracker() {\r\n  const pathname = usePathname()\r\n  const searchParams = useSearchParams()\r\n\r\n  useEffect(() => {\r\n    // Track page view\r\n    const trackPageView = async () => {\r\n      try {\r\n        const url = pathname + (searchParams.toString() ? `?${searchParams.toString()}` : '')\r\n\r\n        await fetch('/api/analytics/track', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            path: url,\r\n            referrer: document.referrer || undefined,\r\n          }),\r\n        })\r\n      } catch (error) {\r\n        // Silent failure - analytics should never break the app\r\n        console.debug('Analytics tracking failed:', error)\r\n      }\r\n    }\r\n\r\n    trackPageView()\r\n  }, [pathname, searchParams])\r\n\r\n  return null\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\categories\\CategoryFilter.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'categoryId' is defined but never used. Allowed unused args must match /^_/u.","line":10,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isAI' is defined but never used. Allowed unused args must match /^_/u.","line":10,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":58},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'currentSort' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":14,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":20}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport { useRouter, useSearchParams } from 'next/navigation'\n\ninterface CategoryFilterProps {\n  categoryId: string\n  isAI: boolean\n}\n\nexport default function CategoryFilter({ categoryId, isAI }: CategoryFilterProps) {\n  const router = useRouter()\n  const searchParams = useSearchParams()\n  const currentPrice = searchParams.get('price')\n  const currentSort = searchParams.get('sort') || 'popular'\n\n  const handlePriceChange = (priceRange: string) => {\n    const params = new URLSearchParams(searchParams)\n    if (priceRange) {\n      params.set('price', priceRange)\n    } else {\n      params.delete('price')\n    }\n    router.push(`?${params.toString()}`)\n  }\n\n  const handleReset = () => {\n    router.push('?')\n  }\n\n  return (\n    <div className=\"flex items-center gap-6 flex-wrap\">\n      {/* 가격 범위 */}\n      <div className=\"flex items-center gap-3\">\n        <span className=\"font-medium text-sm\">가격:</span>\n        <div className=\"flex items-center gap-2 flex-wrap\">\n          <label className=\"flex items-center cursor-pointer\">\n            <input\n              type=\"radio\"\n              name=\"price\"\n              className=\"mr-1.5\"\n              checked={!currentPrice}\n              onChange={() => handlePriceChange('')}\n            />\n            <span className=\"text-sm\">전체</span>\n          </label>\n          <label className=\"flex items-center cursor-pointer\">\n            <input\n              type=\"radio\"\n              name=\"price\"\n              className=\"mr-1.5\"\n              checked={currentPrice === 'under-50000'}\n              onChange={() => handlePriceChange('under-50000')}\n            />\n            <span className=\"text-sm\">~5만원</span>\n          </label>\n          <label className=\"flex items-center cursor-pointer\">\n            <input\n              type=\"radio\"\n              name=\"price\"\n              className=\"mr-1.5\"\n              checked={currentPrice === '50000-100000'}\n              onChange={() => handlePriceChange('50000-100000')}\n            />\n            <span className=\"text-sm\">5~10만원</span>\n          </label>\n          <label className=\"flex items-center cursor-pointer\">\n            <input\n              type=\"radio\"\n              name=\"price\"\n              className=\"mr-1.5\"\n              checked={currentPrice === '100000-300000'}\n              onChange={() => handlePriceChange('100000-300000')}\n            />\n            <span className=\"text-sm\">10~30만원</span>\n          </label>\n          <label className=\"flex items-center cursor-pointer\">\n            <input\n              type=\"radio\"\n              name=\"price\"\n              className=\"mr-1.5\"\n              checked={currentPrice === '300000-500000'}\n              onChange={() => handlePriceChange('300000-500000')}\n            />\n            <span className=\"text-sm\">30~50만원</span>\n          </label>\n          <label className=\"flex items-center cursor-pointer\">\n            <input\n              type=\"radio\"\n              name=\"price\"\n              className=\"mr-1.5\"\n              checked={currentPrice === 'over-500000'}\n              onChange={() => handlePriceChange('over-500000')}\n            />\n            <span className=\"text-sm\">50만원~</span>\n          </label>\n        </div>\n      </div>\n\n      {/* 초기화 버튼 */}\n      <button\n        onClick={handleReset}\n        className=\"ml-auto px-4 py-2 text-sm text-brand-primary border border-brand-primary rounded-lg hover:bg-gray-50 transition-colors\"\n      >\n        초기화\n      </button>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\categories\\CategorySidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\categories\\CategorySort.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\categories\\CategoryVisitTracker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\categories\\ServiceGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\chat\\ChatNotificationBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\common\\EmptyState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\common\\ErrorState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\common\\HeroWithCategories.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\common\\LoadingSpinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\home\\AITalentShowcase.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\home\\CategoryGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\home\\CategoryGridClient.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\home\\HeroSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\home\\PersonalizedServices.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\home\\PremiumPlacements.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\home\\RecentViewedServices.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\home\\RecentVisitedCategories.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\home\\RecommendedServices.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\home\\TrendingServices.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\landing\\AIServicesShowcase.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\layout\\ConditionalLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\layout\\ConditionalMegaMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\layout\\ConditionalMegaMenuWrapper.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\layout\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\layout\\FooterMobileBusinessInfo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\layout\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\layout\\MegaMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\layout\\MobileBottomNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\layout\\MobileSubHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\layout\\SearchBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\mypage\\MobileSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\mypage\\MypageLayoutWrapper.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\mypage\\OrderCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\mypage\\Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\mypage\\StatCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\notifications\\NotificationBell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\providers\\AuthProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\providers\\ChatUnreadProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\providers\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\providers\\NotificationProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\providers\\QueryProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\services\\ContactSellerButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\services\\ExpertResponseBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\services\\FavoriteButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\services\\PortfolioGrid.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getYoutubeVideoId' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":26,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":26}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport { useState } from 'react'\nimport PortfolioModal from './PortfolioModal'\n\ninterface Portfolio {\n  id: string\n  title: string\n  description: string\n  thumbnail_url: string | null\n  image_urls: string[]\n  youtube_url: string | null\n  project_url: string | null\n  tags: string[]\n  created_at: string\n}\n\ninterface Props {\n  portfolios: Portfolio[]\n}\n\nexport default function PortfolioGrid({ portfolios }: Props) {\n  const [selectedPortfolio, setSelectedPortfolio] = useState<Portfolio | null>(null)\n\n  // YouTube URL에서 비디오 ID 추출\n  const getYoutubeVideoId = (url: string | null): string | null => {\n    if (!url) return null\n\n    const patterns = [\n      /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([^&\\n?#]+)/,\n      /youtube\\.com\\/embed\\/([^&\\n?#]+)/,\n      /youtube\\.com\\/v\\/([^&\\n?#]+)/\n    ]\n\n    for (const pattern of patterns) {\n      const match = url.match(pattern)\n      if (match) return match[1]\n    }\n\n    return null\n  }\n\n  return (\n    <>\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n        {portfolios.map((portfolio) => (\n          <button\n            key={portfolio.id}\n            onClick={() => setSelectedPortfolio(portfolio)}\n            className=\"group relative bg-gray-100 rounded-lg overflow-hidden hover:ring-2 hover:ring-brand-primary transition-all\"\n            style={{ aspectRatio: '35/26' }}\n          >\n            {portfolio.thumbnail_url ? (\n              <img\n                src={portfolio.thumbnail_url}\n                alt={portfolio.title}\n                className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\n                <i className=\"fas fa-image text-4xl\"></i>\n              </div>\n            )}\n\n            {/* 오버레이 */}\n            <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-4\">\n              <h3 className=\"text-white font-bold text-sm line-clamp-2 mb-1\">\n                {portfolio.title}\n              </h3>\n              <div className=\"flex items-center gap-1 text-white/80 text-xs\">\n                <i className=\"fas fa-expand-alt\"></i>\n                <span>자세히 보기</span>\n              </div>\n            </div>\n          </button>\n        ))}\n      </div>\n\n      {/* 모달 */}\n      {selectedPortfolio && (\n        <PortfolioModal\n          portfolio={selectedPortfolio}\n          onClose={() => setSelectedPortfolio(null)}\n        />\n      )}\n    </>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\services\\PortfolioModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\services\\PurchaseButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\services\\ServiceCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\services\\ServiceGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\services\\TemplateSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\services\\TextOverlayEditor.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'displayWidth' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":62,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":62,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'displayHeight' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":63,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":63,"endColumn":24}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport { useState, useEffect, useRef } from 'react'\nimport { type GradientTemplate, createGradientBackground } from '@/lib/template-generator'\n\ninterface TextStyle {\n  text: string\n  x: number // 0-1\n  y: number // 0-1\n  fontSize: number\n  color: string\n  textAlign: CanvasTextAlign\n  fontWeight: string\n  shadowBlur: number\n}\n\ninterface Props {\n  template: GradientTemplate\n  onTextChange: (style: TextStyle) => void\n  initialText?: string\n}\n\nconst PRESET_COLORS = [\n  { name: '화이트', value: '#ffffff' },\n  { name: '블랙', value: '#000000' },\n  { name: '브랜드 블루', value: '#0f3460' },\n  { name: '골드', value: '#ffd700' },\n  { name: '실버', value: '#c0c0c0' },\n]\n\nconst PRESET_POSITIONS = [\n  { name: '상단 중앙', x: 0.5, y: 0.25 },\n  { name: '중앙', x: 0.5, y: 0.5 },\n  { name: '하단 중앙', x: 0.5, y: 0.75 },\n  { name: '좌측 상단', x: 0.25, y: 0.25 },\n  { name: '우측 상단', x: 0.75, y: 0.25 },\n]\n\nexport default function TextOverlayEditor({ template, onTextChange, initialText = '' }: Props) {\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const [textStyle, setTextStyle] = useState<TextStyle>({\n    text: initialText,\n    x: 0.5,\n    y: 0.5,\n    fontSize: 48,\n    color: '#ffffff',\n    textAlign: 'center',\n    fontWeight: 'bold',\n    shadowBlur: 10,\n  })\n\n  // 텍스트 스타일 변경 시 부모에게 전달\n  useEffect(() => {\n    onTextChange(textStyle)\n  }, [textStyle, onTextChange])\n\n  // Canvas에 미리보기 그리기\n  useEffect(() => {\n    if (!canvasRef.current) return\n\n    const canvas = canvasRef.current\n    const displayWidth = canvas.offsetWidth\n    const displayHeight = canvas.offsetHeight\n\n    // 실제 캔버스 해상도 (652x488)\n    canvas.width = 652\n    canvas.height = 488\n\n    const ctx = canvas.getContext('2d')!\n\n    // 1. 배경 그리기\n    const bgCanvas = createGradientBackground(template, 652, 488)\n    ctx.drawImage(bgCanvas, 0, 0)\n\n    // 2. 텍스트가 있으면 그리기\n    if (textStyle.text.trim()) {\n      ctx.font = `${textStyle.fontWeight} ${textStyle.fontSize}px \"Noto Sans KR\", sans-serif`\n      ctx.fillStyle = textStyle.color\n      ctx.textAlign = textStyle.textAlign\n      ctx.textBaseline = 'middle'\n\n      // 그림자\n      if (textStyle.shadowBlur > 0) {\n        ctx.shadowBlur = textStyle.shadowBlur\n        ctx.shadowColor = 'rgba(0,0,0,0.5)'\n      }\n\n      // 좌우 여백 설정 (전체 너비의 10%)\n      const width = 652\n      const height = 488\n      const horizontalPadding = width * 0.1\n      const maxTextWidth = width - (horizontalPadding * 2)\n\n      // 텍스트를 줄바꿈(\\n)으로 먼저 분할\n      const manualLines = textStyle.text.split('\\n')\n      const lines: string[] = []\n\n      // 각 수동 줄바꿈된 줄에 대해 자동 줄바꿈 처리\n      for (const manualLine of manualLines) {\n        const words = manualLine.split(' ')\n        let currentLine = ''\n\n        for (const word of words) {\n          const testLine = currentLine ? `${currentLine} ${word}` : word\n          const metrics = ctx.measureText(testLine)\n\n          if (metrics.width > maxTextWidth && currentLine) {\n            // 현재 줄이 너무 길면 줄바꿈\n            lines.push(currentLine)\n            currentLine = word\n          } else {\n            currentLine = testLine\n          }\n        }\n\n        if (currentLine) {\n          lines.push(currentLine)\n        }\n      }\n\n      // 최대 3줄까지 표시\n      const displayLines = lines.slice(0, 3)\n\n      // 실제 위치 계산\n      let actualX = textStyle.x * width\n      let actualY = textStyle.y * height\n\n      // textAlign에 따라 X 좌표 조정 (여백 고려)\n      if (textStyle.textAlign === 'left') {\n        actualX = Math.max(actualX, horizontalPadding)\n      } else if (textStyle.textAlign === 'right') {\n        actualX = Math.min(actualX, width - horizontalPadding)\n      }\n\n      // 줄 간격 설정\n      const lineHeight = textStyle.fontSize * 1.3\n\n      // 여러 줄일 경우 중앙 정렬\n      if (displayLines.length > 1) {\n        // 전체 텍스트 블록의 중앙을 기준으로 배치\n        actualY -= (lineHeight * (displayLines.length - 1)) / 2\n      }\n\n      // 각 줄 그리기\n      displayLines.forEach((line, index) => {\n        const y = actualY + (index * lineHeight)\n        ctx.fillText(line, actualX, y)\n      })\n    }\n  }, [template, textStyle])\n\n  const handleTextChange = (value: string) => {\n    // 최대 25자 제한\n    if (value.length <= 25) {\n      setTextStyle(prev => ({ ...prev, text: value }))\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* 미리보기 */}\n      <div className=\"space-y-2\">\n        <h3 className=\"font-semibold text-lg flex items-center gap-2\">\n          <i className=\"fas fa-eye text-brand-primary\"></i>\n          미리보기\n        </h3>\n        <div className=\"relative border-2 border-gray-300 rounded-lg overflow-hidden bg-gray-100\">\n          <canvas\n            ref={canvasRef}\n            className=\"w-full h-auto\"\n            style={{ aspectRatio: '652/488' }}\n          />\n        </div>\n      </div>\n\n      {/* 텍스트 입력 */}\n      <div className=\"space-y-2\">\n        <label className=\"block font-semibold flex items-center gap-2\">\n          <i className=\"fas fa-text text-brand-primary\"></i>\n          텍스트 입력\n          <span className=\"text-sm text-gray-500 font-normal\">\n            ({textStyle.text.length}/25자)\n          </span>\n        </label>\n        <textarea\n          value={textStyle.text}\n          onChange={(e) => handleTextChange(e.target.value)}\n          onKeyDown={(e) => {\n            // Enter 키 누를 때 form submit 방지\n            if (e.key === 'Enter') {\n              e.stopPropagation()\n            }\n          }}\n          placeholder=\"예시:&#10;AI 서비스&#10;전문가\"\n          maxLength={25}\n          rows={3}\n          className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent text-lg resize-none\"\n        />\n        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n          <p className=\"text-sm text-blue-900 font-medium mb-1\">\n            <i className=\"fas fa-keyboard mr-1\"></i>\n            줄바꿈 방법\n          </p>\n          <p className=\"text-xs text-blue-800\">\n            <strong>키보드 Enter 키</strong>를 누르면 다음 줄로 이동합니다.<br/>\n            예: \"AI 서비스\" 입력 후 <kbd className=\"px-1.5 py-0.5 bg-white border border-blue-300 rounded text-xs\">Enter</kbd> 누르고 \"전문가\" 입력\n          </p>\n        </div>\n      </div>\n\n      {/* 위치 프리셋 */}\n      <div className=\"space-y-2\">\n        <label className=\"block font-semibold flex items-center gap-2\">\n          <i className=\"fas fa-location-dot text-brand-primary\"></i>\n          텍스트 위치\n        </label>\n        <div className=\"grid grid-cols-3 gap-2\">\n          {PRESET_POSITIONS.map((preset) => (\n            <button\n              key={preset.name}\n              type=\"button\"\n              onClick={() => setTextStyle(prev => ({ ...prev, x: preset.x, y: preset.y, textAlign: 'center' }))}\n              className={`px-3 py-2 border rounded-lg text-sm transition-all ${\n                textStyle.x === preset.x && textStyle.y === preset.y\n                  ? 'bg-brand-primary text-white border-brand-primary'\n                  : 'border-gray-300 hover:border-brand-primary'\n              }`}\n            >\n              {preset.name}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* 텍스트 색상 */}\n      <div className=\"space-y-2\">\n        <label className=\"block font-semibold flex items-center gap-2\">\n          <i className=\"fas fa-palette text-brand-primary\"></i>\n          텍스트 색상\n        </label>\n        <div className=\"grid grid-cols-5 gap-2\">\n          {PRESET_COLORS.map((color) => (\n            <button\n              key={color.value}\n              type=\"button\"\n              onClick={() => setTextStyle(prev => ({ ...prev, color: color.value }))}\n              className={`relative h-12 rounded-lg border-2 transition-all ${\n                textStyle.color === color.value\n                  ? 'border-brand-primary scale-105'\n                  : 'border-gray-300 hover:border-brand-primary'\n              }`}\n              style={{ backgroundColor: color.value }}\n            >\n              {textStyle.color === color.value && (\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <i className={`fas fa-check text-xl ${\n                    color.value === '#ffffff' ? 'text-gray-800' : 'text-white'\n                  }`}></i>\n                </div>\n              )}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* 텍스트 크기 */}\n      <div className=\"space-y-2\">\n        <label className=\"block font-semibold flex items-center gap-2\">\n          <i className=\"fas fa-text-height text-brand-primary\"></i>\n          텍스트 크기\n          <span className=\"text-sm text-gray-500 font-normal\">({textStyle.fontSize}px)</span>\n        </label>\n        <input\n          type=\"range\"\n          min=\"24\"\n          max=\"96\"\n          step=\"4\"\n          value={textStyle.fontSize}\n          onChange={(e) => setTextStyle(prev => ({ ...prev, fontSize: parseInt(e.target.value) }))}\n          className=\"w-full\"\n        />\n        <div className=\"flex justify-between text-xs text-gray-500\">\n          <span>작게 (24px)</span>\n          <span>크게 (96px)</span>\n        </div>\n      </div>\n\n      {/* 텍스트 굵기 */}\n      <div className=\"space-y-2\">\n        <label className=\"block font-semibold flex items-center gap-2\">\n          <i className=\"fas fa-bold text-brand-primary\"></i>\n          텍스트 굵기\n        </label>\n        <div className=\"grid grid-cols-3 gap-2\">\n          {[\n            { label: '보통', value: 'normal' },\n            { label: '중간', value: '600' },\n            { label: '굵게', value: 'bold' },\n          ].map((weight) => (\n            <button\n              key={weight.value}\n              type=\"button\"\n              onClick={() => setTextStyle(prev => ({ ...prev, fontWeight: weight.value }))}\n              className={`px-3 py-2 border rounded-lg text-sm transition-all ${\n                textStyle.fontWeight === weight.value\n                  ? 'bg-brand-primary text-white border-brand-primary'\n                  : 'border-gray-300 hover:border-brand-primary'\n              }`}\n            >\n              {weight.label}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* 그림자 */}\n      <div className=\"space-y-2\">\n        <label className=\"block font-semibold flex items-center gap-2\">\n          <i className=\"fas fa-circle-half-stroke text-brand-primary\"></i>\n          텍스트 그림자\n        </label>\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"20\"\n          step=\"2\"\n          value={textStyle.shadowBlur}\n          onChange={(e) => setTextStyle(prev => ({ ...prev, shadowBlur: parseInt(e.target.value) }))}\n          className=\"w-full\"\n        />\n        <div className=\"flex justify-between text-xs text-gray-500\">\n          <span>없음</span>\n          <span>강하게</span>\n        </div>\n      </div>\n\n      {/* 중요 안내 */}\n      <div className=\"mt-6 p-4 bg-blue-50 border-2 border-blue-300 rounded-lg\">\n        <div className=\"flex items-start gap-3\">\n          <i className=\"fas fa-lightbulb text-blue-600 text-xl mt-0.5\"></i>\n          <div>\n            <p className=\"font-bold text-blue-900 mb-1\">중요!</p>\n            <p className=\"text-sm text-blue-800\">\n              편집이 완료되면 반드시 아래 <strong>\"썸네일 생성하기\"</strong> 버튼을 눌러주세요.\n              버튼을 누르지 않으면 썸네일이 저장되지 않습니다.\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\components\\services\\ViewTracker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\hooks\\useLoadingStates.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\hooks\\useYoutubeThumbnail.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":81,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":81,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback } from 'react'\r\n\r\n/**\r\n * YouTube 썸네일 다운로드 및 관리 훅\r\n *\r\n * 사용 예시:\r\n * ```typescript\r\n * const { videoId, loading, fetchThumbnail } = useYoutubeThumbnail()\r\n *\r\n * const handleUrlChange = async (url: string) => {\r\n *   const result = await fetchThumbnail(url)\r\n *   if (result) {\r\n *     // result.thumbnailUrl, result.videoId 사용\r\n *   }\r\n * }\r\n * ```\r\n */\r\nexport function useYoutubeThumbnail() {\r\n  const [videoId, setVideoId] = useState('')\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  /**\r\n   * YouTube URL에서 비디오 ID 추출\r\n   */\r\n  const extractVideoId = useCallback((url: string): string | null => {\r\n    const patterns = [\r\n      /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([^&\\n?#]+)/,\r\n      /youtube\\.com\\/embed\\/([^&\\n?#]+)/,\r\n      /youtube\\.com\\/v\\/([^&\\n?#]+)/\r\n    ]\r\n\r\n    for (const pattern of patterns) {\r\n      const match = url.match(pattern)\r\n      if (match) return match[1]\r\n    }\r\n\r\n    return null\r\n  }, [])\r\n\r\n  /**\r\n   * YouTube 썸네일 다운로드 및 Blob URL 생성\r\n   */\r\n  const fetchThumbnail = useCallback(async (url: string) => {\r\n    if (!url.trim()) {\r\n      setVideoId('')\r\n      return null\r\n    }\r\n\r\n    const id = extractVideoId(url)\r\n    if (!id) {\r\n      alert('유효한 YouTube URL을 입력해주세요')\r\n      return null\r\n    }\r\n\r\n    setVideoId(id)\r\n    setLoading(true)\r\n\r\n    try {\r\n      // YouTube 썸네일 URL 시도 순서\r\n      const thumbnailUrls = [\r\n        `https://img.youtube.com/vi/${id}/maxresdefault.jpg`,\r\n        `https://img.youtube.com/vi/${id}/hqdefault.jpg`,\r\n        `https://img.youtube.com/vi/${id}/mqdefault.jpg`,\r\n        `https://img.youtube.com/vi/${id}/default.jpg`\r\n      ]\r\n\r\n      // 첫 번째로 사용 가능한 썸네일 찾기\r\n      for (const thumbnailUrl of thumbnailUrls) {\r\n        try {\r\n          const response = await fetch(thumbnailUrl)\r\n          if (response.ok) {\r\n            const blob = await response.blob()\r\n            const blobUrl = URL.createObjectURL(blob)\r\n\r\n            return {\r\n              thumbnailUrl: blobUrl,\r\n              videoId: id,\r\n              blob\r\n            }\r\n          }\r\n        } catch (err) {\r\n          continue\r\n        }\r\n      }\r\n\r\n      alert('YouTube 썸네일을 가져올 수 없습니다')\r\n      return null\r\n    } catch (error) {\r\n      console.error('YouTube thumbnail fetch error:', error)\r\n      alert('YouTube 썸네일을 가져오는 중 오류가 발생했습니다')\r\n      return null\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }, [extractVideoId])\r\n\r\n  /**\r\n   * 비디오 ID 초기화\r\n   */\r\n  const resetVideoId = useCallback(() => {\r\n    setVideoId('')\r\n  }, [])\r\n\r\n  return {\r\n    videoId,\r\n    loading,\r\n    extractVideoId,\r\n    fetchThumbnail,\r\n    resetVideoId\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\admin\\auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\advertising-cron.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\advertising.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\api\\auth-middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\api\\error-handler.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\auth\\config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\categories.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\error.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\logger.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":104,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":104,"endColumn":16,"suggestions":[{"fix":{"range":[2735,2801],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":111,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":111,"endColumn":17,"suggestions":[{"fix":{"range":[2944,3010],"text":""},"messageId":"removeConsole","data":{"propertyName":"info"},"desc":"Remove the console.info()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":157,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":157,"endColumn":18,"suggestions":[{"fix":{"range":[4164,4207],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 환경 변수 기반 로깅 시스템\n *\n * 사용법:\n * - logger.debug('디버그 메시지', { data })  // 개발 환경에서만 출력\n * - logger.info('정보 메시지', { data })\n * - logger.warn('경고 메시지', { data })\n * - logger.error('에러 메시지', error)      // 항상 출력\n */\n\ntype LogLevel = 'debug' | 'info' | 'warn' | 'error' | 'none'\n\n/**\n * 로그 메타데이터 타입\n * - 객체 형태의 추가 정보를 담음\n * - 중첩된 객체와 배열 지원\n */\ntype LogMetadata = Record<string, unknown>\n\nconst LOG_LEVELS: Record<LogLevel, number> = {\n  debug: 0,\n  info: 1,\n  warn: 2,\n  error: 3,\n  none: 4\n}\n\nclass Logger {\n  private level: LogLevel\n  private isDevelopment: boolean\n  private isClient: boolean\n\n  constructor() {\n    // 환경 변수에서 로그 레벨 가져오기\n    const envLevel = (process.env.NEXT_PUBLIC_LOG_LEVEL || 'info') as LogLevel\n    this.level = envLevel in LOG_LEVELS ? envLevel : 'info'\n\n    this.isDevelopment = process.env.NODE_ENV === 'development'\n    this.isClient = typeof window !== 'undefined'\n\n    // 프로덕션 환경에서는 최소 warn 레벨\n    if (!this.isDevelopment && LOG_LEVELS[this.level] < LOG_LEVELS.warn) {\n      this.level = 'warn'\n    }\n  }\n\n  private shouldLog(level: LogLevel): boolean {\n    return LOG_LEVELS[level] >= LOG_LEVELS[this.level]\n  }\n\n  private formatMessage(level: string, message: string, data?: LogMetadata): string {\n    const timestamp = new Date().toISOString()\n    const environment = this.isClient ? '[Client]' : '[Server]'\n    const prefix = `${timestamp} ${environment} [${level.toUpperCase()}]`\n\n    return data ? `${prefix} ${message}` : `${prefix} ${message}`\n  }\n\n  private sanitizeData(data: LogMetadata | unknown): LogMetadata | unknown {\n    if (!data) return data\n\n    // 민감한 정보 필드 목록\n    const sensitiveFields = [\n      'password',\n      'token',\n      'accessToken',\n      'refreshToken',\n      'apiKey',\n      'secret',\n      'creditCard',\n      'ssn',\n      'bankAccount',\n      'phoneNumber',\n      'email' // email은 필요에 따라 제거/유지\n    ]\n\n    const sanitize = (obj: unknown): unknown => {\n      if (typeof obj !== 'object' || obj === null) return obj\n      if (Array.isArray(obj)) return obj.map(sanitize)\n\n      const sanitized: Record<string, unknown> = {}\n      for (const [key, value] of Object.entries(obj)) {\n        const lowerKey = key.toLowerCase()\n        const isSensitive = sensitiveFields.some(field => lowerKey.includes(field.toLowerCase()))\n\n        if (isSensitive) {\n          sanitized[key] = '***REDACTED***'\n        } else if (typeof value === 'object' && value !== null) {\n          sanitized[key] = sanitize(value)\n        } else {\n          sanitized[key] = value\n        }\n      }\n      return sanitized\n    }\n\n    return sanitize(data)\n  }\n\n  debug(message: string, data?: LogMetadata) {\n    if (!this.shouldLog('debug')) return\n\n    const sanitized = this.sanitizeData(data)\n    console.log(this.formatMessage('debug', message), sanitized || '')\n  }\n\n  info(message: string, data?: LogMetadata) {\n    if (!this.shouldLog('info')) return\n\n    const sanitized = this.sanitizeData(data)\n    console.info(this.formatMessage('info', message), sanitized || '')\n  }\n\n  warn(message: string, data?: LogMetadata) {\n    if (!this.shouldLog('warn')) return\n\n    const sanitized = this.sanitizeData(data)\n    console.warn(this.formatMessage('warn', message), sanitized || '')\n  }\n\n  error(message: string, error?: Error | unknown, data?: LogMetadata) {\n    if (!this.shouldLog('error')) return\n\n    const sanitized = this.sanitizeData(data)\n\n    if (error instanceof Error) {\n      console.error(\n        this.formatMessage('error', message),\n        {\n          name: error.name,\n          message: error.message,\n          stack: this.isDevelopment ? error.stack : undefined,\n          ...(sanitized as Record<string, unknown>)\n        }\n      )\n    } else {\n      console.error(\n        this.formatMessage('error', message),\n        error,\n        sanitized || ''\n      )\n    }\n\n    // TODO: 프로덕션 환경에서는 에러 로깅 서비스로 전송\n    // 예: Sentry, LogRocket, DataDog 등\n    // if (!this.isDevelopment) {\n    //   sendToErrorTrackingService(message, error, sanitized)\n    // }\n  }\n\n  /**\n   * 개발 환경에서만 실행되는 로그\n   * 디버깅 목적으로 사용하며 프로덕션에서는 완전히 제거됨\n   */\n  dev(message: string, data?: LogMetadata) {\n    if (this.isDevelopment) {\n      console.log(`[DEV] ${message}`, data || '')\n    }\n  }\n}\n\n// 싱글톤 인스턴스 생성\nexport const logger = new Logger()\n\n// 타입 export\nexport type { LogLevel }\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\notifications.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\prefetch\\buyerPrefetch.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\rate-limit.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\serviceWorker.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":7,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":7,"endColumn":22,"suggestions":[{"fix":{"range":[259,314],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export function registerServiceWorker() {\n  if (typeof window !== 'undefined' && 'serviceWorker' in navigator) {\n    window.addEventListener('load', () => {\n      navigator.serviceWorker\n        .register('/sw.js')\n        .then((registration) => {\n          console.log('Service Worker registered:', registration)\n        })\n        .catch((error) => {\n          console.error('Service Worker registration failed:', JSON.stringify(error, Object.getOwnPropertyNames(error), 2))\n        })\n    })\n  }\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\supabase\\mutations\\orders.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\supabase\\mutations\\reviews.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\supabase\\queries\\admin.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\supabase\\queries\\category-visits.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\supabase\\queries\\coupons.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\supabase\\queries\\dashboard.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'userId' is defined but never used. Allowed unused args must match /^_/u.","line":120,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":120,"endColumn":46}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createClient } from '@/lib/supabase/server'\nimport { logger } from '@/lib/logger'\n\nexport async function getBuyerDashboardStats(userId: string) {\n  try {\n    const supabase = await createClient()\n\n    // 단일 쿼리로 모든 주문 데이터 가져오기 (4개 쿼리 → 1개 쿼리로 최적화)\n    const { data: orders, error } = await supabase\n      .from('orders')\n      .select('status, review_id, created_at')\n      .eq('buyer_id', userId)\n\n    if (error) {\n      logger.error('[getBuyerDashboardStats] Error:', error)\n      return {\n        inProgressOrders: 0,\n        deliveredOrders: 0,\n        pendingReviews: 0,\n        monthlyPurchases: 0\n      }\n    }\n\n    // JavaScript로 카운트 계산\n    const stats = {\n      inProgressOrders: 0,\n      deliveredOrders: 0,\n      pendingReviews: 0,\n      monthlyPurchases: 0\n    }\n\n    const monthStart = new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString()\n\n    orders?.forEach(order => {\n      if (order.status === 'in_progress') {\n        stats.inProgressOrders++\n      } else if (order.status === 'delivered') {\n        stats.deliveredOrders++\n      } else if (order.status === 'completed') {\n        // 리뷰가 없는 완료된 주문 = 대기중인 리뷰\n        if (!order.review_id) {\n          stats.pendingReviews++\n        }\n        // 이번 달 완료된 주문\n        if (order.created_at >= monthStart) {\n          stats.monthlyPurchases++\n        }\n      }\n    })\n\n    return stats\n  } catch (error) {\n    logger.error('[getBuyerDashboardStats] Unexpected error:', error)\n    return {\n      inProgressOrders: 0,\n      deliveredOrders: 0,\n      pendingReviews: 0,\n      monthlyPurchases: 0\n    }\n  }\n}\n\nexport async function getBuyerRecentOrders(userId: string, limit: number = 5) {\n  try {\n    const supabase = await createClient()\n\n    const { data, error } = await supabase\n      .from('orders')\n      .select(`\n        *,\n        service:services(id, title, thumbnail_url),\n        seller:users!seller_id(id, name, profile_image)\n      `)\n      .eq('buyer_id', userId)\n      .in('status', ['in_progress', 'delivered'])\n      .order('created_at', { ascending: false })\n      .limit(limit)\n\n    if (error) {\n      logger.error('[getBuyerRecentOrders] Error:', error)\n      return []\n    }\n\n    return data || []\n  } catch (error) {\n    logger.error('[getBuyerRecentOrders] Unexpected error:', error)\n    return []\n  }\n}\n\nexport async function getBuyerRecentFavorites(userId: string, limit: number = 5) {\n  try {\n    const supabase = await createClient()\n\n    const { data, error } = await supabase\n      .from('favorites')\n      .select(`\n        id,\n        service:services(\n          id, title,\n          seller:users!seller_id(id, name)\n        )\n      `)\n      .eq('user_id', userId)\n      .order('created_at', { ascending: false })\n      .limit(limit)\n\n    if (error) {\n      logger.error('[getBuyerRecentFavorites] Error:', error)\n      return []\n    }\n\n    return data || []\n  } catch (error) {\n    logger.error('[getBuyerRecentFavorites] Unexpected error:', error)\n    return []\n  }\n}\n\nexport async function getBuyerBenefits(userId: string) {\n  // Coupon/cash features have been removed\n  // Return empty benefits to avoid querying deleted tables\n  return {\n    coupons: 0,\n    cash: 0\n  }\n}\n\nexport async function getSellerDashboardStats(sellerUserId: string) {\n  const supabase = await createClient()\n\n  // 단일 쿼리로 모든 주문 데이터 가져오기 (5개 쿼리 → 1개 쿼리로 최적화)\n  // Note: orders.seller_id actually references users.id (not sellers.id)\n  const { data: orders, error } = await supabase\n    .from('orders')\n    .select('status, total_amount, created_at')\n    .eq('seller_id', sellerUserId)\n\n  if (error) {\n    logger.error('[getSellerDashboardStats] Error:', error)\n    return {\n      newOrders: 0,\n      inProgressOrders: 0,\n      deliveredOrders: 0,\n      completedOrders: 0,\n      monthlyRevenue: 0\n    }\n  }\n\n  // JavaScript로 카운트 및 수익 계산\n  const stats = {\n    newOrders: 0,\n    inProgressOrders: 0,\n    deliveredOrders: 0,\n    completedOrders: 0,\n    monthlyRevenue: 0\n  }\n\n  const monthStart = new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString()\n\n  orders?.forEach(order => {\n    if (order.status === 'paid') stats.newOrders++\n    else if (order.status === 'in_progress') stats.inProgressOrders++\n    else if (order.status === 'delivered') stats.deliveredOrders++\n    else if (order.status === 'completed') {\n      stats.completedOrders++\n      // 이번 달 완료된 주문의 수익 계산\n      if (order.created_at >= monthStart) {\n        stats.monthlyRevenue += order.total_amount || 0\n      }\n    }\n  })\n\n  return stats\n}\n\nexport async function getSellerRecentOrders(sellerUserId: string, limit: number = 5) {\n  const supabase = await createClient()\n\n  // Note: orders.seller_id actually references users.id (not sellers.id)\n  const { data, error } = await supabase\n    .from('orders')\n    .select(`\n      *,\n      service:services(id, title, thumbnail_url),\n      buyer:users!buyer_id(id, name, profile_image)\n    `)\n    .eq('seller_id', sellerUserId)\n    .in('status', ['paid', 'in_progress', 'delivered'])\n    .order('created_at', { ascending: false })\n    .limit(limit)\n\n  if (error) throw error\n  return data\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\supabase\\queries\\earnings.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\supabase\\queries\\messages.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\supabase\\queries\\orders.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\supabase\\queries\\personalized-services.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\supabase\\queries\\quotes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\supabase\\queries\\reviews.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\supabase\\queries\\services.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\supabase\\server.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\supabase\\singleton.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\template-generator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\transaction.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\lib\\utils\\nickname-generator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\types\\admin.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\types\\advertising.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\types\\common.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\types\\database.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\utils\\format.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ohyus\\talent\\src\\utils\\validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
