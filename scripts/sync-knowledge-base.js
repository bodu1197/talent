/* eslint-disable no-console */
const https = require('node:https');

// Supabase Configuration
// Note: In a real scenario, never hardcode these.
const SUPABASE_PROJECT_REF = 'abroivxthindezdtdzmj';
const SUPABASE_ACCESS_TOKEN = 'sbp_753b67c2411cad6320ef44d6626ac13ee2ba6296';

const KNOWLEDGE_BASE_DATA = [
  {
    category: 'ìˆ˜ìˆ˜ë£Œ',
    question: 'ëŒíŒŒêµ¬ ìˆ˜ìˆ˜ë£Œê°€ ì–¼ë§ˆì˜ˆìš”?',
    answer: 'ëŒíŒŒêµ¬ëŠ” **ìˆ˜ìˆ˜ë£Œê°€ 0ì›**ìž…ë‹ˆë‹¤! íŒë§¤ìžë„ êµ¬ë§¤ìžë„ ìˆ˜ìˆ˜ë£Œ ì—†ì´ ê±°ëž˜í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ í”Œëž«í¼(í¬ëª½ 15%, ìˆ¨ê³  10-20%)ê³¼ ë‹¬ë¦¬ ëŒíŒŒêµ¬ëŠ” ì™„ì „ ë¬´ë£Œìž…ë‹ˆë‹¤. ðŸ˜Š',
    keywords: ['ìˆ˜ìˆ˜ë£Œ', 'ë¹„ìš©', 'ë¬´ë£Œ', '0ì›', 'ê³µì§œ'],
    priority: 100
  },
  {
    category: 'ìˆ˜ìˆ˜ë£Œ',
    question: 'ì™œ ìˆ˜ìˆ˜ë£Œê°€ ë¬´ë£Œì¸ê°€ìš”?',
    answer: '"í”Œëž«í¼ì€ ë‹¤ë¦¬ì—¬ì•¼ í•©ë‹ˆë‹¤. í†µí–‰ë£Œë¥¼ ê±·ëŠ” ê´€ë¬¸ì´ ì•„ë‹ˆë¼." ì´ê²ƒì´ ëŒíŒŒêµ¬ì˜ ì² í•™ìž…ë‹ˆë‹¤. ìˆ˜ìˆ˜ë£Œ ì—†ì´ë„ ì§€ì† ê°€ëŠ¥í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸ì„ ì¶”êµ¬í•©ë‹ˆë‹¤.',
    keywords: ['ì™œ', 'ë¬´ë£Œ', 'ì´ìœ ', 'ì² í•™'],
    priority: 99
  },
  {
    category: 'ìˆ˜ìˆ˜ë£Œ',
    question: 'í¬ëª½ì´ëž‘ ë­ê°€ ë‹¬ë¼ìš”?',
    answer: 'ê°€ìž¥ í° ì°¨ì´ì ì€ **ìˆ˜ìˆ˜ë£Œ**ìž…ë‹ˆë‹¤!\n- í¬ëª½: 15% ìˆ˜ìˆ˜ë£Œ\n- ìˆ¨ê³ : 10-20% ìˆ˜ìˆ˜ë£Œ\n- í”„ë¦¬ëª¨ì•„: 15% ìˆ˜ìˆ˜ë£Œ\n- **ëŒíŒŒêµ¬: 0% (ì™„ì „ ë¬´ë£Œ!)**\n\nê°™ì€ ì„œë¹„ìŠ¤ë¥¼ íŒ”ì•„ë„ ëŒíŒŒêµ¬ì—ì„œ ë” ë§Žì´ ë²Œ ìˆ˜ ìžˆìŠµë‹ˆë‹¤! ðŸ’°',
    keywords: ['í¬ëª½', 'ìˆ¨ê³ ', 'ë¹„êµ', 'ì°¨ì´', 'í”„ë¦¬ëª¨ì•„'],
    priority: 98
  },
  {
    category: 'íŒë§¤ìž',
    question: 'ì–´ë–»ê²Œ íŒë§¤ë¥¼ ì‹œìž‘í•˜ë‚˜ìš”?',
    answer: 'íŒë§¤ë¥¼ ì‹œìž‘í•˜ë ¤ë©´:\n1. íšŒì›ê°€ìž… (ì´ë©”ì¼/Google/ì¹´ì¹´ì˜¤)\n2. ë§ˆì´íŽ˜ì´ì§€ â†’ íŒë§¤ìž ë“±ë¡\n3. íœ´ëŒ€í° ë³¸ì¸ì¸ì¦ ì™„ë£Œ\n4. ì„œë¹„ìŠ¤ ë“±ë¡ (ì œëª©, ì„¤ëª…, ê°€ê²© ìž…ë ¥)\n\në³¸ì¸ì¸ì¦ í›„ ë°”ë¡œ íŒë§¤ ì‹œìž‘ ê°€ëŠ¥í•©ë‹ˆë‹¤! ðŸš€',
    keywords: ['íŒë§¤', 'ì‹œìž‘', 'ë“±ë¡', 'ë°©ë²•'],
    priority: 90
  },
  {
    category: 'íŒë§¤ìž',
    question: 'ì‚¬ì—…ìž ë“±ë¡ì¦ì´ í•„ìš”í•œê°€ìš”?',
    answer: '**ê°œì¸ íŒë§¤ìž**: ì‚¬ì—…ìž ë“±ë¡ì¦ ì—†ì´ë„ íŒë§¤ ê°€ëŠ¥í•©ë‹ˆë‹¤! (íœ´ëŒ€í° ë³¸ì¸ì¸ì¦ë§Œ í•„ìš”)\n**ì‚¬ì—…ìž íŒë§¤ìž**: ì‚¬ì—…ìž ë“±ë¡ì¦ ì¸ì¦ ì‹œ "ì‚¬ì—…ìž ì¸ì¦" ë±ƒì§€ê°€ í‘œì‹œë˜ì–´ ì‹ ë¢°ë„ê°€ ë†’ì•„ì§‘ë‹ˆë‹¤.',
    keywords: ['ì‚¬ì—…ìž', 'ë“±ë¡ì¦', 'í•„ìš”', 'ê°œì¸'],
    priority: 89
  },
  {
    category: 'íŒë§¤ìž',
    question: 'ì„œë¹„ìŠ¤ ê°€ê²©ì€ ì–´ë–»ê²Œ ì •í•˜ë‚˜ìš”?',
    answer: 'ê°€ê²©ì€ íŒë§¤ìžê°€ ìžìœ ë¡­ê²Œ ì„¤ì •í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤!\n- ìµœì†Œ ê¸ˆì•¡: 1,000ì›\n- ìµœëŒ€ ê¸ˆì•¡: ì œí•œ ì—†ìŒ\n- ì˜µì…˜/ì¶”ê°€ ê¸ˆì•¡ ì„¤ì • ê°€ëŠ¥\n\nðŸ’¡ íŒ: ë¹„ìŠ·í•œ ì„œë¹„ìŠ¤ ê°€ê²©ì„ ì°¸ê³ í•´ì„œ ê²½ìŸë ¥ ìžˆê²Œ ì„¤ì •í•˜ì„¸ìš”!',
    keywords: ['ê°€ê²©', 'ì„¤ì •', 'ê¸ˆì•¡', 'ì–¼ë§ˆ'],
    priority: 88
  },
  {
    category: 'íŒë§¤ìž',
    question: 'íŒë§¤ ëŒ€ê¸ˆì€ ì–¸ì œ ë°›ë‚˜ìš”?',
    answer: 'êµ¬ë§¤ìžê°€ **êµ¬ë§¤ í™•ì •** ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë°”ë¡œ ì •ì‚°ë©ë‹ˆë‹¤!\n- ì •ì‚° ì£¼ê¸°: êµ¬ë§¤ í™•ì • í›„ ì¦‰ì‹œ\n- ì •ì‚° ìˆ˜ìˆ˜ë£Œ: **0ì›** (ë¬´ë£Œ!)\n- ì¶œê¸ˆ: ë“±ë¡í•œ ê³„ì¢Œë¡œ ìžë™ ìž…ê¸ˆ',
    keywords: ['ì •ì‚°', 'ëŒ€ê¸ˆ', 'ìž…ê¸ˆ', 'ì–¸ì œ', 'ë°›ë‚˜'],
    priority: 87
  },
  {
    category: 'êµ¬ë§¤',
    question: 'ì•ˆì „í•˜ê²Œ ê±°ëž˜í•  ìˆ˜ ìžˆë‚˜ìš”?',
    answer: 'ë„¤! ëŒíŒŒêµ¬ëŠ” ì•ˆì „ ê±°ëž˜ ì‹œìŠ¤í…œì„ ì œê³µí•©ë‹ˆë‹¤:\nâœ… íŒë§¤ìž ë³¸ì¸ì¸ì¦ í•„ìˆ˜\nâœ… ì•ˆì „ ê²°ì œ (ì—ìŠ¤í¬ë¡œ)\nâœ… êµ¬ë§¤ í™•ì • ì „ í™˜ë¶ˆ ê°€ëŠ¥\nâœ… ì‹¤ì‹œê°„ ì±„íŒ…ìœ¼ë¡œ ì†Œí†µ',
    keywords: ['ì•ˆì „', 'ê±°ëž˜', 'ë¯¿ì„ìˆ˜ìžˆë‚˜', 'ì‚¬ê¸°'],
    priority: 85
  },
  {
    category: 'êµ¬ë§¤',
    question: 'ë§ˆìŒì— ì•ˆ ë“¤ë©´ í™˜ë¶ˆë˜ë‚˜ìš”?',
    answer: 'í™˜ë¶ˆ ì •ì±…:\n- **ì„œë¹„ìŠ¤ ì‹œìž‘ ì „**: ì „ì•¡ í™˜ë¶ˆ ê°€ëŠ¥\n- **ì„œë¹„ìŠ¤ ì§„í–‰ ì¤‘**: íŒë§¤ìžì™€ í˜‘ì˜ í›„ ë¶€ë¶„ í™˜ë¶ˆ\n- **ì„œë¹„ìŠ¤ ì™„ë£Œ í›„**: êµ¬ë§¤ í™•ì • ì „ê¹Œì§€ ë¬¸ì œ ì œê¸° ê°€ëŠ¥\n\në§ˆì´íŽ˜ì´ì§€ â†’ êµ¬ë§¤ë‚´ì—­ì—ì„œ í™˜ë¶ˆ ìš”ì²­í•˜ì„¸ìš”.',
    keywords: ['í™˜ë¶ˆ', 'ì·¨ì†Œ', 'ë°˜í’ˆ', 'ë§ˆìŒ'],
    priority: 84
  },
  {
    category: 'êµ¬ë§¤',
    question: 'ê²°ì œëŠ” ì–´ë–»ê²Œ í•˜ë‚˜ìš”?',
    answer: 'ë‹¤ì–‘í•œ ê²°ì œ ë°©ë²•ì„ ì§€ì›í•©ë‹ˆë‹¤:\nðŸ’³ ì‹ ìš©ì¹´ë“œ/ì²´í¬ì¹´ë“œ\nðŸ¦ ê³„ì¢Œì´ì²´\nðŸ“± ê°„íŽ¸ê²°ì œ (ì¹´ì¹´ì˜¤íŽ˜ì´, ë„¤ì´ë²„íŽ˜ì´)\n\nëª¨ë“  ê²°ì œëŠ” ì•ˆì „í•˜ê²Œ ì²˜ë¦¬ë©ë‹ˆë‹¤!',
    keywords: ['ê²°ì œ', 'ì¹´ë“œ', 'ê³„ì¢Œ', 'íŽ˜ì´'],
    priority: 83
  },
  {
    category: 'ì‹¬ë¶€ë¦„',
    question: 'ì‹¬ë¶€ë¦„ ì„œë¹„ìŠ¤ê°€ ë­”ê°€ìš”?',
    answer: 'ì‹¬ë¶€ë¦„ ì„œë¹„ìŠ¤ëŠ” ê°„ë‹¨í•œ ìž‘ì—…ì„ ëŒ€ì‹  í•´ì£¼ëŠ” ì„œë¹„ìŠ¤ìž…ë‹ˆë‹¤:\nðŸ›’ ë¬¼ê±´ êµ¬ë§¤ ëŒ€í–‰\nðŸ” ìŒì‹ ë°°ë‹¬\nðŸ“¦ ì„œë¥˜/ë¬¼ê±´ ì „ë‹¬\nðŸƒ ì¤„ì„œê¸° ëŒ€í–‰\n\nê¸‰í•˜ê²Œ í•„ìš”í•  ë•Œ íŽ¸ë¦¬í•˜ê²Œ ì´ìš©í•˜ì„¸ìš”!',
    keywords: ['ì‹¬ë¶€ë¦„', 'ë­', 'ë¬´ì—‡', 'ë°°ë‹¬'],
    priority: 80
  },
  {
    category: 'ì‹¬ë¶€ë¦„',
    question: 'ì‹¬ë¶€ë¦„ ë¼ì´ë”ëŠ” ì–´ë–»ê²Œ ë˜ë‚˜ìš”?',
    answer: 'ëˆ„êµ¬ë‚˜ ì‹¬ë¶€ë¦„ ë¼ì´ë”ê°€ ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤!\n1. íšŒì›ê°€ìž… ë° ë³¸ì¸ì¸ì¦\n2. ë§ˆì´íŽ˜ì´ì§€ â†’ ë¼ì´ë” ë“±ë¡\n3. ì‹¬ë¶€ë¦„ ìš”ì²­ ìˆ˜ë½ í›„ ì™„ë£Œ\n\nìžìœ ë¡­ê²Œ ì›í•˜ëŠ” ì‹œê°„ì— í™œë™ ê°€ëŠ¥í•´ìš”! ðŸï¸',
    keywords: ['ë¼ì´ë”', 'ë°°ë‹¬ì›', 'ì‹¬ë¶€ë¦„', 'í•˜ë ¤ë©´'],
    priority: 79
  },
  {
    category: 'ê³„ì •',
    question: 'íšŒì› íƒˆí‡´í•˜ê³  ì‹¶ì–´ìš”',
    answer: 'ë§ˆì´íŽ˜ì´ì§€ â†’ ì„¤ì • â†’ íšŒì› íƒˆí‡´ì—ì„œ ì§„í–‰í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.\n\nâš ï¸ ì£¼ì˜ì‚¬í•­:\n- ì§„í–‰ ì¤‘ì¸ ê±°ëž˜ê°€ ìžˆìœ¼ë©´ íƒˆí‡´ ë¶ˆê°€\n- íƒˆí‡´ í›„ ë°ì´í„° ë³µêµ¬ ë¶ˆê°€\n- ê°™ì€ ì´ë©”ì¼ë¡œ ìž¬ê°€ìž… ê°€ëŠ¥',
    keywords: ['íƒˆí‡´', 'ì‚­ì œ', 'ê³„ì •', 'ê·¸ë§Œ'],
    priority: 75
  },
  {
    category: 'ê³„ì •',
    question: 'ë‹‰ë„¤ìž„ ë³€ê²½í•˜ê³  ì‹¶ì–´ìš”',
    answer: 'ë§ˆì´íŽ˜ì´ì§€ â†’ í”„ë¡œí•„ ìˆ˜ì •ì—ì„œ ë‹‰ë„¤ìž„ì„ ë³€ê²½í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ðŸ“',
    keywords: ['ë‹‰ë„¤ìž„', 'ì´ë¦„', 'ë³€ê²½', 'ë°”ê¾¸'],
    priority: 74
  },
  {
    category: 'ê³„ì •',
    question: 'ì•Œë¦¼ì´ ì•ˆ ì™€ìš”',
    answer: 'ì•Œë¦¼ ì„¤ì • í™•ì¸:\n1. ë§ˆì´íŽ˜ì´ì§€ â†’ ì„¤ì • â†’ ì•Œë¦¼ ì„¤ì •\n2. ë¸Œë¼ìš°ì € ì•Œë¦¼ í—ˆìš© ì—¬ë¶€ í™•ì¸\n3. ìŠ¤íŒ¸ ë©”ì¼í•¨ í™•ì¸ (ì´ë©”ì¼ ì•Œë¦¼)\n\nê·¸ëž˜ë„ ì•ˆ ë˜ë©´ help@dolpagu.comìœ¼ë¡œ ë¬¸ì˜í•´ì£¼ì„¸ìš”!',
    keywords: ['ì•Œë¦¼', 'í‘¸ì‹œ', 'ë©”ì¼', 'ì•Œë ¤'],
    priority: 73
  },
  {
    category: 'ì±„íŒ…',
    question: 'ì±„íŒ…ì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?',
    answer: 'ì„œë¹„ìŠ¤ ìƒì„¸ íŽ˜ì´ì§€ì—ì„œ "ì±„íŒ…í•˜ê¸°" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ íŒë§¤ìžì™€ ì‹¤ì‹œê°„ ì±„íŒ…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤!\n\nðŸ’¡ êµ¬ë§¤ ì „ ê¶ê¸ˆí•œ ì ì„ ë¯¸ë¦¬ ë¬¼ì–´ë³´ì„¸ìš”.',
    keywords: ['ì±„íŒ…', 'ëŒ€í™”', 'ë¬¸ì˜', 'ì—°ë½'],
    priority: 70
  },
  {
    category: 'ì±„íŒ…',
    question: 'íŒŒì¼ ì „ì†¡ì´ ë˜ë‚˜ìš”?',
    answer: 'ë„¤! ì±„íŒ…ì—ì„œ ì´ë¯¸ì§€, íŒŒì¼ ì „ì†¡ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\nðŸ“· ì´ë¯¸ì§€\nðŸ“Ž íŒŒì¼ (PDF, ë¬¸ì„œ ë“±)\n\nìž‘ì—…ë¬¼ ê³µìœ , ì°¸ê³ ìžë£Œ ì „ë‹¬ì— í™œìš©í•˜ì„¸ìš”!',
    keywords: ['íŒŒì¼', 'ì‚¬ì§„', 'ì´ë¯¸ì§€', 'ì „ì†¡'],
    priority: 69
  },
  {
    category: 'ì‹ ê³ ',
    question: 'ì‚¬ê¸°ë¥¼ ë‹¹í•œ ê²ƒ ê°™ì•„ìš”',
    answer: 'ê±±ì •ë˜ì‹œì£ . ë‹¤ìŒê³¼ ê°™ì´ ì¡°ì¹˜í•´ì£¼ì„¸ìš”:\n1. ì±„íŒ… ì¦ê±° ìŠ¤í¬ë¦°ìƒ· ì €ìž¥\n2. ë§ˆì´íŽ˜ì´ì§€ â†’ êµ¬ë§¤ë‚´ì—­ â†’ ì‹ ê³ í•˜ê¸°\n3. help@dolpagu.comìœ¼ë¡œ ìƒì„¸ ë‚´ìš© ì „ë‹¬\n\n24ì‹œê°„ ë‚´ ë‹´ë‹¹ìžê°€ í™•ì¸ í›„ ì—°ë½ë“œë¦½ë‹ˆë‹¤. ðŸ’ª',
    keywords: ['ì‚¬ê¸°', 'ì‹ ê³ ', 'í”¼í•´', 'ë¬¸ì œ'],
    priority: 95
  },
  {
    category: 'ì‹ ê³ ',
    question: 'íŒë§¤ìžê°€ ì—°ë½ì´ ì•ˆ ë¼ìš”',
    answer: 'ë©°ì¹ ì§¸ ì—°ë½ì´ ì—†ìœ¼ì‹œë‹¤ë©´:\n1. ì±„íŒ…ìœ¼ë¡œ ë‹¤ì‹œ í•œë²ˆ ë¬¸ì˜\n2. 48ì‹œê°„ ì´ìƒ ë¬´ì‘ë‹µ ì‹œ â†’ ì£¼ë¬¸ ì·¨ì†Œ ê°€ëŠ¥\n3. ë§ˆì´íŽ˜ì´ì§€ â†’ êµ¬ë§¤ë‚´ì—­ â†’ ë¬¸ì œ ì‹ ê³ \n\nì €í¬ê°€ ì¤‘ìž¬í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤!',
    keywords: ['ì—°ë½', 'ì‘ë‹µ', 'ì•ˆë¼', 'ë¬´ì‘ë‹µ'],
    priority: 94
  },
  {
    category: 'ê¸°íƒ€',
    question: 'ì•±ì´ ìžˆë‚˜ìš”?',
    answer: 'í˜„ìž¬ëŠ” ì›¹ì‚¬ì´íŠ¸(dolpagu.com)ì—ì„œë§Œ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.\nðŸ“± ëª¨ë°”ì¼ ì•±ì€ 2025ë…„ ìƒë°˜ê¸° ì¶œì‹œ ì˜ˆì •ìž…ë‹ˆë‹¤!\n\nì§€ê¸ˆë„ ëª¨ë°”ì¼ ë¸Œë¼ìš°ì €ì—ì„œ íŽ¸í•˜ê²Œ ì´ìš© ê°€ëŠ¥í•´ìš”.',
    keywords: ['ì•±', 'ì–´í”Œ', 'ëª¨ë°”ì¼', 'ë‹¤ìš´ë¡œë“œ'],
    priority: 60
  },
  {
    category: 'ê¸°íƒ€',
    question: 'ê³ ê°ì„¼í„° ì—°ë½ì²˜ê°€ ë­ì˜ˆìš”?',
    answer: 'ðŸ“§ ì´ë©”ì¼: help@dolpagu.com\nðŸ¤– AI ìƒë‹´: ì§€ê¸ˆ ëŒ€í™” ì¤‘! (24ì‹œê°„)\n\nì˜ì—…ì¼ ê¸°ì¤€ 24ì‹œê°„ ë‚´ ë‹µë³€ë“œë¦½ë‹ˆë‹¤. ë¹ ë¥¸ ë‹µë³€ì´ í•„ìš”í•˜ì‹œë©´ AI ìƒë‹´ì„ í™œìš©í•´ì£¼ì„¸ìš”!',
    keywords: ['ê³ ê°ì„¼í„°', 'ì—°ë½ì²˜', 'ì „í™”', 'ë¬¸ì˜'],
    priority: 65
  },
  {
    category: 'ê¸°íƒ€',
    question: 'ì´ë²¤íŠ¸ë‚˜ í• ì¸ì´ ìžˆë‚˜ìš”?',
    answer: 'í˜„ìž¬ ì‹ ê·œ ê°€ìž… ì´ë²¤íŠ¸ì™€ ì²« ê±°ëž˜ ì´ë²¤íŠ¸ê°€ ì§„í–‰ ì¤‘ìž…ë‹ˆë‹¤! ðŸŽ‰\n\ní™ˆíŽ˜ì´ì§€ ìƒë‹¨ ë°°ë„ˆì™€ ë§ˆì´íŽ˜ì´ì§€ â†’ ì´ë²¤íŠ¸ì—ì„œ í™•ì¸í•˜ì„¸ìš”.\n\nðŸ’¡ ì•Œë¦¼ ì„¤ì •ì„ ì¼œë‘ì‹œë©´ ì´ë²¤íŠ¸ ì†Œì‹ì„ ë°”ë¡œ ë°›ì•„ë³´ì‹¤ ìˆ˜ ìžˆì–´ìš”!',
    keywords: ['ì´ë²¤íŠ¸', 'í• ì¸', 'ì¿ í°', 'í”„ë¡œëª¨ì…˜'],
    priority: 55
  },
  {
    category: 'ë¶„ìŸ',
    question: 'ë¶„ìŸ ì¡°ì •ì€ ì–´ë–»ê²Œ ì‹ ì²­í•˜ë‚˜ìš”?',
    answer: 'ë¶„ìŸ ì¡°ì •ì€ https://dolpagu.com/help/dispute íŽ˜ì´ì§€ì—ì„œ ì‹ ì²­í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.\n\n**ì‹ ì²­ ì ˆì°¨:**\n1. ë¶„ìŸ ì¡°ì • íŽ˜ì´ì§€ ì ‘ì†\n2. ê´€ë ¨ ì£¼ë¬¸ ì„ íƒ\n3. ë¶„ìŸ ìœ í˜• ì„ íƒ (í™˜ë¶ˆ, í’ˆì§ˆ ë¶ˆë§Œ ë“±)\n4. ìƒì„¸ ë‚´ìš© ìž‘ì„±\n5. ì¦ê±° ì²¨ë¶€ (ì„ íƒ)\n\nì‹ ì²­ í›„ ìƒëŒ€ë°©ì—ê²Œ 72ì‹œê°„ ë‚´ ë‹µë³€ ê¸°íšŒê°€ ì£¼ì–´ì§€ê³ , AI ì‹¬íŒê´€ì´ íŒê²°í•©ë‹ˆë‹¤. âš–ï¸',
    keywords: ['ë¶„ìŸ', 'ì¡°ì •', 'ì‹ ì²­', 'ì‹ ê³ ', 'ë¬¸ì œ'],
    priority: 95
  },
  {
    category: 'ë¶„ìŸ',
    question: 'AI ì‹¬íŒê´€ì´ ë­”ê°€ìš”?',
    answer: '**AI ì‹¬íŒê´€**ì€ ëŒíŒŒêµ¬ë§Œì˜ í˜ì‹ ì ì¸ ë¶„ìŸ í•´ê²° ì‹œìŠ¤í…œìž…ë‹ˆë‹¤! âš–ï¸\n\n**íŠ¹ì§•:**\n- ì±„íŒ… ë¡œê·¸, ê³„ì•½ ë‚´ìš©, ì¦ê±°ë¥¼ AIê°€ ë¶„ì„\n- ë²•ì  ê¸°ì¤€(ì „ìžìƒê±°ëž˜ë²•, ì†Œë¹„ìžë³´í˜¸ë²•)ì— ë”°ë¼ íŒê²°\n- 24ì‹œê°„ ë‚´ ì‹ ì†í•œ íŒê²°\n- ì–‘ì¸¡ ëª¨ë‘ ê³µì •í•œ ê¸°íšŒ ë³´ìž¥\n\n**íŒê²° ìœ í˜•:**\n- ì „ì•¡ í™˜ë¶ˆ\n- ë¶€ë¶„ í™˜ë¶ˆ\n- í™˜ë¶ˆ ë¶ˆê°€\n- ì¶”ê°€ ì •ì‚°\n- í•©ì˜ ê¶Œê³ ',
    keywords: ['AI', 'ì‹¬íŒ', 'íŒê²°', 'ë¶„ìŸ'],
    priority: 94
  },
  {
    category: 'ë¶„ìŸ',
    question: 'í™˜ë¶ˆ ê·œì •ì´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?',
    answer: '**í™˜ë¶ˆ ê¸°ë³¸ ê·œì •:**\n\n1ï¸âƒ£ **ì„œë¹„ìŠ¤ ì‹œìž‘ ì „**: ì „ì•¡ í™˜ë¶ˆ ê°€ëŠ¥\n\n2ï¸âƒ£ **ì„œë¹„ìŠ¤ ì§„í–‰ ì¤‘**\n   - ê°€ë¶„ì  ìš©ì—­: ì§„í–‰ë˜ì§€ ì•Šì€ ë¶€ë¶„ í™˜ë¶ˆ\n   - ë¶ˆê°€ë¶„ì  ìš©ì—­ (ë””ìžì¸ ë“±): í™˜ë¶ˆ ë¶ˆê°€\n\n3ï¸âƒ£ **ì„œë¹„ìŠ¤ ì™„ë£Œ í›„ (êµ¬ë§¤ í™•ì • ì „)**: íŒë§¤ìžì™€ í˜‘ì˜\n\n4ï¸âƒ£ **êµ¬ë§¤ í™•ì • í›„**: íŒë§¤ìžì™€ ì§ì ‘ í˜‘ì˜\n\nâš ï¸ í‘œì‹œÂ·ê´‘ê³ ì™€ ë‹¤ë¥¸ ê²½ìš°: 3ê°œì›” ì´ë‚´ í™˜ë¶ˆ ê°€ëŠ¥',
    keywords: ['í™˜ë¶ˆ', 'ì·¨ì†Œ', 'ê·œì •', 'ì •ì±…'],
    priority: 93
  },
  {
    category: 'ë¶„ìŸ',
    question: 'íŒë§¤ìžê°€ ì—°ë½ì´ ì•ˆ ë¼ìš”',
    answer: 'íŒë§¤ìž ë¬´ì‘ë‹µ ì‹œ ë‹¤ìŒê³¼ ê°™ì´ ì§„í–‰í•˜ì„¸ìš”:\n\n1ï¸âƒ£ **ì±„íŒ…ìœ¼ë¡œ ìž¬ì—°ë½** (í•˜ë£¨ ê°„ê²©ìœ¼ë¡œ 2-3íšŒ)\n\n2ï¸âƒ£ **48ì‹œê°„ ì´ìƒ ë¬´ì‘ë‹µ ì‹œ**\n   â†’ ë§ˆì´íŽ˜ì´ì§€ â†’ ì£¼ë¬¸ ì·¨ì†Œ ìš”ì²­\n   ë˜ëŠ” ë¶„ìŸ ì¡°ì • ì‹ ì²­ (ë¬´ì‘ë‹µ ìœ í˜•)\n\n3ï¸âƒ£ **ë¶„ìŸ ì‹ ì²­**\n   â†’ https://dolpagu.com/help/dispute\n   â†’ "ë¬´ì‘ë‹µ/ì—°ë½ë‘ì ˆ" ìœ í˜• ì„ íƒ\n\nAI ì‹¬íŒê´€ì´ ìƒí™©ì„ ê²€í† í•˜ê³  í™˜ë¶ˆ ì¡°ì¹˜í•´ë“œë¦½ë‹ˆë‹¤. ðŸ™',
    keywords: ['ì—°ë½', 'ë¬´ì‘ë‹µ', 'ì—°ë½ë‘ì ˆ', 'ì‘ë‹µ'],
    priority: 92
  },
  {
    category: 'ë¶„ìŸ',
    question: 'ìˆ˜ì • íšŸìˆ˜ ì´ˆê³¼ ì‹œ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?',
    answer: 'ìˆ˜ì • íšŸìˆ˜ëŠ” ì„œë¹„ìŠ¤ ì„¤ëª…ì— ëª…ì‹œëœ íšŸìˆ˜ë§Œí¼ ë¬´ë£Œìž…ë‹ˆë‹¤.\n\n**ì´ˆê³¼ ì‹œ:**\n- íŒë§¤ìžê°€ ëª…ì‹œí•œ ì¶”ê°€ ë¹„ìš©ì„ ê²°ì œí•˜ê±°ë‚˜\n- ì–‘ì¸¡ í˜‘ì˜í•˜ì—¬ ê²°ì •\n\n**ë¶„ìŸ ë°œìƒ ì‹œ:**\n1. ì„œë¹„ìŠ¤ ì„¤ëª…ì— ìˆ˜ì • íšŸìˆ˜ ëª…ì‹œ í™•ì¸\n2. ì±„íŒ…ì—ì„œ ìˆ˜ì • ìš”ì²­ íšŸìˆ˜ í™•ì¸\n3. ë¶„ìŸ ì¡°ì • ì‹ ì²­ ê°€ëŠ¥\n\nðŸ’¡ íŒ: ì£¼ë¬¸ ì „ ìˆ˜ì • íšŸìˆ˜ë¥¼ ë°˜ë“œì‹œ í™•ì¸í•˜ì„¸ìš”!',
    keywords: ['ìˆ˜ì •', 'íšŸìˆ˜', 'ì¶”ê°€', 'ì´ˆê³¼'],
    priority: 91
  },
  {
    category: 'ë¶„ìŸ',
    question: 'ë””ìžì¸ì´ ë§ˆìŒì— ì•ˆ ë“¤ì–´ìš”',
    answer: 'ë””ìžì¸ì€ ì£¼ê´€ì ì´ë¼ íŒë‹¨ì´ ì–´ë ¤ìš¸ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.\n\n**í™˜ë¶ˆ ê°€ëŠ¥í•œ ê²½ìš°:**\n- ìš”ì²­í•œ ì»¨ì…‰ê³¼ ì™„ì „ížˆ ë‹¤ë¥¸ ê²½ìš°\n- ì„œë¹„ìŠ¤ ì„¤ëª…ê³¼ ë‹¤ë¥¸ í’ˆì§ˆ\n- ì•½ì†í•œ ìˆ˜ì • íšŸìˆ˜ë¥¼ ì±„ìš°ì§€ ì•Šì€ ê²½ìš°\n\n**í™˜ë¶ˆì´ ì–´ë ¤ìš´ ê²½ìš°:**\n- ë‹¨ìˆœ ì·¨í–¥ ì°¨ì´\n- ì—¬ëŸ¬ ì°¨ë¡€ ìˆ˜ì • í›„ ìµœì¢… ìŠ¹ì¸í•œ ê²½ìš°\n\nðŸ“ ë¶„ìŸ ì‹ ì²­ ì‹œ êµ¬ì²´ì ì¸ ì°¨ì´ì ì„ ì¦ê±°ì™€ í•¨ê»˜ ì œì¶œí•´ì£¼ì„¸ìš”.',
    keywords: ['ë””ìžì¸', 'ë§ˆìŒ', 'ì·¨í–¥', 'ë¶ˆë§Œ'],
    priority: 90
  },
  {
    category: 'ë¶„ìŸ',
    question: 'ë¶„ìŸ íŒê²°ì— ë™ì˜í•˜ì§€ ì•Šìœ¼ë©´?',
    answer: '**AI íŒê²°ì— ì´ì˜ê°€ ìžˆìœ¼ë©´ ì´ì˜ ì‹ ì²­ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.**\n\n**ì ˆì°¨:**\n1. íŒê²° í†µë³´ í›„ 24ì‹œê°„ ë‚´ ì´ì˜ ì‹ ì²­\n2. ê´€ë¦¬ìžê°€ ì§ì ‘ ê²€í† \n3. ìµœì¢… íŒê²° í†µë³´\n\nâš ï¸ ì´ì˜ ì‹ ì²­ì€ 1íšŒë§Œ ê°€ëŠ¥í•˜ë©°, ê´€ë¦¬ìž íŒê²°ì´ ìµœì¢…ìž…ë‹ˆë‹¤.\n\nðŸ’¡ ì¶”ê°€ ì¦ê±°ê°€ ìžˆë‹¤ë©´ ì´ì˜ ì‹ ì²­ ì‹œ í•¨ê»˜ ì œì¶œí•´ì£¼ì„¸ìš”.',
    keywords: ['ì´ì˜', 'ì‹ ì²­', 'ë¶ˆë³µ', 'ë™ì˜'],
    priority: 89
  }
];

// Helper to escape single quotes for SQL
const escapeSql = (str) => str.replaceAll("'", "''");

async function syncKnowledgeBase() {
  console.log('ðŸ”„ Syncing AI Knowledge Base...');

  // Build a single large insert query
  const values = KNOWLEDGE_BASE_DATA.map(item => {
    const keywords = `ARRAY['${item.keywords.map(k => escapeSql(k)).join("','")}']`;
    return `('${escapeSql(item.category)}', '${escapeSql(item.question)}', '${escapeSql(item.answer)}', ${keywords}, ${item.priority})`;
  }).join(',\n');

  const query = `
    INSERT INTO ai_support_knowledge (category, question, answer, keywords, priority) 
    VALUES 
    ${values}
    ON CONFLICT DO NOTHING;
  `;

  // Use the REST API to execute SQL
  const requestData = JSON.stringify({ query });

  const options = {
    hostname: 'api.supabase.com',
    path: `/v1/projects/${SUPABASE_PROJECT_REF}/database/query`,
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${SUPABASE_ACCESS_TOKEN}`,
      'Content-Type': 'application/json',
      'Content-Length': Buffer.byteLength(requestData),
    },
  };

  const req = https.request(options, (res) => {
    let data = '';
    res.on('data', (chunk) => { data += chunk; });
    res.on('end', () => {
      if (res.statusCode === 200 || res.statusCode === 201) {
        console.log('âœ… AI Knowledge Base synced successfully!');
      } else {
        console.error(`âŒ Sync failed (${res.statusCode})`);
        console.error(data);
      }
    });
  });

  req.on('error', (e) => {
    console.error('Request Error:', e.message);
  });

  req.write(requestData);
  req.end();
}

syncKnowledgeBase();
