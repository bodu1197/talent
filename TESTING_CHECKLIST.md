# ÌÖåÏä§Ìä∏ ÌôòÍ≤Ω Íµ¨Ï∂ï Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏

## üìã Î™©Ï∞®
1. [Îã®ÏúÑ ÌÖåÏä§Ìä∏ (Unit Testing)](#1-Îã®ÏúÑ-ÌÖåÏä§Ìä∏-unit-testing)
2. [ÌÜµÌï© ÌÖåÏä§Ìä∏ (Integration Testing)](#2-ÌÜµÌï©-ÌÖåÏä§Ìä∏-integration-testing)
3. [E2E ÌÖåÏä§Ìä∏ (End-to-End Testing)](#3-e2e-ÌÖåÏä§Ìä∏-end-to-end-testing)
4. [ÏãúÏä§ÌÖú ÌÖåÏä§Ìä∏](#4-ÏãúÏä§ÌÖú-ÌÖåÏä§Ìä∏)

---

## 1. Îã®ÏúÑ ÌÖåÏä§Ìä∏ (Unit Testing)

### 1.1 Ìå®ÌÇ§ÏßÄ ÏÑ§Ïπò
```bash
npm install -D vitest @vitest/ui @vitejs/plugin-react jsdom
npm install -D @testing-library/react @testing-library/jest-dom @testing-library/user-event
npm install -D @types/jest
```

### 1.2 ÏÑ§Ï†ï ÌååÏùº ÏÉùÏÑ±

**`vitest.config.ts`**
```typescript
import { defineConfig } from 'vitest/config'
import react from '@vitejs/plugin-react'
import path from 'path'

export default defineConfig({
  plugins: [react()],
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: ['./src/__tests__/setup.ts'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: [
        'node_modules/',
        'src/__tests__/',
        '**/*.d.ts',
        '**/*.config.*',
        '**/mockData',
      ],
    },
  },
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
})
```

**`src/__tests__/setup.ts`**
```typescript
import '@testing-library/jest-dom'
import { vi } from 'vitest'

// Next.js Router Mock
vi.mock('next/navigation', () => ({
  useRouter: () => ({
    push: vi.fn(),
    replace: vi.fn(),
    prefetch: vi.fn(),
    back: vi.fn(),
  }),
  useSearchParams: () => ({
    get: vi.fn(),
  }),
  usePathname: () => '/',
}))

// Supabase Client Mock
vi.mock('@/lib/supabase/client', () => ({
  createClient: vi.fn(() => ({
    auth: {
      getSession: vi.fn(() => Promise.resolve({ data: { session: null }, error: null })),
      signIn: vi.fn(),
      signOut: vi.fn(),
    },
    from: vi.fn(() => ({
      select: vi.fn(() => ({
        eq: vi.fn(() => ({
          single: vi.fn(() => Promise.resolve({ data: null, error: null })),
        })),
      })),
    })),
  })),
}))

// ÌôòÍ≤ΩÎ≥ÄÏàò Mock
process.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co'
process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'test-key'
```

### 1.3 package.json Ïä§ÌÅ¨Î¶ΩÌä∏ Ï∂îÍ∞Ä
```json
{
  "scripts": {
    "test": "vitest",
    "test:ui": "vitest --ui",
    "test:coverage": "vitest --coverage",
    "test:run": "vitest run"
  }
}
```

### 1.4 ÌÖåÏä§Ìä∏ ÌååÏùº Íµ¨Ï°∞
```
src/
‚îî‚îÄ‚îÄ __tests__/
    ‚îú‚îÄ‚îÄ setup.ts
    ‚îú‚îÄ‚îÄ unit/
    ‚îÇ   ‚îú‚îÄ‚îÄ components/
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common/
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoadingSpinner.test.tsx
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ErrorState.test.tsx
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mypage/
    ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ Sidebar.test.tsx
    ‚îÇ   ‚îî‚îÄ‚îÄ lib/
    ‚îÇ       ‚îú‚îÄ‚îÄ supabase/
    ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ queries/
    ‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ coupons.test.ts
    ‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ earnings.test.ts
    ‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ messages.test.ts
    ‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ quotes.test.ts
    ‚îÇ       ‚îî‚îÄ‚îÄ utils/
    ‚îÇ           ‚îî‚îÄ‚îÄ formatters.test.ts
    ‚îú‚îÄ‚îÄ integration/
    ‚îú‚îÄ‚îÄ e2e/
    ‚îî‚îÄ‚îÄ fixtures/
        ‚îî‚îÄ‚îÄ testData.ts
```

### 1.5 ÏòàÏãú ÌÖåÏä§Ìä∏ ÏΩîÎìú

**Ïª¥Ìè¨ÎÑåÌä∏ ÌÖåÏä§Ìä∏: `LoadingSpinner.test.tsx`**
```typescript
import { render, screen } from '@testing-library/react'
import { describe, it, expect } from 'vitest'
import LoadingSpinner from '@/components/common/LoadingSpinner'

describe('LoadingSpinner', () => {
  it('Í∏∞Î≥∏ Î©îÏãúÏßÄÏôÄ Ìï®Íªò Î†åÎçîÎßÅÎêúÎã§', () => {
    render(<LoadingSpinner message="Î°úÎî© Ï§ë..." />)
    expect(screen.getByText('Î°úÎî© Ï§ë...')).toBeInTheDocument()
  })

  it('Î©îÏãúÏßÄÍ∞Ä ÏóÜÏúºÎ©¥ Í∏∞Î≥∏ ÌÖçÏä§Ìä∏Î•º Î≥¥Ïó¨Ï§ÄÎã§', () => {
    render(<LoadingSpinner />)
    expect(screen.getByText(/loading/i)).toBeInTheDocument()
  })
})
```

**ÏøºÎ¶¨ Ìï®Ïàò ÌÖåÏä§Ìä∏: `coupons.test.ts`**
```typescript
import { describe, it, expect, vi, beforeEach } from 'vitest'
import { getUserCoupons } from '@/lib/supabase/queries/coupons'
import { createClient } from '@/lib/supabase/client'

vi.mock('@/lib/supabase/client')

describe('getUserCoupons', () => {
  beforeEach(() => {
    vi.clearAllMocks()
  })

  it('ÏÇ¨Ïö©ÏûêÏùò Ïø†Ìè∞ Î™©Î°ùÏùÑ Î∞òÌôòÌïúÎã§', async () => {
    const mockData = [
      { id: '1', coupon: { name: 'ÌÖåÏä§Ìä∏ Ïø†Ìè∞', discount_value: 5000 } },
    ]

    vi.mocked(createClient).mockReturnValue({
      from: vi.fn(() => ({
        select: vi.fn(() => ({
          eq: vi.fn(() => ({
            order: vi.fn(() => Promise.resolve({ data: mockData, error: null })),
          })),
        })),
      })),
    } as any)

    const result = await getUserCoupons('user-123')
    expect(result).toEqual(mockData)
  })

  it('ÏóêÎü¨ Î∞úÏÉù Ïãú throw ÌïúÎã§', async () => {
    const mockError = { message: 'Database error' }

    vi.mocked(createClient).mockReturnValue({
      from: vi.fn(() => ({
        select: vi.fn(() => ({
          eq: vi.fn(() => ({
            order: vi.fn(() => Promise.resolve({ data: null, error: mockError })),
          })),
        })),
      })),
    } as any)

    await expect(getUserCoupons('user-123')).rejects.toThrow()
  })
})
```

---

## 2. ÌÜµÌï© ÌÖåÏä§Ìä∏ (Integration Testing)

### 2.1 ÌÖåÏä§Ìä∏Ïö© Supabase ÏÑ§Ï†ï

**Î°úÏª¨ Supabase ÏÇ¨Ïö© (Í∂åÏû•)**
```bash
# Supabase CLIÎ°ú Î°úÏª¨ Ïù∏Ïä§ÌÑ¥Ïä§ ÏãúÏûë
supabase start

# ÌÖåÏä§Ìä∏Ïö© Îç∞Ïù¥ÌÑ∞ ÏãúÎî©
supabase db seed
```

**`.env.test`**
```env
NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-local-anon-key
DATABASE_URL=postgresql://postgres:postgres@localhost:54322/postgres
```

### 2.2 ÌÖåÏä§Ìä∏ Îç∞Ïù¥ÌÑ∞ ÏãúÎî©

**`supabase/seed.sql`**
```sql
-- ÌÖåÏä§Ìä∏Ïö© ÏÇ¨Ïö©Ïûê ÏÉùÏÑ±
INSERT INTO auth.users (id, email) VALUES
  ('test-user-1', 'buyer@test.com'),
  ('test-user-2', 'seller@test.com');

INSERT INTO public.users (id, email, name, user_type) VALUES
  ('test-user-1', 'buyer@test.com', 'ÌÖåÏä§Ìä∏ Íµ¨Îß§Ïûê', 'buyer'),
  ('test-user-2', 'seller@test.com', 'ÌÖåÏä§Ìä∏ ÌåêÎß§Ïûê', 'seller');

-- ÌÖåÏä§Ìä∏Ïö© Ïø†Ìè∞ ÏÉùÏÑ±
INSERT INTO public.coupons (code, name, discount_type, discount_value, starts_at, expires_at) VALUES
  ('TEST2025', 'ÌÖåÏä§Ìä∏ Ïø†Ìè∞', 'fixed', 5000, NOW(), NOW() + INTERVAL '30 days');

-- ÌÖåÏä§Ìä∏Ïö© ÏÑúÎπÑÏä§ ÏÉùÏÑ±
INSERT INTO public.services (seller_id, title, description, price, category_id) VALUES
  ('test-user-2', 'ÌÖåÏä§Ìä∏ ÏÑúÎπÑÏä§', 'ÌÖåÏä§Ìä∏Ïö© ÏÑúÎπÑÏä§ÏûÖÎãàÎã§', 50000,
   (SELECT id FROM categories LIMIT 1));
```

### 2.3 ÌÜµÌï© ÌÖåÏä§Ìä∏ Ìó¨Ìçº

**`src/__tests__/integration/helpers.ts`**
```typescript
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!
const supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!

export const testClient = createClient(supabaseUrl, supabaseKey)

export async function createTestUser(userData: {
  email: string
  name: string
  user_type: string
}) {
  const { data, error } = await testClient
    .from('users')
    .insert(userData)
    .select()
    .single()

  if (error) throw error
  return data
}

export async function cleanupTestData() {
  // ÌÖåÏä§Ìä∏ Îç∞Ïù¥ÌÑ∞ Ï†ïÎ¶¨
  await testClient.from('user_coupons').delete().ilike('user_id', 'test-%')
  await testClient.from('orders').delete().ilike('buyer_id', 'test-%')
  await testClient.from('users').delete().ilike('id', 'test-%')
}
```

### 2.4 ÌÜµÌï© ÌÖåÏä§Ìä∏ ÏòàÏãú

**`src/__tests__/integration/coupons-api.test.ts`**
```typescript
import { describe, it, expect, beforeAll, afterAll } from 'vitest'
import { getUserCoupons } from '@/lib/supabase/queries/coupons'
import { createTestUser, cleanupTestData, testClient } from './helpers'

describe('Coupons API Integration', () => {
  let testUserId: string

  beforeAll(async () => {
    const user = await createTestUser({
      email: 'test-coupon@test.com',
      name: 'Ïø†Ìè∞ ÌÖåÏä§Ìä∏',
      user_type: 'buyer',
    })
    testUserId = user.id

    // ÌÖåÏä§Ìä∏ Ïø†Ìè∞ Î∞úÍ∏â
    const { data: coupon } = await testClient
      .from('coupons')
      .select('id')
      .eq('code', 'TEST2025')
      .single()

    await testClient.from('user_coupons').insert({
      user_id: testUserId,
      coupon_id: coupon.id,
      expires_at: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),
    })
  })

  afterAll(async () => {
    await cleanupTestData()
  })

  it('Ïã§Ï†ú DBÏóêÏÑú ÏÇ¨Ïö©Ïûê Ïø†Ìè∞ÏùÑ Ï°∞ÌöåÌïúÎã§', async () => {
    const coupons = await getUserCoupons(testUserId)

    expect(coupons).toBeDefined()
    expect(coupons.length).toBeGreaterThan(0)
    expect(coupons[0]).toHaveProperty('coupon')
    expect(coupons[0].coupon).toHaveProperty('name')
  })
})
```

---

## 3. E2E ÌÖåÏä§Ìä∏ (End-to-End Testing)

### 3.1 Playwright ÏÑ§Ïπò Î∞è ÏÑ§Ï†ï

```bash
npm install -D @playwright/test
npx playwright install
```

**`playwright.config.ts`**
```typescript
import { defineConfig, devices } from '@playwright/test'

export default defineConfig({
  testDir: './src/__tests__/e2e',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: 'html',

  use: {
    baseURL: 'http://localhost:3000',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
    video: 'retain-on-failure',
  },

  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] },
    },
    {
      name: 'Mobile Chrome',
      use: { ...devices['Pixel 5'] },
    },
    {
      name: 'Mobile Safari',
      use: { ...devices['iPhone 12'] },
    },
  ],

  webServer: {
    command: 'npm run dev',
    url: 'http://localhost:3000',
    reuseExistingServer: !process.env.CI,
  },
})
```

### 3.2 Ïù∏Ï¶ù ÏÉÅÌÉú Í¥ÄÎ¶¨

**`src/__tests__/e2e/auth.setup.ts`**
```typescript
import { test as setup, expect } from '@playwright/test'

const authFile = 'playwright/.auth/user.json'

setup('authenticate', async ({ page }) => {
  await page.goto('/login')
  await page.fill('input[name="email"]', 'test@example.com')
  await page.fill('input[name="password"]', 'password123')
  await page.click('button[type="submit"]')

  await page.waitForURL('/mypage')
  await expect(page.locator('text=ÎßàÏù¥ÌéòÏù¥ÏßÄ')).toBeVisible()

  await page.context().storageState({ path: authFile })
})
```

### 3.3 E2E ÌÖåÏä§Ìä∏ ÏòàÏãú

**`src/__tests__/e2e/buyer-coupons.spec.ts`**
```typescript
import { test, expect } from '@playwright/test'

test.describe('Íµ¨Îß§Ïûê Ïø†Ìè∞ ÌéòÏù¥ÏßÄ', () => {
  test.use({ storageState: 'playwright/.auth/user.json' })

  test('Î≥¥Ïú† Ïø†Ìè∞ Î™©Î°ùÏùÑ ÌëúÏãúÌïúÎã§', async ({ page }) => {
    await page.goto('/mypage/buyer/coupons')

    // ÌéòÏù¥ÏßÄ Ï†úÎ™© ÌôïÏù∏
    await expect(page.locator('h1')).toContainText('Ïø†Ìè∞')

    // Ï∫êÏãú ÏûîÏï° Ïπ¥Îìú ÌôïÏù∏
    await expect(page.locator('text=Î≥¥Ïú† Ï∫êÏãú')).toBeVisible()

    // Ïø†Ìè∞ Î™©Î°ù ÎòêÎäî Îπà ÏÉÅÌÉú ÌôïÏù∏
    const hasCoupons = await page.locator('.coupon-card').count() > 0
    if (!hasCoupons) {
      await expect(page.locator('text=Î≥¥Ïú† Ï§ëÏù∏ Ïø†Ìè∞Ïù¥ ÏóÜÏäµÎãàÎã§')).toBeVisible()
    }
  })

  test('ÏÇ¨Ïö© ÎÇ¥Ïó≠ ÌÉ≠ÏúºÎ°ú Ïù¥ÎèôÌïúÎã§', async ({ page }) => {
    await page.goto('/mypage/buyer/coupons')
    await page.click('text=ÏÇ¨Ïö© ÎÇ¥Ïó≠')

    await expect(page).toHaveURL('/mypage/buyer/coupons/history')
    await expect(page.locator('h1')).toContainText('ÏÇ¨Ïö© ÎÇ¥Ïó≠')
  })

  test('Î™®Î∞îÏùº ÌôîÎ©¥ÏóêÏÑú Ï†ïÏÉÅ ÎèôÏûëÌïúÎã§', async ({ page }) => {
    await page.setViewportSize({ width: 375, height: 667 })
    await page.goto('/mypage/buyer/coupons')

    // Î™®Î∞îÏùºÏóêÏÑúÎèÑ Ï£ºÏöî ÏöîÏÜå ÌëúÏãú
    await expect(page.locator('h1')).toBeVisible()
    await expect(page.locator('text=Î≥¥Ïú† Ï∫êÏãú')).toBeVisible()
  })
})
```

**`src/__tests__/e2e/seller-earnings.spec.ts`**
```typescript
import { test, expect } from '@playwright/test'

test.describe('ÌåêÎß§Ïûê ÏàòÏùµ ÌéòÏù¥ÏßÄ', () => {
  test.use({ storageState: 'playwright/.auth/seller.json' })

  test('ÏàòÏùµ ÌòÑÌô©ÏùÑ ÌëúÏãúÌïúÎã§', async ({ page }) => {
    await page.goto('/mypage/seller/earnings')

    // ÏàòÏùµ Ïπ¥ÎìúÎì§ ÌôïÏù∏
    await expect(page.locator('text=Ï∂úÍ∏à Í∞ÄÎä• Í∏àÏï°')).toBeVisible()
    await expect(page.locator('text=Ï†ïÏÇ∞ ÎåÄÍ∏∞Ï§ë')).toBeVisible()
    await expect(page.locator('text=Ï∂úÍ∏à ÏôÑÎ£å')).toBeVisible()
    await expect(page.locator('text=Ï¥ù ÏàòÏùµ')).toBeVisible()

    // Ï∂úÍ∏à Ïã†Ï≤≠ Î≤ÑÌäº
    await expect(page.locator('text=Ï∂úÍ∏à Ïã†Ï≤≠')).toBeVisible()
  })

  test('Í±∞Îûò ÎÇ¥Ïó≠ÏùÑ ÌëúÏãúÌïúÎã§', async ({ page }) => {
    await page.goto('/mypage/seller/earnings')

    // ÌÖåÏù¥Î∏î Ìó§Îçî ÌôïÏù∏
    await expect(page.locator('th:has-text("ÎÇ†Ïßú")')).toBeVisible()
    await expect(page.locator('th:has-text("Íµ¨Î∂Ñ")')).toBeVisible()
    await expect(page.locator('th:has-text("Í∏àÏï°")')).toBeVisible()
  })
})
```

### 3.4 package.json Ïä§ÌÅ¨Î¶ΩÌä∏ Ï∂îÍ∞Ä
```json
{
  "scripts": {
    "test:e2e": "playwright test",
    "test:e2e:ui": "playwright test --ui",
    "test:e2e:debug": "playwright test --debug",
    "test:e2e:report": "playwright show-report"
  }
}
```

---

## 4. ÏãúÏä§ÌÖú ÌÖåÏä§Ìä∏

### 4.1 ÎπåÎìú Í≤ÄÏ¶ù
```bash
# TypeScript Ïª¥ÌååÏùº Ï≤¥ÌÅ¨
npx tsc --noEmit

# ÌîÑÎ°úÎçïÏÖò ÎπåÎìú
npm run build

# ESLint Ï≤¥ÌÅ¨
npm run lint
```

### 4.2 Î°úÍπÖ ÏãúÏä§ÌÖú (ÏÑ†ÌÉùÏÇ¨Ìï≠)

**Winston ÏÑ§Ïπò**
```bash
npm install winston winston-daily-rotate-file
```

**`src/lib/logger.ts`**
```typescript
import winston from 'winston'
import DailyRotateFile from 'winston-daily-rotate-file'

const logger = winston.createLogger({
  level: process.env.NODE_ENV === 'production' ? 'info' : 'debug',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.errors({ stack: true }),
    winston.format.json()
  ),
  transports: [
    new DailyRotateFile({
      filename: 'logs/error-%DATE%.log',
      datePattern: 'YYYY-MM-DD',
      level: 'error',
      maxFiles: '14d',
    }),
    new DailyRotateFile({
      filename: 'logs/combined-%DATE%.log',
      datePattern: 'YYYY-MM-DD',
      maxFiles: '14d',
    }),
  ],
})

if (process.env.NODE_ENV !== 'production') {
  logger.add(
    new winston.transports.Console({
      format: winston.format.simple(),
    })
  )
}

export default logger
```

### 4.3 ÏóêÎü¨ Ìä∏ÎûòÌÇπ (ÏÑ†ÌÉùÏÇ¨Ìï≠)

**Sentry ÏÑ§Ïπò**
```bash
npm install @sentry/nextjs
npx @sentry/wizard@latest -i nextjs
```

### 4.4 ÏÑ±Îä• ÌÖåÏä§Ìä∏

**Lighthouse CI ÏÑ§Ïπò**
```bash
npm install -D @lhci/cli
```

**`lighthouserc.js`**
```javascript
module.exports = {
  ci: {
    collect: {
      startServerCommand: 'npm run start',
      url: ['http://localhost:3000', 'http://localhost:3000/services'],
      numberOfRuns: 3,
    },
    assert: {
      preset: 'lighthouse:recommended',
      assertions: {
        'categories:performance': ['error', { minScore: 0.8 }],
        'categories:accessibility': ['error', { minScore: 0.9 }],
      },
    },
    upload: {
      target: 'temporary-public-storage',
    },
  },
}
```

---

## 5. ÌÖåÏä§Ìä∏ Ïª§Î≤ÑÎ¶¨ÏßÄ Î™©Ìëú

### 5.1 Ïö∞ÏÑ†ÏàúÏúÑÎ≥Ñ ÌÖåÏä§Ìä∏ ÎåÄÏÉÅ

**ÎÜíÏùå (Critical)**
- Ïù∏Ï¶ù/Î°úÍ∑∏Ïù∏ ÌîåÎ°úÏö∞
- Í≤∞Ï†ú ÌîÑÎ°úÏÑ∏Ïä§
- Ï£ºÎ¨∏ ÏÉùÏÑ±/Í¥ÄÎ¶¨
- ÏÇ¨Ïö©Ïûê ÌîÑÎ°úÌïÑ Í¥ÄÎ¶¨

**Ï§ëÍ∞Ñ (Important)**
- ÏÑúÎπÑÏä§ Í≤ÄÏÉâ/ÌïÑÌÑ∞ÎßÅ
- Ïø†Ìè∞ ÏãúÏä§ÌÖú
- Î©îÏãúÏßÄ ÏãúÏä§ÌÖú
- Î¶¨Î∑∞ ÏûëÏÑ±

**ÎÇÆÏùå (Nice to have)**
- UI Ïª¥Ìè¨ÎÑåÌä∏ Îã®ÏúÑ ÌÖåÏä§Ìä∏
- Ïú†Ìã∏Î¶¨Ìã∞ Ìï®Ïàò
- Ï†ïÏ†Å ÌéòÏù¥ÏßÄ

### 5.2 Ïª§Î≤ÑÎ¶¨ÏßÄ Î™©Ìëú
- Ï†ÑÏ≤¥ ÏΩîÎìú Ïª§Î≤ÑÎ¶¨ÏßÄ: 60% Ïù¥ÏÉÅ
- ÌïµÏã¨ ÎπÑÏ¶àÎãàÏä§ Î°úÏßÅ: 80% Ïù¥ÏÉÅ
- Ïú†Ìã∏Î¶¨Ìã∞ Ìï®Ïàò: 90% Ïù¥ÏÉÅ

---

## 6. CI/CD ÌÜµÌï©

### 6.1 GitHub Actions ÏÑ§Ï†ï

**`.github/workflows/test.yml`**
```yaml
name: Test

on:
  push:
    branches: [master, main]
  pull_request:
    branches: [master, main]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Run unit tests
        run: npm run test:run

      - name: Run build
        run: npm run build

      - name: Install Playwright
        run: npx playwright install --with-deps

      - name: Run E2E tests
        run: npm run test:e2e

      - name: Upload test results
        if: always()
        uses: actions/upload-artifact@v3
        with:
          name: test-results
          path: playwright-report/
```

---

## 7. ÌÖåÏä§Ìä∏ Ïã§Ìñâ ÏàúÏÑú

### Í∞úÎ∞ú Ï§ë
```bash
# 1. Îã®ÏúÑ ÌÖåÏä§Ìä∏ (Îπ†Î¶Ñ, ÏûêÏ£º Ïã§Ìñâ)
npm run test

# 2. ÌäπÏ†ï ÌååÏùºÎßå ÌÖåÏä§Ìä∏
npm run test src/__tests__/unit/queries/coupons.test.ts

# 3. Watch Î™®ÎìúÎ°ú Ïã§Ìñâ
npm run test -- --watch
```

### Ïª§Î∞ã Ï†Ñ
```bash
# 1. Ï†ÑÏ≤¥ Îã®ÏúÑ ÌÖåÏä§Ìä∏
npm run test:run

# 2. ÎπåÎìú ÌôïÏù∏
npm run build

# 3. Lint ÌôïÏù∏
npm run lint
```

### Î∞∞Ìè¨ Ï†Ñ
```bash
# 1. Ï†ÑÏ≤¥ ÌÖåÏä§Ìä∏
npm run test:run
npm run test:e2e

# 2. Ïª§Î≤ÑÎ¶¨ÏßÄ ÌôïÏù∏
npm run test:coverage

# 3. ÌîÑÎ°úÎçïÏÖò ÎπåÎìú
npm run build
```

---

## 8. Ìä∏Îü¨Î∏îÏäàÌåÖ

### Î¨∏Ï†ú 1: Supabase mockÏù¥ ÏûëÎèôÌïòÏßÄ ÏïäÏùå
**Ìï¥Í≤∞Ï±Ö**: `setup.ts`ÏóêÏÑú mock ÏÑ§Ï†ï ÌôïÏù∏ Î∞è `vi.clearAllMocks()` ÏÇ¨Ïö©

### Î¨∏Ï†ú 2: E2E ÌÖåÏä§Ìä∏ÏóêÏÑú Ïù∏Ï¶ù Ïã§Ìå®
**Ìï¥Í≤∞Ï±Ö**: `auth.setup.ts` Ïã§Ìñâ ÌõÑ storageState ÌååÏùº ÏÉùÏÑ± ÌôïÏù∏

### Î¨∏Ï†ú 3: ÌÖåÏä§Ìä∏Í∞Ä ÎÑàÎ¨¥ ÎäêÎ¶º
**Ìï¥Í≤∞Ï±Ö**: Îã®ÏúÑ ÌÖåÏä§Ìä∏ÏôÄ ÌÜµÌï© ÌÖåÏä§Ìä∏ Î∂ÑÎ¶¨, Î≥ëÎ†¨ Ïã§Ìñâ ÏÑ§Ï†ï

### Î¨∏Ï†ú 4: CIÏóêÏÑú ÌÖåÏä§Ìä∏ Ïã§Ìå®
**Ìï¥Í≤∞Ï±Ö**: ÌôòÍ≤ΩÎ≥ÄÏàò ÏÑ§Ï†ï ÌôïÏù∏, ÌÉÄÏûÑÏïÑÏõÉ Ï¶ùÍ∞Ä

---

## 9. Ïú†Ïö©Ìïú Î™ÖÎ†πÏñ¥ Î™®Ïùå

```bash
# Vitest UIÎ°ú ÌÖåÏä§Ìä∏ Î≥¥Í∏∞
npm run test:ui

# ÌäπÏ†ï ÌÖåÏä§Ìä∏Îßå Ïã§Ìñâ
npm run test -- coupons

# Ïª§Î≤ÑÎ¶¨ÏßÄ ÌôïÏù∏
npm run test:coverage

# E2E ÌÖåÏä§Ìä∏ ÎîîÎ≤ÑÍ∑∏
npm run test:e2e:debug

# Playwright UI Î™®Îìú
npm run test:e2e:ui

# ÌÖåÏä§Ìä∏ Î¶¨Ìè¨Ìä∏ Î≥¥Í∏∞
npm run test:e2e:report
```

---

## ÏôÑÎ£å Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏

- [ ] Vitest ÏÑ§Ïπò Î∞è ÏÑ§Ï†ï
- [ ] React Testing Library ÏÑ§Ïπò
- [ ] ÌÖåÏä§Ìä∏ setup ÌååÏùº ÏûëÏÑ±
- [ ] Îã®ÏúÑ ÌÖåÏä§Ìä∏ ÏòàÏãú ÏûëÏÑ±
- [ ] Î°úÏª¨ Supabase ÏÑ§Ï†ï
- [ ] ÌÜµÌï© ÌÖåÏä§Ìä∏ Ìó¨Ìçº ÏûëÏÑ±
- [ ] ÌÜµÌï© ÌÖåÏä§Ìä∏ ÏòàÏãú ÏûëÏÑ±
- [ ] Playwright ÏÑ§Ïπò
- [ ] E2E ÌÖåÏä§Ìä∏ ÏÑ§Ï†ï
- [ ] E2E ÌÖåÏä§Ìä∏ ÏòàÏãú ÏûëÏÑ±
- [ ] CI/CD ÌååÏù¥ÌîÑÎùºÏù∏ ÏÑ§Ï†ï
- [ ] Ï≤´ Î≤àÏß∏ ÌÖåÏä§Ìä∏ ÌÜµÍ≥º ‚úÖ

---

**Î¨∏ÏÑú ÏûëÏÑ±Ïùº**: 2025-10-28
**ÏµúÏ¢Ö ÏàòÏ†ïÏùº**: 2025-10-28
**ÏûëÏÑ±Ïûê**: Claude Code
