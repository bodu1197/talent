[
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Anyone can view portfolio images",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "SELECT",
    "qual": "(bucket_id = 'portfolio'::text)",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Anyone can view uploaded files",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "SELECT",
    "qual": "(bucket_id = 'uploads'::text)",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Authenticated users can upload files",
    "permissive": "PERMISSIVE",
    "roles": "{authenticated}",
    "cmd": "INSERT",
    "qual": null,
    "with_check": "(bucket_id = 'uploads'::text)"
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Authenticated users can upload portfolio images",
    "permissive": "PERMISSIVE",
    "roles": "{authenticated}",
    "cmd": "INSERT",
    "qual": null,
    "with_check": "(bucket_id = 'portfolio'::text)"
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Buyers can upload review images",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "INSERT",
    "qual": null,
    "with_check": "((bucket_id = 'reviews'::text) AND (EXISTS ( SELECT 1\n   FROM reviews\n  WHERE (((reviews.id)::text = (storage.foldername(objects.name))[1]) AND (reviews.buyer_id = auth.uid())))))"
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Conversation participants can upload files",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "INSERT",
    "qual": null,
    "with_check": "((bucket_id = 'messages'::text) AND (EXISTS ( SELECT 1\n   FROM conversations\n  WHERE (((conversations.id)::text = (storage.foldername(objects.name))[1]) AND ((conversations.participant1_id = auth.uid()) OR (conversations.participant2_id = auth.uid()))))))"
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Dispute files viewable by participants and admins",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "SELECT",
    "qual": "((bucket_id = 'disputes'::text) AND ((EXISTS ( SELECT 1\n   FROM disputes\n  WHERE (((disputes.id)::text = (storage.foldername(objects.name))[1]) AND (disputes.initiated_by = auth.uid())))) OR (EXISTS ( SELECT 1\n   FROM admins\n  WHERE (admins.user_id = auth.uid())))))",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Dispute initiators can upload files",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "INSERT",
    "qual": null,
    "with_check": "((bucket_id = 'disputes'::text) AND (EXISTS ( SELECT 1\n   FROM disputes\n  WHERE (((disputes.id)::text = (storage.foldername(objects.name))[1]) AND (disputes.initiated_by = auth.uid())))))"
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Message files viewable by participants",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "SELECT",
    "qual": "((bucket_id = 'messages'::text) AND (EXISTS ( SELECT 1\n   FROM conversations\n  WHERE (((conversations.id)::text = (storage.foldername(objects.name))[1]) AND ((conversations.participant1_id = auth.uid()) OR (conversations.participant2_id = auth.uid()))))))",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Only owner can view business documents",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "SELECT",
    "qual": "((bucket_id = 'business-documents'::text) AND ((storage.foldername(name))[1] = (( SELECT auth.uid() AS uid))::text))",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Order files viewable by participants",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "SELECT",
    "qual": "((bucket_id = 'orders'::text) AND (EXISTS ( SELECT 1\n   FROM orders\n  WHERE (((orders.id)::text = (storage.foldername(objects.name))[1]) AND ((orders.buyer_id = auth.uid()) OR (orders.seller_id = auth.uid()))))))",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Order participants can upload files",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "INSERT",
    "qual": null,
    "with_check": "((bucket_id = 'orders'::text) AND (EXISTS ( SELECT 1\n   FROM orders\n  WHERE (((orders.id)::text = (storage.foldername(objects.name))[1]) AND ((orders.buyer_id = auth.uid()) OR (orders.seller_id = auth.uid()))))))"
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Portfolios are viewable by everyone",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "SELECT",
    "qual": "(bucket_id = 'portfolios'::text)",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Public profiles are viewable by everyone",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "SELECT",
    "qual": "(bucket_id = 'profiles'::text)",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Public read access for food-stores",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "SELECT",
    "qual": "(bucket_id = 'food-stores'::text)",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Public services are viewable by everyone",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "SELECT",
    "qual": "(bucket_id = 'services'::text)",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Review images are public",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "SELECT",
    "qual": "(bucket_id = 'reviews'::text)",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Sellers can delete their service thumbnails",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "DELETE",
    "qual": "((bucket_id = 'services'::text) AND (auth.role() = 'authenticated'::text))",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Sellers can update own service images",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "UPDATE",
    "qual": "((bucket_id = 'services'::text) AND ((auth.uid())::text = (storage.foldername(name))[1]))",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Sellers can update their service thumbnails",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "UPDATE",
    "qual": "((bucket_id = 'services'::text) AND (auth.role() = 'authenticated'::text))",
    "with_check": "((bucket_id = 'services'::text) AND (auth.role() = 'authenticated'::text))"
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Sellers can upload service thumbnails",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "INSERT",
    "qual": null,
    "with_check": "((bucket_id = 'services'::text) AND (auth.role() = 'authenticated'::text))"
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Service images are viewable by everyone",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "SELECT",
    "qual": "(bucket_id = 'services'::text)",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Users can delete own files",
    "permissive": "PERMISSIVE",
    "roles": "{authenticated}",
    "cmd": "DELETE",
    "qual": "((bucket_id = 'uploads'::text) AND ((auth.uid())::text = (storage.foldername(name))[1]))",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Users can delete own profile image",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "DELETE",
    "qual": "((bucket_id = 'profiles'::text) AND ((auth.uid())::text = (storage.foldername(name))[1]))",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Users can delete portfolio images",
    "permissive": "PERMISSIVE",
    "roles": "{authenticated}",
    "cmd": "DELETE",
    "qual": "(bucket_id = 'portfolio'::text)",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Users can delete their own files in food-stores",
    "permissive": "PERMISSIVE",
    "roles": "{authenticated}",
    "cmd": "DELETE",
    "qual": "((bucket_id = 'food-stores'::text) AND ((storage.foldername(name))[1] = (auth.uid())::text))",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Users can delete their own profile images",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "DELETE",
    "qual": "((bucket_id = 'profiles'::text) AND (auth.role() = 'authenticated'::text))",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Users can update own profile image",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "UPDATE",
    "qual": "((bucket_id = 'profiles'::text) AND ((auth.uid())::text = (storage.foldername(name))[1]))",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Users can update portfolio images",
    "permissive": "PERMISSIVE",
    "roles": "{authenticated}",
    "cmd": "UPDATE",
    "qual": "(bucket_id = 'portfolio'::text)",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Users can update their own files in food-stores",
    "permissive": "PERMISSIVE",
    "roles": "{authenticated}",
    "cmd": "UPDATE",
    "qual": "((bucket_id = 'food-stores'::text) AND ((storage.foldername(name))[1] = (auth.uid())::text))",
    "with_check": null
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Users can update their own profile images",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "UPDATE",
    "qual": "((bucket_id = 'profiles'::text) AND (auth.role() = 'authenticated'::text))",
    "with_check": "((bucket_id = 'profiles'::text) AND (auth.role() = 'authenticated'::text))"
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Users can upload business documents",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "INSERT",
    "qual": null,
    "with_check": "(bucket_id = 'business-documents'::text)"
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Users can upload own profile image",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "INSERT",
    "qual": null,
    "with_check": "((bucket_id = 'profiles'::text) AND ((auth.uid())::text = (storage.foldername(name))[1]))"
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Users can upload their own profile images",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "INSERT",
    "qual": null,
    "with_check": "((bucket_id = 'profiles'::text) AND (auth.role() = 'authenticated'::text))"
  },
  {
    "schemaname": "storage",
    "tablename": "objects",
    "policyname": "Users can upload to food-stores",
    "permissive": "PERMISSIVE",
    "roles": "{public}",
    "cmd": "INSERT",
    "qual": null,
    "with_check": "(bucket_id = 'food-stores'::text)"
  }
]
