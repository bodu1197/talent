{
  "statistics": {
    "detectionDate": "2025-12-17T03:42:08.036Z",
    "formats": {
      "typescript": {
        "sources": {
          "src/app/api/errands/[id]/applications/[appId]/route.ts": {
            "lines": 241,
            "tokens": 2376,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 64,
            "duplicatedTokens": 659,
            "percentage": 26.56,
            "percentageTokens": 27.74,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/webhook/portone/payment/route.ts": {
            "lines": 239,
            "tokens": 1894,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 10,
            "duplicatedTokens": 96,
            "percentage": 4.18,
            "percentageTokens": 5.07,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/webhook/portone/identity/route.ts": {
            "lines": 125,
            "tokens": 992,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/seller/services/[serviceId]/route.ts": {
            "lines": 216,
            "tokens": 2063,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 11,
            "duplicatedTokens": 119,
            "percentage": 5.09,
            "percentageTokens": 5.77,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/seller/portfolio/[id]/route.ts": {
            "lines": 143,
            "tokens": 1490,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 48,
            "duplicatedTokens": 537,
            "percentage": 33.57,
            "percentageTokens": 36.04,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/seller/advertising/dashboard/route.ts": {
            "lines": 116,
            "tokens": 1247,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 10,
            "duplicatedTokens": 94,
            "percentage": 8.62,
            "percentageTokens": 7.54,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/seller/advertising/bank-transfer/route.ts": {
            "lines": 139,
            "tokens": 1366,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 10,
            "duplicatedTokens": 94,
            "percentage": 7.19,
            "percentageTokens": 6.88,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/payments/bank-transfer/request/route.ts": {
            "lines": 101,
            "tokens": 954,
            "sources": 1,
            "clones": 10,
            "duplicatedLines": 121,
            "duplicatedTokens": 1352,
            "percentage": 119.8,
            "percentageTokens": 141.72,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/payments/advertising/verify/route.ts": {
            "lines": 230,
            "tokens": 2131,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 46,
            "duplicatedTokens": 458,
            "percentage": 20,
            "percentageTokens": 21.49,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/payments/advertising/prepare/route.ts": {
            "lines": 100,
            "tokens": 969,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 11,
            "duplicatedTokens": 138,
            "percentage": 11,
            "percentageTokens": 14.24,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/orders/[id]/status/route.ts": {
            "lines": 148,
            "tokens": 1296,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 63,
            "duplicatedTokens": 607,
            "percentage": 42.57,
            "percentageTokens": 46.84,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/orders/[id]/revision/route.ts": {
            "lines": 76,
            "tokens": 774,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 14,
            "duplicatedTokens": 124,
            "percentage": 18.42,
            "percentageTokens": 16.02,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/orders/[id]/confirm/route.ts": {
            "lines": 112,
            "tokens": 957,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 20,
            "duplicatedTokens": 200,
            "percentage": 17.86,
            "percentageTokens": 20.9,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/orders/[id]/complete-revision/route.ts": {
            "lines": 81,
            "tokens": 772,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 65,
            "duplicatedTokens": 651,
            "percentage": 80.25,
            "percentageTokens": 84.33,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/orders/[id]/cancel/route.ts": {
            "lines": 170,
            "tokens": 1549,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 25,
            "duplicatedTokens": 268,
            "percentage": 14.71,
            "percentageTokens": 17.3,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/notifications/[id]/read/route.ts": {
            "lines": 37,
            "tokens": 406,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 15,
            "duplicatedTokens": 172,
            "percentage": 40.54,
            "percentageTokens": 42.36,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/experts/nearby/categories/route.ts": {
            "lines": 81,
            "tokens": 674,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 20,
            "duplicatedTokens": 148,
            "percentage": 24.69,
            "percentageTokens": 21.96,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/errands/[id]/chat/route.ts": {
            "lines": 251,
            "tokens": 2260,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 56,
            "duplicatedTokens": 542,
            "percentage": 22.31,
            "percentageTokens": 23.98,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/errands/[id]/applications/route.ts": {
            "lines": 313,
            "tokens": 2853,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 50,
            "duplicatedTokens": 530,
            "percentage": 15.97,
            "percentageTokens": 18.58,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/errands/nearby-helpers/list/route.ts": {
            "lines": 102,
            "tokens": 1120,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 147,
            "percentage": 11.76,
            "percentageTokens": 13.13,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/chat/rooms/create-from-order/route.ts": {
            "lines": 84,
            "tokens": 795,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 46,
            "duplicatedTokens": 464,
            "percentage": 54.76,
            "percentageTokens": 58.36,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/chat/messages/mark-read/route.ts": {
            "lines": 50,
            "tokens": 498,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/chat/messages/mark-all-read/route.ts": {
            "lines": 34,
            "tokens": 367,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 22,
            "duplicatedTokens": 206,
            "percentage": 64.71,
            "percentageTokens": 56.13,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/advertising/track/impression/route.ts": {
            "lines": 70,
            "tokens": 598,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/advertising/track/click/route.ts": {
            "lines": 87,
            "tokens": 747,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/admin/users/[userId]/route.ts": {
            "lines": 159,
            "tokens": 1854,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 11,
            "duplicatedTokens": 119,
            "percentage": 6.92,
            "percentageTokens": 6.42,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/admin/analytics/referrers/route.ts": {
            "lines": 63,
            "tokens": 619,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 35,
            "duplicatedTokens": 342,
            "percentage": 55.56,
            "percentageTokens": 55.25,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/admin/analytics/realtime/route.ts": {
            "lines": 84,
            "tokens": 854,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 14,
            "duplicatedTokens": 115,
            "percentage": 16.67,
            "percentageTokens": 13.47,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/admin/analytics/devices/route.ts": {
            "lines": 86,
            "tokens": 824,
            "sources": 1,
            "clones": 9,
            "duplicatedLines": 102,
            "duplicatedTokens": 1073,
            "percentage": 118.6,
            "percentageTokens": 130.22,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/admin/advertising/statistics/route.ts": {
            "lines": 264,
            "tokens": 2400,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 11,
            "duplicatedTokens": 115,
            "percentage": 4.17,
            "percentageTokens": 4.79,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/admin/advertising/payments/route.ts": {
            "lines": 349,
            "tokens": 3195,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 58,
            "duplicatedTokens": 627,
            "percentage": 16.62,
            "percentageTokens": 19.62,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/admin/advertising/credits/route.ts": {
            "lines": 234,
            "tokens": 2169,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 60,
            "duplicatedTokens": 662,
            "percentage": 25.64,
            "percentageTokens": 30.52,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/verification/business/route.ts": {
            "lines": 139,
            "tokens": 1198,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/verification/bank-account/route.ts": {
            "lines": 235,
            "tokens": 1958,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/users/profile/route.ts": {
            "lines": 79,
            "tokens": 687,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/user/service-views/route.ts": {
            "lines": 95,
            "tokens": 826,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 21,
            "duplicatedTokens": 253,
            "percentage": 22.11,
            "percentageTokens": 30.63,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/user/service-favorites/route.ts": {
            "lines": 160,
            "tokens": 1548,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 38,
            "duplicatedTokens": 434,
            "percentage": 23.75,
            "percentageTokens": 28.04,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/user/category-visits/route.ts": {
            "lines": 133,
            "tokens": 1160,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/seller/portfolio/route.ts": {
            "lines": 101,
            "tokens": 856,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 139,
            "percentage": 11.88,
            "percentageTokens": 16.24,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/seller/check/route.ts": {
            "lines": 27,
            "tokens": 262,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 62,
            "duplicatedTokens": 593,
            "percentage": 229.63,
            "percentageTokens": 226.34,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/search/services/route.ts": {
            "lines": 62,
            "tokens": 518,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/payments/verify-direct/route.ts": {
            "lines": 133,
            "tokens": 1218,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 100,
            "percentage": 9.02,
            "percentageTokens": 8.21,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/payments/verify/route.ts": {
            "lines": 124,
            "tokens": 957,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 100,
            "percentage": 9.68,
            "percentageTokens": 10.45,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/payments/prepare/route.ts": {
            "lines": 103,
            "tokens": 1049,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 29,
            "duplicatedTokens": 299,
            "percentage": 28.16,
            "percentageTokens": 28.5,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/payments/mock-payment/route.ts": {
            "lines": 69,
            "tokens": 674,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 39,
            "duplicatedTokens": 388,
            "percentage": 56.52,
            "percentageTokens": 57.57,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/payments/direct-purchase/route.ts": {
            "lines": 246,
            "tokens": 2201,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 46,
            "duplicatedTokens": 443,
            "percentage": 18.7,
            "percentageTokens": 20.13,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/payment-requests/[id]/route.ts": {
            "lines": 87,
            "tokens": 888,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 110,
            "percentage": 13.79,
            "percentageTokens": 12.39,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/orders/[id]/route.ts": {
            "lines": 73,
            "tokens": 688,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 15,
            "duplicatedTokens": 165,
            "percentage": 20.55,
            "percentageTokens": 23.98,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/orders/seller/route.ts": {
            "lines": 70,
            "tokens": 596,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 29,
            "duplicatedTokens": 222,
            "percentage": 41.43,
            "percentageTokens": 37.25,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/orders/buyer/route.ts": {
            "lines": 41,
            "tokens": 335,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 29,
            "duplicatedTokens": 222,
            "percentage": 70.73,
            "percentageTokens": 66.27,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/notifications/read-all/route.ts": {
            "lines": 35,
            "tokens": 360,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 37,
            "duplicatedTokens": 346,
            "percentage": 105.71,
            "percentageTokens": 96.11,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/notifications/count/route.ts": {
            "lines": 35,
            "tokens": 376,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 13,
            "duplicatedTokens": 121,
            "percentage": 37.14,
            "percentageTokens": 32.18,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/nice/verify/route.ts": {
            "lines": 146,
            "tokens": 88,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/mypage/recent-activities/route.ts": {
            "lines": 152,
            "tokens": 1542,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 22,
            "duplicatedTokens": 197,
            "percentage": 14.47,
            "percentageTokens": 12.78,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/mypage/hub-stats/route.ts": {
            "lines": 73,
            "tokens": 693,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 14,
            "duplicatedTokens": 134,
            "percentage": 19.18,
            "percentageTokens": 19.34,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/helper/location/route.ts": {
            "lines": 177,
            "tokens": 1633,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 72,
            "duplicatedTokens": 665,
            "percentage": 40.68,
            "percentageTokens": 40.72,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/helper/check/route.ts": {
            "lines": 27,
            "tokens": 262,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 14,
            "duplicatedTokens": 141,
            "percentage": 51.85,
            "percentageTokens": 53.82,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/experts/nearby/route.ts": {
            "lines": 72,
            "tokens": 642,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 20,
            "duplicatedTokens": 148,
            "percentage": 27.78,
            "percentageTokens": 23.05,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/errands/[id]/route.ts": {
            "lines": 350,
            "tokens": 3072,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 24,
            "duplicatedTokens": 202,
            "percentage": 6.86,
            "percentageTokens": 6.58,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/errands/nearby-helpers/route.ts": {
            "lines": 139,
            "tokens": 1295,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 147,
            "percentage": 8.63,
            "percentageTokens": 11.35,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/debug/rpc-test/route.ts": {
            "lines": 63,
            "tokens": 513,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 99,
            "percentage": 19.05,
            "percentageTokens": 19.3,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/debug/personalized/route.ts": {
            "lines": 164,
            "tokens": 1303,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 23,
            "duplicatedTokens": 187,
            "percentage": 14.02,
            "percentageTokens": 14.35,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/debug/category-visits/route.ts": {
            "lines": 43,
            "tokens": 377,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/cron/auto-confirm/route.ts": {
            "lines": 116,
            "tokens": 1053,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/cron/advertising/route.ts": {
            "lines": 74,
            "tokens": 653,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/chat/unread-count/route.ts": {
            "lines": 55,
            "tokens": 584,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 22,
            "duplicatedTokens": 215,
            "percentage": 40,
            "percentageTokens": 36.82,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/chat/search/route.ts": {
            "lines": 48,
            "tokens": 516,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 24,
            "duplicatedTokens": 237,
            "percentage": 50,
            "percentageTokens": 45.93,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/chat/rooms/route.ts": {
            "lines": 347,
            "tokens": 3294,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 22,
            "duplicatedTokens": 213,
            "percentage": 6.34,
            "percentageTokens": 6.47,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/chat/messages/route.ts": {
            "lines": 201,
            "tokens": 1869,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 25,
            "duplicatedTokens": 272,
            "percentage": 12.44,
            "percentageTokens": 14.55,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/chat/favorites/route.ts": {
            "lines": 51,
            "tokens": 500,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/categories/service-type/route.ts": {
            "lines": 73,
            "tokens": 607,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/categories/service-counts/route.ts": {
            "lines": 69,
            "tokens": 684,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/auth/verify-identity/route.ts": {
            "lines": 128,
            "tokens": 1206,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 24,
            "duplicatedTokens": 238,
            "percentage": 18.75,
            "percentageTokens": 19.73,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/auth/check-email/route.ts": {
            "lines": 48,
            "tokens": 423,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/analytics/trending-categories/route.ts": {
            "lines": 170,
            "tokens": 1558,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/analytics/track/route.ts": {
            "lines": 108,
            "tokens": 1003,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/admin/migrate-location/route.ts": {
            "lines": 244,
            "tokens": 571,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/admin/categories/route.ts": {
            "lines": 203,
            "tokens": 2001,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 62,
            "duplicatedTokens": 677,
            "percentage": 30.54,
            "percentageTokens": 33.83,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/admin/analytics/route.ts": {
            "lines": 290,
            "tokens": 2679,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 23,
            "duplicatedTokens": 271,
            "percentage": 7.93,
            "percentageTokens": 10.12,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/admin/advertising/route.ts": {
            "lines": 223,
            "tokens": 2122,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 37,
            "duplicatedTokens": 404,
            "percentage": 16.59,
            "percentageTokens": 19.04,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/address/search/route.ts": {
            "lines": 184,
            "tokens": 1702,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/address/reverse-geocode/route.ts": {
            "lines": 58,
            "tokens": 605,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/address/geocode/route.ts": {
            "lines": 68,
            "tokens": 761,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/address/directions/route.ts": {
            "lines": 104,
            "tokens": 1147,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/weather/route.ts": {
            "lines": 208,
            "tokens": 2094,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/upload/route.ts": {
            "lines": 105,
            "tokens": 947,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 11,
            "duplicatedTokens": 103,
            "percentage": 10.48,
            "percentageTokens": 10.88,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/sentry-test/route.ts": {
            "lines": 14,
            "tokens": 29,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/rollbar-test/route.ts": {
            "lines": 25,
            "tokens": 202,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/portfolio/route.ts": {
            "lines": 57,
            "tokens": 611,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 21,
            "duplicatedTokens": 198,
            "percentage": 36.84,
            "percentageTokens": 32.41,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/payment-requests/route.ts": {
            "lines": 149,
            "tokens": 1547,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 29,
            "duplicatedTokens": 296,
            "percentage": 19.46,
            "percentageTokens": 19.13,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/notifications/route.ts": {
            "lines": 47,
            "tokens": 478,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 13,
            "duplicatedTokens": 119,
            "percentage": 27.66,
            "percentageTokens": 24.9,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/helper/route.ts": {
            "lines": 216,
            "tokens": 2007,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 36,
            "duplicatedTokens": 339,
            "percentage": 16.67,
            "percentageTokens": 16.89,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/app/api/errands/route.ts": {
            "lines": 582,
            "tokens": 5359,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 10,
            "duplicatedTokens": 94,
            "percentage": 1.72,
            "percentageTokens": 1.75,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 12303,
          "tokens": 111650,
          "sources": 93,
          "clones": 82,
          "duplicatedLines": 1004,
          "duplicatedTokens": 10095,
          "percentage": 8.16,
          "percentageTokens": 9.04,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      }
    },
    "total": {
      "lines": 12303,
      "tokens": 111650,
      "sources": 93,
      "clones": 82,
      "duplicatedLines": 1004,
      "duplicatedTokens": 10095,
      "percentage": 8.16,
      "percentageTokens": 9.04,
      "newDuplicatedLines": 0,
      "newClones": 0
    }
  },
  "duplicates": [
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "(request: NextRequest, { params }: RouteParams) {\r\n  try {\r\n    const { id, appId } = await params;\r\n\r\n    // 사용자 인증 확인\r\n    const authResult = await requireLogin();\r\n    if (!authResult.success) {\r\n      return authResult.error!;\r\n    }\r\n\r\n    const { user, supabase } = authResult;\r\n    if (!user || !supabase) {\r\n      return NextResponse.json({ error: 'Authentication failed' }, { status: 401 });\r\n    }\r\n\r\n    // 헬퍼 프로필 확인",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\errands\\[id]\\applications\\[appId]\\route.ts",
        "start": 177,
        "end": 192,
        "startLoc": {
          "line": 177,
          "column": 7,
          "position": 1705
        },
        "endLoc": {
          "line": 192,
          "column": 13,
          "position": 1871
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\errands\\[id]\\applications\\[appId]\\route.ts",
        "start": 86,
        "end": 101,
        "startLoc": {
          "line": 86,
          "column": 6,
          "position": 677
        },
        "endLoc": {
          "line": 101,
          "column": 25,
          "position": 843
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "();\n    if (!authResult.success) {\n      return authResult.error!;\n    }\n\n    const { user, supabase } = authResult;\n    if (!user || !supabase) {\n      return NextResponse.json({ error: 'Authentication failed' }, { status: 401 });\n    }\n\n    const",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\seller\\portfolio\\[id]\\route.ts",
        "start": 13,
        "end": 23,
        "startLoc": {
          "line": 13,
          "column": 12,
          "position": 133
        },
        "endLoc": {
          "line": 23,
          "column": 6,
          "position": 227
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\errands\\[id]\\applications\\[appId]\\route.ts",
        "start": 91,
        "end": 101,
        "startLoc": {
          "line": 91,
          "column": 13,
          "position": 739
        },
        "endLoc": {
          "line": 101,
          "column": 25,
          "position": 843
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "(request: NextRequest, { params }: { params: Promise<{ id: string }> }) {\n  try {\n    const authResult = await requireAuth();\n    if (!authResult.success) {\n      return authResult.error!;\n    }\n\n    const { user, supabase } = authResult;\n    if (!user || !supabase) {\n      return NextResponse.json({ error: 'Authentication failed' }, { status: 401 });\n    }\n\n    const { id: portfolioId } = await params;\n    const",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\seller\\portfolio\\[id]\\route.ts",
        "start": 47,
        "end": 60,
        "startLoc": {
          "line": 47,
          "column": 4,
          "position": 481
        },
        "endLoc": {
          "line": 60,
          "column": 6,
          "position": 645
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\seller\\portfolio\\[id]\\route.ts",
        "start": 8,
        "end": 25,
        "startLoc": {
          "line": 8,
          "column": 7,
          "position": 78
        },
        "endLoc": {
          "line": 25,
          "column": 16,
          "position": 247
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "const { data: seller } = await serviceSupabase\n      .from('sellers')\n      .select('id')\n      .eq('user_id', user.id)\n      .single();\n\n    if (!seller) {\n      return NextResponse.json({ error: 'Seller not found' }, { status: 404 });\n    }\n\n    // Upload receipt image if provided",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\seller\\advertising\\bank-transfer\\route.ts",
        "start": 50,
        "end": 60,
        "startLoc": {
          "line": 50,
          "column": 5,
          "position": 547
        },
        "endLoc": {
          "line": 60,
          "column": 36,
          "position": 641
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\seller\\advertising\\dashboard\\route.ts",
        "start": 20,
        "end": 30,
        "startLoc": {
          "line": 20,
          "column": 5,
          "position": 204
        },
        "endLoc": {
          "line": 30,
          "column": 24,
          "position": 308
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(paymentId: string) {\n  const apiSecret = process.env.PORTONE_API_SECRET;\n  if (!apiSecret) {\n    throw new Error('PortOne API Secret이 설정되지 않았습니다');\n  }\n\n  const response = await fetch(`https://api.portone.io/payments/${encodeURIComponent(paymentId)}`, {\n    method: 'GET',\n    headers: {\n      Authorization: `PortOne ${apiSecret}`,\n    }",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\payments\\advertising\\verify\\route.ts",
        "start": 7,
        "end": 17,
        "startLoc": {
          "line": 7,
          "column": 18,
          "position": 65
        },
        "endLoc": {
          "line": 17,
          "column": 2,
          "position": 161
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\webhook\\portone\\payment\\route.ts",
        "start": 12,
        "end": 22,
        "startLoc": {
          "line": 12,
          "column": 15,
          "position": 82
        },
        "endLoc": {
          "line": 22,
          "column": 15,
          "position": 178
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ") {\n  try {\n    const authResult = await requireAuth();\n    if (!authResult.success) {\n      return authResult.error!;\n    }\n\n    const { user, supabase } = authResult;\n    if (!user || !supabase) {\n      return NextResponse.json({ error: 'Authentication failed' }, { status: 401 });\n    }\n\n    const body",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\payments\\advertising\\verify\\route.ts",
        "start": 30,
        "end": 42,
        "startLoc": {
          "line": 30,
          "column": 12,
          "position": 273
        },
        "endLoc": {
          "line": 42,
          "column": 5,
          "position": 388
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\seller\\portfolio\\[id]\\route.ts",
        "start": 11,
        "end": 23,
        "startLoc": {
          "line": 11,
          "column": 1,
          "position": 114
        },
        "endLoc": {
          "line": 23,
          "column": 2,
          "position": 229
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "export async function POST(request: NextRequest) {\n  try {\n    const authResult = await requireAuth();\n    if (!authResult.success) return authResult.error;\n\n    const { supabase, user } = authResult;\n    if (!supabase || !user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 });\n    }\n\n    const body = await request.json();\n    const { service_id",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\payments\\advertising\\prepare\\route.ts",
        "start": 5,
        "end": 16,
        "startLoc": {
          "line": 5,
          "column": 1,
          "position": 43
        },
        "endLoc": {
          "line": 16,
          "column": 11,
          "position": 181
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\bank-transfer\\request\\route.ts",
        "start": 8,
        "end": 19,
        "startLoc": {
          "line": 8,
          "column": 1,
          "position": 48
        },
        "endLoc": {
          "line": 19,
          "column": 9,
          "position": 186
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ");\n    if (!authResult.success) {\n      return authResult.error!;\n    }\n\n    const { user, supabase } = authResult;\n    if (!user || !supabase) {\n      return NextResponse.json({ error: 'Authentication failed' }, { status: 401 });\n    }\n\n    const { status",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\orders\\[id]\\status\\route.ts",
        "start": 44,
        "end": 54,
        "startLoc": {
          "line": 44,
          "column": 21,
          "position": 330
        },
        "endLoc": {
          "line": 54,
          "column": 7,
          "position": 427
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\errands\\[id]\\applications\\[appId]\\route.ts",
        "start": 91,
        "end": 23,
        "startLoc": {
          "line": 91,
          "column": 2,
          "position": 740
        },
        "endLoc": {
          "line": 23,
          "column": 3,
          "position": 231
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "}, { status: 400 });\n    }\n\n    // 주문 조회 및 권한 확인\n    const { data: order, error: fetchError } = await supabase\n      .from('orders')\n      .select('*')\n      .eq('id', id)\n      .single();\n\n    if (fetchError || !order) {\n      return NextResponse.json({ error: '주문을 찾을 수 없습니다' }, { status: 404 });\n    }\n\n    // 구매자만 수정 요청 가능",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\orders\\[id]\\revision\\route.ts",
        "start": 20,
        "end": 34,
        "startLoc": {
          "line": 20,
          "column": 2,
          "position": 262
        },
        "endLoc": {
          "line": 34,
          "column": 17,
          "position": 386
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\orders\\[id]\\status\\route.ts",
        "start": 72,
        "end": 86,
        "startLoc": {
          "line": 72,
          "column": 2,
          "position": 574
        },
        "endLoc": {
          "line": 86,
          "column": 9,
          "position": 698
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "const { data: order, error: fetchError } = await supabase\n      .from('orders')\n      .select('*')\n      .eq('id', id)\n      .single();\n\n    if (fetchError || !order) {\n      return NextResponse.json({ error: '주문을 찾을 수 없습니다' }, { status: 404 });\n    }\n\n    // 구매자 권한 확인",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\orders\\[id]\\confirm\\route.ts",
        "start": 38,
        "end": 48,
        "startLoc": {
          "line": 38,
          "column": 5,
          "position": 324
        },
        "endLoc": {
          "line": 48,
          "column": 13,
          "position": 426
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\orders\\[id]\\status\\route.ts",
        "start": 76,
        "end": 86,
        "startLoc": {
          "line": 76,
          "column": 5,
          "position": 596
        },
        "endLoc": {
          "line": 86,
          "column": 9,
          "position": 698
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "});\n    }\n\n    // 주문 조회 및 권한 확인\n    const { data: order, error: fetchError } = await supabase\n      .from('orders')\n      .select('*')\n      .eq('id', id)\n      .single();\n\n    if (fetchError || !order) {\n      return NextResponse.json({ error: '주문을 찾을 수 없습니다' }, { status: 404 });\n    }\n\n    // 전문가만 수정 완료 가능",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\orders\\[id]\\complete-revision\\route.ts",
        "start": 18,
        "end": 32,
        "startLoc": {
          "line": 18,
          "column": 2,
          "position": 208
        },
        "endLoc": {
          "line": 32,
          "column": 17,
          "position": 322
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\orders\\[id]\\status\\route.ts",
        "start": 72,
        "end": 86,
        "startLoc": {
          "line": 72,
          "column": 2,
          "position": 584
        },
        "endLoc": {
          "line": 86,
          "column": 9,
          "position": 698
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "(request: NextRequest, { params }: { params: Promise<{ id: string }> }) {\n  try {\n    const { id } = await params;\n\n    // 사용자 인증 및 Rate Limiting 확인\n    const authResult = await requireAuthWithRateLimit(orderStatusRateLimit);\n    if (!authResult.success) {\n      return authResult.error!;\n    }\n\n    const { user, supabase } = authResult;\n    if (!user || !supabase) {\n      return NextResponse.json({ error: 'Authentication failed' }, { status: 401 });\n    }\n\n    const { cancel_reason",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\orders\\[id]\\cancel\\route.ts",
        "start": 50,
        "end": 65,
        "startLoc": {
          "line": 50,
          "column": 5,
          "position": 439
        },
        "endLoc": {
          "line": 65,
          "column": 14,
          "position": 609
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\orders\\[id]\\status\\route.ts",
        "start": 39,
        "end": 23,
        "startLoc": {
          "line": 39,
          "column": 6,
          "position": 257
        },
        "endLoc": {
          "line": 23,
          "column": 3,
          "position": 231
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ")\n      .eq('id', id)\n      .single();\n\n    if (fetchError || !order) {\n      return NextResponse.json({ error: '주문을 찾을 수 없습니다' }, { status: 404 });\n    }\n\n    // 구매자 권한 확인\n    if (order.buyer_id !== user.id) {\n      return NextResponse.json({ error: '권한이 없습니다'",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\orders\\[id]\\cancel\\route.ts",
        "start": 75,
        "end": 85,
        "startLoc": {
          "line": 75,
          "column": 17,
          "position": 733
        },
        "endLoc": {
          "line": 85,
          "column": 11,
          "position": 831
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\orders\\[id]\\confirm\\route.ts",
        "start": 40,
        "end": 50,
        "startLoc": {
          "line": 40,
          "column": 4,
          "position": 359
        },
        "endLoc": {
          "line": 50,
          "column": 22,
          "position": 457
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "export async function PATCH(request: NextRequest, { params }: { params: Promise<{ id: string }> }) {\n  try {\n    const { id } = await params;\n\n    // 사용자 인증 확인\n    const authResult = await requireAuth();\n    if (!authResult.success) {\n      return authResult.error!;\n    }\n\n    const { user, supabase } = authResult;\n    if (!user || !supabase) {\n      return NextResponse.json({ error: 'Internal server error' }, { status: 500 });\n    }\n\n    // 알림 읽음 처리",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\notifications\\[id]\\read\\route.ts",
        "start": 6,
        "end": 21,
        "startLoc": {
          "line": 6,
          "column": 1,
          "position": 45
        },
        "endLoc": {
          "line": 21,
          "column": 12,
          "position": 217
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\orders\\[id]\\complete-revision\\route.ts",
        "start": 6,
        "end": 21,
        "startLoc": {
          "line": 6,
          "column": 1,
          "position": 45
        },
        "endLoc": {
          "line": 21,
          "column": 17,
          "position": 217
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "(request: NextRequest, { params }: RouteParams) {\n  try {\n    const { id } = await params;\n    const supabase = await createClient();\n\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return NextResponse.json({ error: '로그인이 필요합니다' }, { status: 401 });\n    }\n\n    const",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\errands\\[id]\\chat\\route.ts",
        "start": 160,
        "end": 173,
        "startLoc": {
          "line": 160,
          "column": 5,
          "position": 1391
        },
        "endLoc": {
          "line": 173,
          "column": 6,
          "position": 1522
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\errands\\[id]\\chat\\route.ts",
        "start": 62,
        "end": 75,
        "startLoc": {
          "line": 62,
          "column": 4,
          "position": 494
        },
        "endLoc": {
          "line": 75,
          "column": 25,
          "position": 625
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "const { data: errand } = await supabase\n      .from('errands')\n      .select('requester_id, helper_id, status, title')\n      .eq('id', id)\n      .single();\n\n    if (!errand) {\n      return NextResponse.json({ error: '심부름을 찾을 수 없습니다' }, { status: 404 });\n    }\n\n    const {",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\errands\\[id]\\chat\\route.ts",
        "start": 178,
        "end": 188,
        "startLoc": {
          "line": 178,
          "column": 5,
          "position": 1584
        },
        "endLoc": {
          "line": 188,
          "column": 2,
          "position": 1678
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\errands\\[id]\\chat\\route.ts",
        "start": 87,
        "end": 97,
        "startLoc": {
          "line": 87,
          "column": 5,
          "position": 725
        },
        "endLoc": {
          "line": 97,
          "column": 12,
          "position": 819
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "} = await params;\r\n\r\n    // 사용자 인증 확인\r\n    const authResult = await requireLogin();\r\n    if (!authResult.success) {\r\n      return authResult.error!;\r\n    }\r\n\r\n    const { user, supabase } = authResult;\r\n    if (!user || !supabase) {\r\n      return NextResponse.json({ error: 'Authentication failed' }, { status: 401 });\r\n    }\r\n\r\n    // 현재 사용자의 profile.id 조회\r\n    const profileId",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\errands\\[id]\\applications\\route.ts",
        "start": 66,
        "end": 80,
        "startLoc": {
          "line": 66,
          "column": 2,
          "position": 623
        },
        "endLoc": {
          "line": 80,
          "column": 10,
          "position": 759
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\errands\\[id]\\applications\\[appId]\\route.ts",
        "start": 88,
        "end": 102,
        "startLoc": {
          "line": 88,
          "column": 2,
          "position": 713
        },
        "endLoc": {
          "line": 102,
          "column": 2,
          "position": 849
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "(request: NextRequest, { params }: RouteParams) {\r\n  try {\r\n    const { id } = await params;\r\n\r\n    // 사용자 인증 확인\r\n    const authResult = await requireLogin();\r\n    if (!authResult.success) {\r\n      return authResult.error!;\r\n    }\r\n\r\n    const { user, supabase } = authResult;\r\n    if (!user || !supabase) {\r\n      return NextResponse.json({ error: 'Authentication failed' }, { status: 401 });\r\n    }\r\n\r\n    // 헬퍼 프로필 확인\r\n    const { data: helperProfile } = await supabase\r\n      .from('helper_profiles')\r\n      .select('*'",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\errands\\[id]\\applications\\route.ts",
        "start": 163,
        "end": 181,
        "startLoc": {
          "line": 163,
          "column": 5,
          "position": 1418
        },
        "endLoc": {
          "line": 181,
          "column": 4,
          "position": 1615
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\errands\\[id]\\applications\\route.ts",
        "start": 64,
        "end": 195,
        "startLoc": {
          "line": 64,
          "column": 4,
          "position": 590
        },
        "endLoc": {
          "line": 195,
          "column": 5,
          "position": 1905
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\n    const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n\n    if (!supabaseUrl || !supabaseServiceKey) {\n      return NextResponse.json({ error: '서버 설정 오류' }, { status: 500 });\n    }\n\n    const supabaseAdmin = createClient(supabaseUrl, supabaseServiceKey, {\n      auth: { autoRefreshToken: false, persistSession: false },\n    });\n\n    // 사용자 기본 데이터 삭제",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\users\\[userId]\\route.ts",
        "start": 111,
        "end": 122,
        "startLoc": {
          "line": 111,
          "column": 5,
          "position": 1330
        },
        "endLoc": {
          "line": 122,
          "column": 17,
          "position": 1449
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\seller\\services\\[serviceId]\\route.ts",
        "start": 166,
        "end": 177,
        "startLoc": {
          "line": 166,
          "column": 5,
          "position": 1556
        },
        "endLoc": {
          "line": 177,
          "column": 15,
          "position": 1675
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "}\n\nexport async function GET() {\n  try {\n    const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const supabase = await createClient();\n\n    // KST 기준 오늘 시작 시간",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\analytics\\realtime\\route.ts",
        "start": 20,
        "end": 34,
        "startLoc": {
          "line": 20,
          "column": 1,
          "position": 211
        },
        "endLoc": {
          "line": 34,
          "column": 19,
          "position": 326
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\analytics\\referrers\\route.ts",
        "start": 20,
        "end": 34,
        "startLoc": {
          "line": 20,
          "column": 1,
          "position": 161
        },
        "endLoc": {
          "line": 34,
          "column": 35,
          "position": 276
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ") {\n  try {\n    const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const {",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\analytics\\devices\\route.ts",
        "start": 33,
        "end": 43,
        "startLoc": {
          "line": 33,
          "column": 12,
          "position": 327
        },
        "endLoc": {
          "line": 43,
          "column": 2,
          "position": 418
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\analytics\\referrers\\route.ts",
        "start": 22,
        "end": 32,
        "startLoc": {
          "line": 22,
          "column": 2,
          "position": 172
        },
        "endLoc": {
          "line": 32,
          "column": 9,
          "position": 263
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "export async function GET(request: NextRequest) {\n  try {\n    const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const supabase = await createClient();\n    const",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\advertising\\statistics\\route.ts",
        "start": 174,
        "end": 185,
        "startLoc": {
          "line": 174,
          "column": 1,
          "position": 1510
        },
        "endLoc": {
          "line": 185,
          "column": 6,
          "position": 1625
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\analytics\\devices\\route.ts",
        "start": 33,
        "end": 34,
        "startLoc": {
          "line": 33,
          "column": 1,
          "position": 315
        },
        "endLoc": {
          "line": 34,
          "column": 35,
          "position": 276
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "export async function GET(request: NextRequest) {\n  try {\n    const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const supabase = createServiceRoleClient",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\advertising\\payments\\route.ts",
        "start": 9,
        "end": 19,
        "startLoc": {
          "line": 9,
          "column": 1,
          "position": 73
        },
        "endLoc": {
          "line": 19,
          "column": 24,
          "position": 180
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\analytics\\devices\\route.ts",
        "start": 33,
        "end": 32,
        "startLoc": {
          "line": 33,
          "column": 1,
          "position": 315
        },
        "endLoc": {
          "line": 32,
          "column": 6,
          "position": 267
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "(request: NextRequest) {\n  try {\n    const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const supabase = createServiceRoleClient();\n    const body",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\advertising\\payments\\route.ts",
        "start": 303,
        "end": 314,
        "startLoc": {
          "line": 303,
          "column": 6,
          "position": 2685
        },
        "endLoc": {
          "line": 314,
          "column": 5,
          "position": 2793
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\analytics\\devices\\route.ts",
        "start": 33,
        "end": 20,
        "startLoc": {
          "line": 33,
          "column": 4,
          "position": 322
        },
        "endLoc": {
          "line": 20,
          "column": 2,
          "position": 188
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "export async function GET(request: NextRequest) {\n  try {\n    const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const supabase = await createClient();\n    const { searchParams } = new URL(request.url);\n    const sellerId",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\advertising\\credits\\route.ts",
        "start": 7,
        "end": 19,
        "startLoc": {
          "line": 7,
          "column": 1,
          "position": 58
        },
        "endLoc": {
          "line": 19,
          "column": 9,
          "position": 196
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\analytics\\devices\\route.ts",
        "start": 33,
        "end": 187,
        "startLoc": {
          "line": 33,
          "column": 1,
          "position": 315
        },
        "endLoc": {
          "line": 187,
          "column": 7,
          "position": 1649
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "(request: NextRequest) {\n  try {\n    const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const supabase = await createClient();\n    const body",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\advertising\\credits\\route.ts",
        "start": 86,
        "end": 97,
        "startLoc": {
          "line": 86,
          "column": 5,
          "position": 753
        },
        "endLoc": {
          "line": 97,
          "column": 5,
          "position": 863
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\analytics\\devices\\route.ts",
        "start": 33,
        "end": 185,
        "startLoc": {
          "line": 33,
          "column": 4,
          "position": 322
        },
        "endLoc": {
          "line": 185,
          "column": 2,
          "position": 1627
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "export async function PATCH(request: NextRequest) {\n  try {\n    const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const supabase = await createClient();\n    const body = await request.json();\n    const { sellerId, amount, description }",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\advertising\\credits\\route.ts",
        "start": 172,
        "end": 184,
        "startLoc": {
          "line": 172,
          "column": 1,
          "position": 1533
        },
        "endLoc": {
          "line": 184,
          "column": 2,
          "position": 1676
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\advertising\\payments\\route.ts",
        "start": 303,
        "end": 98,
        "startLoc": {
          "line": 303,
          "column": 1,
          "position": 2678
        },
        "endLoc": {
          "line": 98,
          "column": 2,
          "position": 888
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "export async function POST(request: NextRequest) {\n  try {\n    const authResult = await requireAuth();\n    if (!authResult.success) return authResult.error;\n\n    const { supabase, user } = authResult;\n    if (!supabase || !user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 });\n    }\n\n    const body = await request.json();\n    const { serviceId",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\user\\service-views\\route.ts",
        "start": 6,
        "end": 17,
        "startLoc": {
          "line": 6,
          "column": 1,
          "position": 45
        },
        "endLoc": {
          "line": 17,
          "column": 10,
          "position": 183
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\bank-transfer\\request\\route.ts",
        "start": 8,
        "end": 19,
        "startLoc": {
          "line": 8,
          "column": 1,
          "position": 48
        },
        "endLoc": {
          "line": 19,
          "column": 9,
          "position": 186
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(request: NextRequest) {\n  try {\n    const authResult = await requireAuth();\n    if (!authResult.success) return authResult.error;\n\n    const { supabase, user } = authResult;\n    if (!supabase || !user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 });\n    }\n\n    const { searchParams",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\user\\service-views\\route.ts",
        "start": 48,
        "end": 58,
        "startLoc": {
          "line": 48,
          "column": 4,
          "position": 464
        },
        "endLoc": {
          "line": 58,
          "column": 13,
          "position": 579
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\bank-transfer\\request\\route.ts",
        "start": 8,
        "end": 17,
        "startLoc": {
          "line": 8,
          "column": 5,
          "position": 55
        },
        "endLoc": {
          "line": 17,
          "column": 7,
          "position": 210
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "export async function POST(request: NextRequest) {\n  try {\n    const authResult = await requireAuth();\n    if (!authResult.success) return authResult.error;\n\n    const { supabase, user } = authResult;\n    if (!supabase || !user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 });\n    }\n\n    const body = await request.json();\n    const { serviceId } = body;\n\n    if (!serviceId) {\n      return NextResponse.json({ error: 'Missing serviceId' }, { status: 400 });\n    }\n\n    logger",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\user\\service-favorites\\route.ts",
        "start": 6,
        "end": 23,
        "startLoc": {
          "line": 6,
          "column": 1,
          "position": 45
        },
        "endLoc": {
          "line": 23,
          "column": 7,
          "position": 236
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\bank-transfer\\request\\route.ts",
        "start": 8,
        "end": 23,
        "startLoc": {
          "line": 8,
          "column": 1,
          "position": 48
        },
        "endLoc": {
          "line": 23,
          "column": 44,
          "position": 236
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "(request: NextRequest) {\n  try {\n    const authResult = await requireAuth();\n    if (!authResult.success) return authResult.error;\n\n    const { supabase, user } = authResult;\n    if (!supabase || !user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 });\n    }\n\n    const { searchParams } = new URL(request.url);\n    const serviceId",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\user\\service-favorites\\route.ts",
        "start": 64,
        "end": 75,
        "startLoc": {
          "line": 64,
          "column": 7,
          "position": 658
        },
        "endLoc": {
          "line": 75,
          "column": 10,
          "position": 792
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\bank-transfer\\request\\route.ts",
        "start": 8,
        "end": 59,
        "startLoc": {
          "line": 8,
          "column": 5,
          "position": 55
        },
        "endLoc": {
          "line": 59,
          "column": 6,
          "position": 598
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ": NextRequest) {\n  try {\n    const authResult = await requireAuth();\n    if (!authResult.success) return authResult.error;\n\n    const { supabase, user } = authResult;\n    if (!supabase || !user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 });\n    }\n\n    // 한 번의 쿼리로 favorites와 services join",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\user\\service-favorites\\route.ts",
        "start": 115,
        "end": 125,
        "startLoc": {
          "line": 115,
          "column": 9,
          "position": 1191
        },
        "endLoc": {
          "line": 125,
          "column": 37,
          "position": 1300
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\bank-transfer\\request\\route.ts",
        "start": 8,
        "end": 18,
        "startLoc": {
          "line": 8,
          "column": 8,
          "position": 57
        },
        "endLoc": {
          "line": 18,
          "column": 6,
          "position": 166
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "export async function POST(request: NextRequest) {\n  try {\n    const authResult = await requireAuth();\n    if (!authResult.success) return authResult.error;\n\n    const { supabase, user } = authResult;\n    if (!supabase || !user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 });\n    }\n\n    const body = await request.json();\n    const {\n      seller_id",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\seller\\portfolio\\route.ts",
        "start": 6,
        "end": 18,
        "startLoc": {
          "line": 6,
          "column": 1,
          "position": 45
        },
        "endLoc": {
          "line": 18,
          "column": 10,
          "position": 184
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\bank-transfer\\request\\route.ts",
        "start": 8,
        "end": 19,
        "startLoc": {
          "line": 8,
          "column": 1,
          "position": 48
        },
        "endLoc": {
          "line": 19,
          "column": 9,
          "position": 186
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ") {\n  try {\n    const supabase = await createClient();\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 });\n    }\n\n    const {",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\seller\\check\\route.ts",
        "start": 4,
        "end": 15,
        "startLoc": {
          "line": 4,
          "column": 2,
          "position": 35
        },
        "endLoc": {
          "line": 15,
          "column": 2,
          "position": 136
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\chat\\rooms\\create-from-order\\route.ts",
        "start": 6,
        "end": 17,
        "startLoc": {
          "line": 6,
          "column": 12,
          "position": 57
        },
        "endLoc": {
          "line": 17,
          "column": 5,
          "position": 158
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ";\nimport { logger } from '@/lib/logger';\nimport { verifyPaymentAuth, verifyOrderForPayment } from '@/lib/api/payment-verify';\n\nexport async function POST(request: NextRequest) {\n  try {\n    // 인증 및 기본 검증\n    const authResult = await verifyPaymentAuth(request);\n    if (!authResult.success) {\n      return authResult.error;\n    }\n\n    const { user",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\payments\\verify\\route.ts",
        "start": 4,
        "end": 16,
        "startLoc": {
          "line": 4,
          "column": 20,
          "position": 55
        },
        "endLoc": {
          "line": 16,
          "column": 5,
          "position": 155
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\verify-direct\\route.ts",
        "start": 2,
        "end": 14,
        "startLoc": {
          "line": 2,
          "column": 22,
          "position": 27
        },
        "endLoc": {
          "line": 14,
          "column": 9,
          "position": 127
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "export async function POST(request: NextRequest) {\n  try {\n    const authResult = await requireAuth();\n    if (!authResult.success) {\n      return authResult.error!;\n    }\n\n    const { user, supabase } = authResult;\n    if (!user || !supabase) {\n      return NextResponse.json({ error: 'Authentication failed' }, { status: 401 });\n    }\n\n    // Redis 기반 Rate Limiting 체크",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\payments\\prepare\\route.ts",
        "start": 7,
        "end": 19,
        "startLoc": {
          "line": 7,
          "column": 1,
          "position": 72
        },
        "endLoc": {
          "line": 19,
          "column": 29,
          "position": 197
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\advertising\\verify\\route.ts",
        "start": 30,
        "end": 101,
        "startLoc": {
          "line": 30,
          "column": 1,
          "position": 261
        },
        "endLoc": {
          "line": 101,
          "column": 25,
          "position": 843
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "export async function POST(request: NextRequest) {\n  try {\n    const authResult = await requireAuth();\n    if (!authResult.success) return authResult.error;\n\n    const { supabase, user } = authResult;\n    if (!supabase || !user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 });\n    }\n\n    const body = await request.json();\n    const { order_id }",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\payments\\mock-payment\\route.ts",
        "start": 8,
        "end": 19,
        "startLoc": {
          "line": 8,
          "column": 1,
          "position": 48
        },
        "endLoc": {
          "line": 19,
          "column": 2,
          "position": 188
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\bank-transfer\\request\\route.ts",
        "start": 8,
        "end": 19,
        "startLoc": {
          "line": 8,
          "column": 1,
          "position": 48
        },
        "endLoc": {
          "line": 19,
          "column": 2,
          "position": 187
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "}\n\n    // 주문 조회\n    const { data: order, error: orderError } = await supabase\n      .from('orders')\n      .select('*')\n      .eq('id', order_id)\n      .single();\n\n    if (orderError || !order) {\n      return NextResponse.json({ error: '주문을 찾을 수 없습니다' }, { status: 404 });\n    }\n\n    // 본인 주문인지 확인\n    if (order.buyer_id !== user.id) {\n      return NextResponse.json({ error: '권한이 없습니다' }, { status: 403 });\n    }\n\n    // 이미 결제된 주문인지 확인",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\payments\\mock-payment\\route.ts",
        "start": 23,
        "end": 41,
        "startLoc": {
          "line": 23,
          "column": 5,
          "position": 235
        },
        "endLoc": {
          "line": 41,
          "column": 18,
          "position": 396
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\bank-transfer\\request\\route.ts",
        "start": 34,
        "end": 52,
        "startLoc": {
          "line": 34,
          "column": 5,
          "position": 368
        },
        "endLoc": {
          "line": 52,
          "column": 18,
          "position": 529
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ")\n      .eq('id', order_id);\n\n    if (updateError) {\n      logger.error('Order update error:', updateError);\n      return NextResponse.json({ error: '주문 업데이트 실패' }, { status: 500 });\n    }\n\n    return NextResponse.json({\n      success: true,\n      message: 'Mock 결제 완료 (테스트 모드)'",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\payments\\mock-payment\\route.ts",
        "start": 54,
        "end": 64,
        "startLoc": {
          "line": 54,
          "column": 2,
          "position": 525
        },
        "endLoc": {
          "line": 64,
          "column": 22,
          "position": 612
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\bank-transfer\\request\\route.ts",
        "start": 86,
        "end": 96,
        "startLoc": {
          "line": 86,
          "column": 11,
          "position": 805
        },
        "endLoc": {
          "line": 96,
          "column": 20,
          "position": 892
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ") {\n  try {\n    const supabase = await createClient();\n    const {\n      data: { user },\n      error: authError,\n    } = await supabase.auth.getUser();\n\n    if (authError || !user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 });\n    }\n\n    const",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\payment-requests\\[id]\\route.ts",
        "start": 12,
        "end": 24,
        "startLoc": {
          "line": 12,
          "column": 13,
          "position": 92
        },
        "endLoc": {
          "line": 24,
          "column": 6,
          "position": 202
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\direct-purchase\\route.ts",
        "start": 114,
        "end": 31,
        "startLoc": {
          "line": 114,
          "column": 12,
          "position": 1037
        },
        "endLoc": {
          "line": 31,
          "column": 20,
          "position": 273
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "(request: NextRequest, { params }: { params: Promise<{ id: string }> }) {\n  try {\n    const { id } = await params;\n\n    // 사용자 인증 확인\n    const authResult = await requireAuth();\n    if (!authResult.success) {\n      return authResult.error!;\n    }\n\n    const { user, supabase } = authResult;\n    if (!user || !supabase) {\n      return NextResponse.json({ error: 'Internal server error' }, { status: 500 });\n    }\n\n    // 주문 조회",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\orders\\[id]\\route.ts",
        "start": 6,
        "end": 21,
        "startLoc": {
          "line": 6,
          "column": 4,
          "position": 52
        },
        "endLoc": {
          "line": 21,
          "column": 9,
          "position": 217
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\orders\\[id]\\complete-revision\\route.ts",
        "start": 6,
        "end": 21,
        "startLoc": {
          "line": 6,
          "column": 6,
          "position": 52
        },
        "endLoc": {
          "line": 21,
          "column": 17,
          "position": 217
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "export const GET = withAuth(async (request: NextRequest, user) => {\n  try {\n    const supabase = await createClient();\n\n    // URL 파라미터에서 status 가져오기\n    const { searchParams } = new URL(request.url);\n    const status = searchParams.get('status');\n\n    // 주문 목록 조회\n    let query = supabase\n      .from('orders')\n      .select(\n        `\n        *,\n        service:services(id, title, thumbnail_url),\n        seller:users!seller_id(id, name, profile_image)\n      `",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\orders\\buyer\\route.ts",
        "start": 7,
        "end": 23,
        "startLoc": {
          "line": 7,
          "column": 1,
          "position": 61
        },
        "endLoc": {
          "line": 23,
          "column": 8,
          "position": 172
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\orders\\seller\\route.ts",
        "start": 7,
        "end": 23,
        "startLoc": {
          "line": 7,
          "column": 1,
          "position": 61
        },
        "endLoc": {
          "line": 23,
          "column": 8,
          "position": 172
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ", user.id)\n      .order('created_at', { ascending: false });\n\n    if (status && status !== 'all') {\n      query = query.eq('status', status);\n    }\n\n    const { data, error } = await query;\n\n    if (error) {\n      throw new ApiError('주문 목록을 불러올 수 없습니다', 500);\n    }\n\n    return",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\orders\\buyer\\route.ts",
        "start": 25,
        "end": 38,
        "startLoc": {
          "line": 25,
          "column": 11,
          "position": 182
        },
        "endLoc": {
          "line": 38,
          "column": 7,
          "position": 293
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\orders\\seller\\route.ts",
        "start": 25,
        "end": 38,
        "startLoc": {
          "line": 25,
          "column": 12,
          "position": 182
        },
        "endLoc": {
          "line": 38,
          "column": 48,
          "position": 293
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "// 사용자 인증 확인\n    const authResult = await requireAuth();\n    if (!authResult.success) {\n      return authResult.error!;\n    }\n\n    const { user, supabase } = authResult;\n    if (!user || !supabase) {\n      return NextResponse.json({ error: 'Internal server error' }, { status: 500 });\n    }\n\n    // 모든 안 읽은 알림 읽음 처리",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\notifications\\read-all\\route.ts",
        "start": 8,
        "end": 19,
        "startLoc": {
          "line": 8,
          "column": 5,
          "position": 67
        },
        "endLoc": {
          "line": 19,
          "column": 20,
          "position": 173
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\orders\\[id]\\complete-revision\\route.ts",
        "start": 10,
        "end": 21,
        "startLoc": {
          "line": 10,
          "column": 5,
          "position": 111
        },
        "endLoc": {
          "line": 21,
          "column": 17,
          "position": 217
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "(_request: NextRequest) {\n  try {\n    // 사용자 인증 확인\n    const authResult = await requireAuth();\n    if (!authResult.success) {\n      return authResult.error!;\n    }\n\n    const { user, supabase } = authResult;\n    if (!user || !supabase) {\n      return NextResponse.json({ error: 'Internal server error' }, { status: 500 });\n    }\n\n    // 안 읽은 알림 개수 조회",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\notifications\\count\\route.ts",
        "start": 6,
        "end": 19,
        "startLoc": {
          "line": 6,
          "column": 4,
          "position": 52
        },
        "endLoc": {
          "line": 19,
          "column": 17,
          "position": 173
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\notifications\\read-all\\route.ts",
        "start": 6,
        "end": 21,
        "startLoc": {
          "line": 6,
          "column": 6,
          "position": 52
        },
        "endLoc": {
          "line": 21,
          "column": 17,
          "position": 217
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "export async function GET() {\n  try {\n    const supabase = await createClient();\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 });\n    }\n\n    const activities",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\mypage\\recent-activities\\route.ts",
        "start": 32,
        "end": 43,
        "startLoc": {
          "line": 32,
          "column": 1,
          "position": 388
        },
        "endLoc": {
          "line": 43,
          "column": 11,
          "position": 497
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\seller\\check\\route.ts",
        "start": 4,
        "end": 17,
        "startLoc": {
          "line": 4,
          "column": 1,
          "position": 27
        },
        "endLoc": {
          "line": 17,
          "column": 5,
          "position": 158
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "import { NextResponse } from 'next/server';\nimport { createClient } from '@/lib/supabase/server';\n\nexport async function GET() {\n  try {\n    const supabase = await createClient();\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 });\n    }\n\n    // 구매 건수",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\mypage\\hub-stats\\route.ts",
        "start": 1,
        "end": 15,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 15,
          "column": 9,
          "position": 134
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\seller\\check\\route.ts",
        "start": 1,
        "end": 17,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 17,
          "column": 6,
          "position": 156
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "const supabase = await createClient();\n\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return NextResponse.json({ error: '로그인이 필요합니다' }, { status: 401 });\n    }\n\n    const body",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\helper\\location\\route.ts",
        "start": 8,
        "end": 18,
        "startLoc": {
          "line": 8,
          "column": 5,
          "position": 67
        },
        "endLoc": {
          "line": 18,
          "column": 5,
          "position": 159
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\errands\\[id]\\chat\\route.ts",
        "start": 65,
        "end": 173,
        "startLoc": {
          "line": 65,
          "column": 5,
          "position": 535
        },
        "endLoc": {
          "line": 173,
          "column": 12,
          "position": 1524
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ") {\n  try {\n    const supabase = await createClient();\n\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return NextResponse.json({ error: '로그인이 필요합니다' }, { status: 401 });\n    }\n\n    const {",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\helper\\location\\route.ts",
        "start": 88,
        "end": 100,
        "startLoc": {
          "line": 88,
          "column": 2,
          "position": 793
        },
        "endLoc": {
          "line": 100,
          "column": 2,
          "position": 895
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\helper\\location\\route.ts",
        "start": 6,
        "end": 173,
        "startLoc": {
          "line": 6,
          "column": 12,
          "position": 57
        },
        "endLoc": {
          "line": 173,
          "column": 12,
          "position": 1524
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "(request: NextRequest) {\n  try {\n    const supabase = await createClient();\n\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return NextResponse.json({ error: '로그인이 필요합니다' }, { status: 401 });\n    }\n\n    const body = await request.json();\n    const { isOnline",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\helper\\location\\route.ts",
        "start": 127,
        "end": 140,
        "startLoc": {
          "line": 127,
          "column": 6,
          "position": 1147
        },
        "endLoc": {
          "line": 140,
          "column": 9,
          "position": 1272
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\helper\\location\\route.ts",
        "start": 6,
        "end": 19,
        "startLoc": {
          "line": 6,
          "column": 5,
          "position": 52
        },
        "endLoc": {
          "line": 19,
          "column": 4,
          "position": 177
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "import { NextResponse } from 'next/server';\nimport { createClient } from '@/lib/supabase/server';\n\nexport async function GET() {\n  try {\n    const supabase = await createClient();\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 });\n    }\n\n    const { data: helper",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\helper\\check\\route.ts",
        "start": 1,
        "end": 15,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 15,
          "column": 7,
          "position": 141
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\seller\\check\\route.ts",
        "start": 1,
        "end": 15,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 15,
          "column": 7,
          "position": 141
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": "// 필수 파라미터 검증\n    if (Number.isNaN(lat) || Number.isNaN(lng)) {\n      return NextResponse.json(\n        {\n          error: 'Missing or invalid coordinates: lat, lng required',\n        },\n        { status: 400 }\n      );\n    }\n\n    // 좌표 범위 검증\n    if (lat < -90 || lat > 90 || lng < -180 || lng > 180) {\n      return NextResponse.json(\n        {\n          error: 'Coordinates out of range',\n        },\n        { status: 400 }\n      );\n    }\n\n    // RPC 함수로 주변 서비스 조회 (서비스 위치 기반)",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\experts\\nearby\\route.ts",
        "start": 19,
        "end": 39,
        "startLoc": {
          "line": 19,
          "column": 5,
          "position": 230
        },
        "endLoc": {
          "line": 39,
          "column": 33,
          "position": 378
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\experts\\nearby\\categories\\route.ts",
        "start": 16,
        "end": 36,
        "startLoc": {
          "line": 16,
          "column": 5,
          "position": 183
        },
        "endLoc": {
          "line": 36,
          "column": 26,
          "position": 331
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "(request: NextRequest, { params }: RouteParams) {\n  try {\n    const { id } = await params;\n\n    // 인증 및 프로필 조회\n    const authResult = await verifyErrandsAuth();\n    if (!authResult.success) {\n      return authResult.error;\n    }\n\n    const { supabase, profileId } = authResult;\n\n    // 현재 심부름 조회",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\errands\\[id]\\route.ts",
        "start": 305,
        "end": 317,
        "startLoc": {
          "line": 305,
          "column": 7,
          "position": 2571
        },
        "endLoc": {
          "line": 317,
          "column": 13,
          "position": 2672
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\errands\\[id]\\route.ts",
        "start": 228,
        "end": 240,
        "startLoc": {
          "line": 228,
          "column": 6,
          "position": 1848
        },
        "endLoc": {
          "line": 240,
          "column": 6,
          "position": 1949
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "// 위치 파라미터 검증\n    if (Number.isNaN(lat) || Number.isNaN(lng)) {\n      return NextResponse.json({ error: '위치 정보가 필요합니다 (lat, lng)' }, { status: 400 });\n    }\n\n    // 위도/경도 범위 검사\n    if (lat < -90 || lat > 90 || lng < -180 || lng > 180) {\n      return NextResponse.json({ error: '위치 범위가 올바르지 않습니다' }, { status: 400 });\n    }\n\n    const supabase = await createClient();\n\n    // PostgreSQL 함수 호출 시도 (마이그레이션 완료 시)",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\errands\\nearby-helpers\\route.ts",
        "start": 15,
        "end": 27,
        "startLoc": {
          "line": 15,
          "column": 5,
          "position": 204
        },
        "endLoc": {
          "line": 27,
          "column": 37,
          "position": 351
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\errands\\nearby-helpers\\list\\route.ts",
        "start": 26,
        "end": 38,
        "startLoc": {
          "line": 26,
          "column": 5,
          "position": 258
        },
        "endLoc": {
          "line": 38,
          "column": 13,
          "position": 405
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ";\n}\n\nexport async function GET() {\n  try {\n    const supabase = await createClient();\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return NextResponse.json({ success",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\debug\\personalized\\route.ts",
        "start": 48,
        "end": 59,
        "startLoc": {
          "line": 48,
          "column": 2,
          "position": 307
        },
        "endLoc": {
          "line": 59,
          "column": 8,
          "position": 395
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\mypage\\recent-activities\\route.ts",
        "start": 29,
        "end": 40,
        "startLoc": {
          "line": 29,
          "column": 5,
          "position": 383
        },
        "endLoc": {
          "line": 40,
          "column": 6,
          "position": 471
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ",\n    });\n  } catch (error) {\n    return NextResponse.json(\n      {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error',\n        stack: error instanceof Error ? error.stack : undefined,\n      },\n      { status: 500 }\n    );\n  }\n}",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\debug\\personalized\\route.ts",
        "start": 153,
        "end": 165,
        "startLoc": {
          "line": 153,
          "column": 10,
          "position": 1204
        },
        "endLoc": {
          "line": 165,
          "column": 2,
          "position": 1303
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\debug\\rpc-test\\route.ts",
        "start": 52,
        "end": 64,
        "startLoc": {
          "line": 52,
          "column": 2,
          "position": 414
        },
        "endLoc": {
          "line": 64,
          "column": 2,
          "position": 513
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "(_request: NextRequest) {\n  try {\n    const supabase = await createClient();\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\n    }\n\n    // 1. 사용자가 참여한 모든 채팅방 ID 조회",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\chat\\unread-count\\route.ts",
        "start": 6,
        "end": 17,
        "startLoc": {
          "line": 6,
          "column": 4,
          "position": 52
        },
        "endLoc": {
          "line": 17,
          "column": 28,
          "position": 156
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\chat\\messages\\mark-all-read\\route.ts",
        "start": 6,
        "end": 17,
        "startLoc": {
          "line": 6,
          "column": 5,
          "position": 52
        },
        "endLoc": {
          "line": 17,
          "column": 36,
          "position": 156
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "(request: NextRequest) {\n  try {\n    const supabase = await createClient();\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 });\n    }\n\n    const { searchParams",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\chat\\search\\route.ts",
        "start": 4,
        "end": 15,
        "startLoc": {
          "line": 4,
          "column": 4,
          "position": 37
        },
        "endLoc": {
          "line": 15,
          "column": 13,
          "position": 145
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\chat\\rooms\\create-from-order\\route.ts",
        "start": 6,
        "end": 15,
        "startLoc": {
          "line": 6,
          "column": 5,
          "position": 52
        },
        "endLoc": {
          "line": 15,
          "column": 5,
          "position": 138
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "export async function GET(_request: NextRequest) {\n  try {\n    const supabase = await createClient();\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\n    }\n\n    // 현재 사용자가 전문가인지 확인",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\chat\\rooms\\route.ts",
        "start": 153,
        "end": 164,
        "startLoc": {
          "line": 153,
          "column": 1,
          "position": 1595
        },
        "endLoc": {
          "line": 164,
          "column": 20,
          "position": 1706
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\chat\\unread-count\\route.ts",
        "start": 6,
        "end": 17,
        "startLoc": {
          "line": 6,
          "column": 1,
          "position": 45
        },
        "endLoc": {
          "line": 17,
          "column": 36,
          "position": 156
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ": NextRequest) {\n  try {\n    const supabase = await createClient();\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\n    }\n\n    const",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\chat\\rooms\\route.ts",
        "start": 265,
        "end": 276,
        "startLoc": {
          "line": 265,
          "column": 8,
          "position": 2550
        },
        "endLoc": {
          "line": 276,
          "column": 6,
          "position": 2652
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\chat\\messages\\mark-all-read\\route.ts",
        "start": 6,
        "end": 17,
        "startLoc": {
          "line": 6,
          "column": 9,
          "position": 54
        },
        "endLoc": {
          "line": 17,
          "column": 36,
          "position": 156
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ";\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const supabase = await createClient();\r\n    const {\r\n      data: { user },\r\n    } = await supabase.auth.getUser();\r\n\r\n    if (!user) {\r\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n    }\r\n\r\n    const {",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\chat\\messages\\route.ts",
        "start": 3,
        "end": 16,
        "startLoc": {
          "line": 3,
          "column": 15,
          "position": 42
        },
        "endLoc": {
          "line": 16,
          "column": 2,
          "position": 171
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\chat\\search\\route.ts",
        "start": 2,
        "end": 276,
        "startLoc": {
          "line": 2,
          "column": 24,
          "position": 27
        },
        "endLoc": {
          "line": 276,
          "column": 5,
          "position": 2654
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "export async function POST(request: NextRequest) {\r\n  try {\r\n    const supabase = await createClient();\r\n    const {\r\n      data: { user },\r\n    } = await supabase.auth.getUser();\r\n\r\n    if (!user) {\r\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n    }\r\n\r\n    const body = await request.json();\r\n    const { room_id",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\chat\\messages\\route.ts",
        "start": 100,
        "end": 112,
        "startLoc": {
          "line": 100,
          "column": 1,
          "position": 949
        },
        "endLoc": {
          "line": 112,
          "column": 8,
          "position": 1092
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\chat\\rooms\\create-from-order\\route.ts",
        "start": 6,
        "end": 277,
        "startLoc": {
          "line": 6,
          "column": 1,
          "position": 45
        },
        "endLoc": {
          "line": 277,
          "column": 10,
          "position": 2672
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "export async function POST(request: NextRequest) {\n  try {\n    const supabase = await createClient();\n    const {\n      data: { user },\n      error: authError,\n    } = await supabase.auth.getUser();\n\n    if (authError || !user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 });\n    }\n\n    const body",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\auth\\verify-identity\\route.ts",
        "start": 6,
        "end": 18,
        "startLoc": {
          "line": 6,
          "column": 1,
          "position": 56
        },
        "endLoc": {
          "line": 18,
          "column": 5,
          "position": 180
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\direct-purchase\\route.ts",
        "start": 114,
        "end": 24,
        "startLoc": {
          "line": 114,
          "column": 1,
          "position": 1025
        },
        "endLoc": {
          "line": 24,
          "column": 2,
          "position": 204
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ") {\n  try {\n    const supabase = await createClient();\n    const {\n      data: { user },\n      error: authError,\n    } = await supabase.auth.getUser();\n\n    if (authError || !user) {\n      return NextResponse.json({ error: '인증이 필요합니다' }, { status: 401 });\n    }\n\n    const { data",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\auth\\verify-identity\\route.ts",
        "start": 102,
        "end": 114,
        "startLoc": {
          "line": 102,
          "column": 2,
          "position": 935
        },
        "endLoc": {
          "line": 114,
          "column": 5,
          "position": 1049
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\direct-purchase\\route.ts",
        "start": 114,
        "end": 24,
        "startLoc": {
          "line": 114,
          "column": 12,
          "position": 1037
        },
        "endLoc": {
          "line": 24,
          "column": 3,
          "position": 206
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "export async function GET(request: NextRequest) {\n  try {\n    const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const supabase = await createClient();\n    const { searchParams } = new URL(request.url);\n    const includeInactive",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\categories\\route.ts",
        "start": 7,
        "end": 19,
        "startLoc": {
          "line": 7,
          "column": 1,
          "position": 58
        },
        "endLoc": {
          "line": 19,
          "column": 16,
          "position": 196
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\analytics\\devices\\route.ts",
        "start": 33,
        "end": 187,
        "startLoc": {
          "line": 33,
          "column": 1,
          "position": 315
        },
        "endLoc": {
          "line": 187,
          "column": 7,
          "position": 1649
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "export async function POST(request: NextRequest) {\n  try {\n    const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const supabase = await createClient();\n    const body = await request.json();\n\n    const { name",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\categories\\route.ts",
        "start": 39,
        "end": 52,
        "startLoc": {
          "line": 39,
          "column": 1,
          "position": 389
        },
        "endLoc": {
          "line": 52,
          "column": 5,
          "position": 525
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\advertising\\credits\\route.ts",
        "start": 86,
        "end": 98,
        "startLoc": {
          "line": 86,
          "column": 1,
          "position": 746
        },
        "endLoc": {
          "line": 98,
          "column": 9,
          "position": 881
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "export async function PATCH(request: NextRequest) {\n  try {\n    const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const supabase = await createClient();\n    const body = await request.json();\n\n    const { id",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\categories\\route.ts",
        "start": 92,
        "end": 105,
        "startLoc": {
          "line": 92,
          "column": 1,
          "position": 883
        },
        "endLoc": {
          "line": 105,
          "column": 3,
          "position": 1019
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\advertising\\payments\\route.ts",
        "start": 303,
        "end": 98,
        "startLoc": {
          "line": 303,
          "column": 1,
          "position": 2678
        },
        "endLoc": {
          "line": 98,
          "column": 9,
          "position": 881
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "(request: NextRequest) {\n  try {\n    const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const supabase = await createClient();\n    const { searchParams } = new URL(request.url);\n    const id",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\categories\\route.ts",
        "start": 149,
        "end": 161,
        "startLoc": {
          "line": 149,
          "column": 7,
          "position": 1476
        },
        "endLoc": {
          "line": 161,
          "column": 3,
          "position": 1607
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\analytics\\devices\\route.ts",
        "start": 33,
        "end": 187,
        "startLoc": {
          "line": 33,
          "column": 4,
          "position": 322
        },
        "endLoc": {
          "line": 187,
          "column": 7,
          "position": 1649
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const supabase = await createClient();\n    const { searchParams } = new URL(request.url);\n\n    const period = (searchParams.get('period') || 'day') as Period",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\analytics\\route.ts",
        "start": 190,
        "end": 201,
        "startLoc": {
          "line": 190,
          "column": 5,
          "position": 1685
        },
        "endLoc": {
          "line": 201,
          "column": 7,
          "position": 1821
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\analytics\\referrers\\route.ts",
        "start": 24,
        "end": 187,
        "startLoc": {
          "line": 24,
          "column": 5,
          "position": 182
        },
        "endLoc": {
          "line": 187,
          "column": 11,
          "position": 1668
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "export async function POST(request: NextRequest) {\n  try {\n    const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const supabase = await createClient();\n    const body = await request.json();\n    const { limit",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\analytics\\route.ts",
        "start": 248,
        "end": 260,
        "startLoc": {
          "line": 248,
          "column": 1,
          "position": 2181
        },
        "endLoc": {
          "line": 260,
          "column": 6,
          "position": 2316
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\advertising\\credits\\route.ts",
        "start": 86,
        "end": 98,
        "startLoc": {
          "line": 86,
          "column": 1,
          "position": 746
        },
        "endLoc": {
          "line": 98,
          "column": 9,
          "position": 881
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "export async function GET(request: NextRequest) {\n  try {\n    const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const supabase = createServiceRoleClient();\n    const { searchParams } = new URL(request.url);\n\n    const",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\advertising\\route.ts",
        "start": 7,
        "end": 20,
        "startLoc": {
          "line": 7,
          "column": 1,
          "position": 58
        },
        "endLoc": {
          "line": 20,
          "column": 6,
          "position": 193
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\analytics\\devices\\route.ts",
        "start": 33,
        "end": 22,
        "startLoc": {
          "line": 33,
          "column": 1,
          "position": 315
        },
        "endLoc": {
          "line": 22,
          "column": 11,
          "position": 208
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "export async function PATCH(request: NextRequest) {\n  try {\n    const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const supabase = createServiceRoleClient();\n    const body = await request.json();\n    const { subscriptionId",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\advertising\\route.ts",
        "start": 140,
        "end": 152,
        "startLoc": {
          "line": 140,
          "column": 1,
          "position": 1305
        },
        "endLoc": {
          "line": 152,
          "column": 15,
          "position": 1438
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\advertising\\payments\\route.ts",
        "start": 303,
        "end": 315,
        "startLoc": {
          "line": 303,
          "column": 1,
          "position": 2678
        },
        "endLoc": {
          "line": 315,
          "column": 11,
          "position": 2811
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "export async function DELETE(request: NextRequest) {\n  try {\n    const adminCheck = await checkAdminAuth();\n    if (!adminCheck.isAdmin) {\n      return NextResponse.json(\n        { error: adminCheck.error },\n        { status: adminCheck.error === 'Unauthorized' ? 401 : 403 }\n      );\n    }\n\n    const supabase = createServiceRoleClient();\n    const { searchParams } = new URL(request.url);\n    const subscriptionId",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\admin\\advertising\\route.ts",
        "start": 189,
        "end": 201,
        "startLoc": {
          "line": 189,
          "column": 1,
          "position": 1762
        },
        "endLoc": {
          "line": 201,
          "column": 15,
          "position": 1898
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\admin\\categories\\route.ts",
        "start": 149,
        "end": 20,
        "startLoc": {
          "line": 149,
          "column": 1,
          "position": 1469
        },
        "endLoc": {
          "line": 20,
          "column": 7,
          "position": 195
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(request: NextRequest) {\n  try {\n    const supabase = await createClient();\n\n    const {\n      data: { user },\n      error: authError,\n    } = await supabase.auth.getUser();\n\n    if (authError || !user) {\n      return NextResponse.json({ error: 'Unauthorized'",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\portfolio\\route.ts",
        "start": 5,
        "end": 15,
        "startLoc": {
          "line": 5,
          "column": 7,
          "position": 50
        },
        "endLoc": {
          "line": 15,
          "column": 15,
          "position": 145
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\direct-purchase\\route.ts",
        "start": 114,
        "end": 123,
        "startLoc": {
          "line": 114,
          "column": 5,
          "position": 1032
        },
        "endLoc": {
          "line": 123,
          "column": 12,
          "position": 1126
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "const supabase = await createClient();\n\n    const {\n      data: { user },\n      error: authError,\n    } = await supabase.auth.getUser();\n\n    if (authError || !user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\n    }\n\n    const {",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\portfolio\\route.ts",
        "start": 7,
        "end": 18,
        "startLoc": {
          "line": 7,
          "column": 5,
          "position": 65
        },
        "endLoc": {
          "line": 18,
          "column": 2,
          "position": 168
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\upload\\route.ts",
        "start": 16,
        "end": 26,
        "startLoc": {
          "line": 16,
          "column": 5,
          "position": 151
        },
        "endLoc": {
          "line": 26,
          "column": 9,
          "position": 253
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ";\nimport { logger } from '@/lib/logger';\nimport { requireAuth } from '@/lib/api/auth';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const authResult = await requireAuth();\n    if (!authResult.success) {\n      return authResult.error!;\n    }\n\n    const { user, supabase } = authResult;\n    if (!user || !supabase) {\n      return NextResponse.json({ error: 'Authentication failed' }, { status: 401 });\n    }\n\n    const body = await request.json();\n    const { room_id",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\payment-requests\\route.ts",
        "start": 2,
        "end": 19,
        "startLoc": {
          "line": 2,
          "column": 24,
          "position": 27
        },
        "endLoc": {
          "line": 19,
          "column": 8,
          "position": 201
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\prepare\\route.ts",
        "start": 3,
        "end": 43,
        "startLoc": {
          "line": 3,
          "column": 14,
          "position": 43
        },
        "endLoc": {
          "line": 43,
          "column": 11,
          "position": 406
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "(request: NextRequest) {\n  try {\n    const authResult = await requireAuth();\n    if (!authResult.success) {\n      return authResult.error!;\n    }\n\n    const { user, supabase } = authResult;\n    if (!user || !supabase) {\n      return NextResponse.json({ error: 'Authentication failed' }, { status: 401 });\n    }\n\n    const { searchParams",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\payment-requests\\route.ts",
        "start": 95,
        "end": 107,
        "startLoc": {
          "line": 95,
          "column": 4,
          "position": 969
        },
        "endLoc": {
          "line": 107,
          "column": 13,
          "position": 1091
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\payments\\advertising\\verify\\route.ts",
        "start": 30,
        "end": 23,
        "startLoc": {
          "line": 30,
          "column": 5,
          "position": 268
        },
        "endLoc": {
          "line": 23,
          "column": 3,
          "position": 231
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ": NextRequest) {\n  try {\n    // 사용자 인증 확인\n    const authResult = await requireAuth();\n    if (!authResult.success) {\n      return authResult.error!;\n    }\n\n    const { user, supabase } = authResult;\n    if (!user || !supabase) {\n      return NextResponse.json({ error: 'Internal server error' }, { status: 500 });\n    }\n\n    // URL 파라미터",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\notifications\\route.ts",
        "start": 6,
        "end": 19,
        "startLoc": {
          "line": 6,
          "column": 8,
          "position": 54
        },
        "endLoc": {
          "line": 19,
          "column": 12,
          "position": 173
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\notifications\\read-all\\route.ts",
        "start": 6,
        "end": 21,
        "startLoc": {
          "line": 6,
          "column": 9,
          "position": 54
        },
        "endLoc": {
          "line": 21,
          "column": 17,
          "position": 217
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "export async function GET() {\n  try {\n    const supabase = await createClient();\n\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return NextResponse.json({ error: '로그인이 필요합니다' }, { status: 401 });\n    }\n\n    // helper_profiles와 profiles 모두 user_id가 auth.users.id를 참조",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\helper\\route.ts",
        "start": 6,
        "end": 18,
        "startLoc": {
          "line": 6,
          "column": 1,
          "position": 45
        },
        "endLoc": {
          "line": 18,
          "column": 59,
          "position": 153
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\seller\\check\\route.ts",
        "start": 4,
        "end": 75,
        "startLoc": {
          "line": 4,
          "column": 1,
          "position": 27
        },
        "endLoc": {
          "line": 75,
          "column": 25,
          "position": 625
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "export async function POST(request: NextRequest) {\n  try {\n    const supabase = await createClient();\n\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return NextResponse.json({ error: '로그인이 필요합니다' }, { status: 401 });\n    }\n\n    // 이미 헬퍼인지 확인",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\helper\\route.ts",
        "start": 89,
        "end": 101,
        "startLoc": {
          "line": 89,
          "column": 1,
          "position": 730
        },
        "endLoc": {
          "line": 101,
          "column": 14,
          "position": 842
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\chat\\rooms\\create-from-order\\route.ts",
        "start": 6,
        "end": 75,
        "startLoc": {
          "line": 6,
          "column": 1,
          "position": 45
        },
        "endLoc": {
          "line": 75,
          "column": 25,
          "position": 625
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "export async function PATCH(request: NextRequest) {\n  try {\n    const supabase = await createClient();\n\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return NextResponse.json({ error: '로그인이 필요합니다' }, { status: 401 });\n    }\n\n    const { data: existingHelper",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\helper\\route.ts",
        "start": 161,
        "end": 173,
        "startLoc": {
          "line": 161,
          "column": 1,
          "position": 1397
        },
        "endLoc": {
          "line": 173,
          "column": 15,
          "position": 1516
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\helper\\location\\route.ts",
        "start": 127,
        "end": 100,
        "startLoc": {
          "line": 127,
          "column": 1,
          "position": 1140
        },
        "endLoc": {
          "line": 100,
          "column": 14,
          "position": 900
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "();\n    if (!authResult.success) {\n      return authResult.error!;\n    }\n\n    const { user, supabase } = authResult;\n    if (!user || !supabase) {\n      return NextResponse.json({ error: 'Internal server error' }, { status: 500 });\n    }\n\n    // profiles 테이블에서 사용자의 profile id 조회 (FK 참조용)",
      "tokens": 0,
      "firstFile": {
        "name": "src\\app\\api\\errands\\route.ts",
        "start": 339,
        "end": 349,
        "startLoc": {
          "line": 339,
          "column": 13,
          "position": 3230
        },
        "endLoc": {
          "line": 349,
          "column": 46,
          "position": 3324
        }
      },
      "secondFile": {
        "name": "src\\app\\api\\orders\\[id]\\complete-revision\\route.ts",
        "start": 11,
        "end": 21,
        "startLoc": {
          "line": 11,
          "column": 12,
          "position": 123
        },
        "endLoc": {
          "line": 21,
          "column": 17,
          "position": 217
        }
      }
    }
  ]
}