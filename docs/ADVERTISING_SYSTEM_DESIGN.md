# ê´‘ê³  ì‹œìŠ¤í…œ ì„¤ê³„ ë¬¸ì„œ

## ğŸ“‹ ì‹œìŠ¤í…œ ê°œìš”

ì™„ë²½í•˜ê²Œ ê³µí‰í•œ ëœë¤ ë…¸ì¶œì„ ë³´ì¥í•˜ëŠ” ë‹¨ìˆœ ê´‘ê³  ì‹œìŠ¤í…œ

## ğŸ’° ê°€ê²© ì •ì±…

### ë‹¨ì¼ ê´‘ê³  í”Œëœ
- **ê°€ê²©**: ì›” 100,000ì›
- **í˜œíƒ**: ì¹´í…Œê³ ë¦¬ 1í˜ì´ì§€ ì™„ì „ ëœë¤ ë…¸ì¶œ
- **ë…¸ì¶œ í™•ë¥ **: ëª¨ë“  ê´‘ê³ ê°€ ë™ì¼ (100% ê³µí‰)
- **ë°°ì§€**: ì—†ìŒ (ì¼ë°˜ ì„œë¹„ìŠ¤ì™€ êµ¬ë¶„ ì—†ì´ ìì—°ìŠ¤ëŸ½ê²Œ ë…¸ì¶œ)

### ğŸ’³ ê²°ì œ ë°©ë²•
1. **ê´‘ê³  í¬ë ˆë”§ ì‚¬ìš©** (ìš°ì„  ì°¨ê°)
2. **ë¬´í†µì¥ ì…ê¸ˆ** (ê³„ì¢Œ ì´ì²´)
3. **ì¹´ë“œ ìë™ ê²°ì œ** (ë“±ë¡ ì‹œ)

### ğŸ ëŸ°ì¹­ í”„ë¡œëª¨ì…˜
- **ê¸°ê°„**: í™ˆí˜ì´ì§€ ë°°í¬ í›„ 6ê°œì›”
- **í˜œíƒ**: ëª¨ë“  íŒë§¤ìì—ê²Œ 600,000ì› ê´‘ê³  í¬ë ˆë”§ ë¬´ë£Œ ì§€ê¸‰
- **ì‚¬ìš©**: ê¸°ë³¸ ê´‘ê³  6ê°œì›” ë¬´ë£Œ ì‚¬ìš© ê°€ëŠ¥

## ğŸ¯ ì™„ì „ ê³µí‰ ëœë¤ ë…¸ì¶œ ì•Œê³ ë¦¬ì¦˜

### í•µì‹¬ ì›ì¹™
1. **ì™„ë²½í•œ ëœë¤ì„±**: Fisher-Yates Shuffle ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©
2. **100% ê³µí‰**: ëª¨ë“  ê´‘ê³  ì„œë¹„ìŠ¤ê°€ ì™„ì „íˆ ë™ë“±í•œ í™•ë¥ 
3. **ê°€ì¤‘ì¹˜ ì—†ìŒ**: ì¶”ê°€ ë¹„ìš© ì—†ì´ ëª¨ë‘ì—ê²Œ ê³µí‰í•œ ê¸°íšŒ
4. **ìì—°ìŠ¤ëŸ¬ì›€**: ê´‘ê³ ì„ì„ í‘œì‹œí•˜ì§€ ì•Šì•„ ì‚¬ìš©ì ê²½í—˜ ìµœì í™”

### ë…¸ì¶œ ë°©ì‹

#### 1í˜ì´ì§€ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê´‘ê³  ì„œë¹„ìŠ¤ + ì¼ë°˜ ì„œë¹„ìŠ¤ í˜¼í•©      â”‚
â”‚  (ì™„ì „ ëœë¤ ì„ì„ - êµ¬ë¶„ ë¶ˆê°€)        â”‚
â”‚                                     â”‚
â”‚  1. ì„œë¹„ìŠ¤ A (ê´‘ê³ )                 â”‚
â”‚  2. ì„œë¹„ìŠ¤ B (ì¼ë°˜)                 â”‚
â”‚  3. ì„œë¹„ìŠ¤ C (ê´‘ê³ )                 â”‚
â”‚  4. ì„œë¹„ìŠ¤ D (ê´‘ê³ )                 â”‚
â”‚  5. ì„œë¹„ìŠ¤ E (ì¼ë°˜)                 â”‚
â”‚  ...                                â”‚
â”‚  (12-15ê°œ ë…¸ì¶œ)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### 1. advertising_credits (ê´‘ê³  í¬ë ˆë”§)
```sql
CREATE TABLE advertising_credits (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  seller_id UUID NOT NULL REFERENCES users(id),

  -- ì”ì•¡ ì •ë³´
  amount INTEGER NOT NULL DEFAULT 0, -- í˜„ì¬ ì”ì•¡ (ì›)
  initial_amount INTEGER NOT NULL DEFAULT 0, -- ì´ˆê¸° ì§€ê¸‰ì•¡
  used_amount INTEGER NOT NULL DEFAULT 0, -- ì‚¬ìš©í•œ ê¸ˆì•¡

  -- í”„ë¡œëª¨ì…˜ ì •ë³´
  promotion_type TEXT, -- 'launch_promo', 'referral', null
  expires_at TIMESTAMP WITH TIME ZONE, -- ë§Œë£Œì¼ (í”„ë¡œëª¨ì…˜ìš©)

  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_advertising_credits_seller_id ON advertising_credits(seller_id);
CREATE INDEX idx_advertising_credits_expires_at ON advertising_credits(expires_at);
```

### 2. advertising_subscriptions (ê´‘ê³  êµ¬ë…)
```sql
CREATE TABLE advertising_subscriptions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  seller_id UUID NOT NULL REFERENCES users(id),
  service_id UUID NOT NULL REFERENCES services(id),

  -- êµ¬ë… ì •ë³´ (ë‹¨ì¼ í”Œëœ)
  monthly_price INTEGER NOT NULL DEFAULT 100000, -- ì›” 10ë§Œì› ê³ ì •
  status TEXT NOT NULL DEFAULT 'active', -- 'active', 'pending_payment', 'cancelled', 'expired'

  -- ê²°ì œ ë°©ë²•
  payment_method TEXT NOT NULL, -- 'credit', 'card', 'bank_transfer'
  next_billing_date DATE NOT NULL,
  last_billed_at TIMESTAMP WITH TIME ZONE,

  -- ë¬´í†µì¥ ì…ê¸ˆ ì •ë³´
  bank_transfer_deadline TIMESTAMP WITH TIME ZONE, -- ì…ê¸ˆ ê¸°í•œ
  bank_transfer_confirmed BOOLEAN DEFAULT false, -- ì…ê¸ˆ í™•ì¸ ì—¬ë¶€
  bank_transfer_confirmed_at TIMESTAMP WITH TIME ZONE,
  bank_transfer_confirmed_by UUID REFERENCES admins(id), -- í™•ì¸í•œ ê´€ë¦¬ì

  -- êµ¬ë… ê¸°ê°„
  started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  cancelled_at TIMESTAMP WITH TIME ZONE,
  expires_at TIMESTAMP WITH TIME ZONE,

  -- í†µê³„
  total_impressions INTEGER DEFAULT 0, -- ì´ ë…¸ì¶œ ìˆ˜
  total_clicks INTEGER DEFAULT 0, -- ì´ í´ë¦­ ìˆ˜
  total_paid INTEGER DEFAULT 0, -- ì´ ê²°ì œ ê¸ˆì•¡

  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),

  UNIQUE(service_id) -- ì„œë¹„ìŠ¤ë‹¹ í•˜ë‚˜ì˜ í™œì„± êµ¬ë…ë§Œ
);

CREATE INDEX idx_ad_subscriptions_seller_id ON advertising_subscriptions(seller_id);
CREATE INDEX idx_ad_subscriptions_service_id ON advertising_subscriptions(service_id);
CREATE INDEX idx_ad_subscriptions_status ON advertising_subscriptions(status);
CREATE INDEX idx_ad_subscriptions_next_billing ON advertising_subscriptions(next_billing_date);
CREATE INDEX idx_ad_subscriptions_bank_transfer ON advertising_subscriptions(bank_transfer_confirmed) WHERE payment_method = 'bank_transfer';
```

### 3. advertising_payments (ê´‘ê³  ê²°ì œ ë‚´ì—­)
```sql
CREATE TABLE advertising_payments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  subscription_id UUID NOT NULL REFERENCES advertising_subscriptions(id),
  seller_id UUID NOT NULL REFERENCES users(id),

  -- ê²°ì œ ì •ë³´
  amount INTEGER NOT NULL, -- ê²°ì œ ê¸ˆì•¡
  payment_method TEXT NOT NULL, -- 'credit', 'card', 'bank_transfer'
  status TEXT NOT NULL DEFAULT 'pending', -- 'pending', 'completed', 'failed', 'cancelled'

  -- ë¬´í†µì¥ ì…ê¸ˆ ì •ë³´
  depositor_name TEXT, -- ì…ê¸ˆìëª…
  bank_name TEXT, -- ì…ê¸ˆ ì€í–‰
  deposit_date DATE, -- ì…ê¸ˆì¼
  deposit_time TIME, -- ì…ê¸ˆ ì‹œê°„
  receipt_image TEXT, -- ì…ê¸ˆì¦ ì´ë¯¸ì§€ URL

  -- ì¹´ë“œ ê²°ì œ ì •ë³´
  pg_transaction_id TEXT, -- PGì‚¬ ê±°ë˜ ID
  card_company TEXT,
  card_number_masked TEXT,

  -- ì²˜ë¦¬ ì •ë³´
  paid_at TIMESTAMP WITH TIME ZONE,
  confirmed_at TIMESTAMP WITH TIME ZONE,
  confirmed_by UUID REFERENCES admins(id), -- í™•ì¸í•œ ê´€ë¦¬ì (ë¬´í†µì¥ ì…ê¸ˆ)
  admin_memo TEXT, -- ê´€ë¦¬ì ë©”ëª¨

  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_ad_payments_subscription_id ON advertising_payments(subscription_id);
CREATE INDEX idx_ad_payments_seller_id ON advertising_payments(seller_id);
CREATE INDEX idx_ad_payments_status ON advertising_payments(status);
CREATE INDEX idx_ad_payments_payment_method ON advertising_payments(payment_method);
```

### 4. advertising_impressions (ë…¸ì¶œ ê¸°ë¡)
```sql
CREATE TABLE advertising_impressions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  subscription_id UUID NOT NULL REFERENCES advertising_subscriptions(id),
  service_id UUID NOT NULL REFERENCES services(id),

  -- ë…¸ì¶œ ì •ë³´
  category_id UUID REFERENCES categories(id),
  position INTEGER NOT NULL, -- ë…¸ì¶œ ìˆœì„œ (1, 2, 3...)
  page_number INTEGER DEFAULT 1, -- í˜ì´ì§€ ë²ˆí˜¸

  -- ì‚¬ìš©ì ì •ë³´
  user_id UUID REFERENCES users(id),
  session_id TEXT,
  ip_address INET,
  user_agent TEXT,

  -- í´ë¦­ ì—¬ë¶€
  clicked BOOLEAN DEFAULT false,
  clicked_at TIMESTAMP WITH TIME ZONE,

  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_ad_impressions_subscription_id ON advertising_impressions(subscription_id);
CREATE INDEX idx_ad_impressions_service_id ON advertising_impressions(service_id);
CREATE INDEX idx_ad_impressions_created_at ON advertising_impressions(created_at);
```

### 5. credit_transactions (í¬ë ˆë”§ ê±°ë˜ ë‚´ì—­)
```sql
CREATE TABLE credit_transactions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  credit_id UUID NOT NULL REFERENCES advertising_credits(id),
  seller_id UUID NOT NULL REFERENCES users(id),

  -- ê±°ë˜ ì •ë³´
  transaction_type TEXT NOT NULL, -- 'earned', 'spent', 'refunded', 'expired'
  amount INTEGER NOT NULL, -- ì–‘ìˆ˜: ì§€ê¸‰, ìŒìˆ˜: ì‚¬ìš©
  balance_after INTEGER NOT NULL, -- ê±°ë˜ í›„ ì”ì•¡

  -- ìƒì„¸ ì •ë³´
  description TEXT NOT NULL,
  reference_type TEXT, -- 'subscription', 'promotion', 'refund'
  reference_id UUID, -- subscription_id ë“±

  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_credit_transactions_credit_id ON credit_transactions(credit_id);
CREATE INDEX idx_credit_transactions_seller_id ON credit_transactions(seller_id);
```

## ğŸ’³ ê²°ì œ í”„ë¡œì„¸ìŠ¤

### 1. í¬ë ˆë”§ ìš°ì„  ì‚¬ìš©
```typescript
// í¬ë ˆë”§ì´ ìˆìœ¼ë©´ ìë™ìœ¼ë¡œ í¬ë ˆë”§ë¶€í„° ì°¨ê°
async function payWithCredit(
  sellerId: string,
  subscriptionId: string,
  amount: number
): Promise<{ success: boolean; remaining: number }> {
  const { data: credits } = await supabase
    .from('advertising_credits')
    .select('*')
    .eq('seller_id', sellerId)
    .gt('amount', 0)
    .or('expires_at.is.null,expires_at.gt.now()')
    .order('expires_at', { ascending: true, nullsFirst: false });

  let remaining = amount;

  for (const credit of credits || []) {
    if (remaining <= 0) break;

    const useAmount = Math.min(credit.amount, remaining);

    await supabase
      .from('advertising_credits')
      .update({
        amount: credit.amount - useAmount,
        used_amount: credit.used_amount + useAmount
      })
      .eq('id', credit.id);

    await supabase.from('credit_transactions').insert({
      credit_id: credit.id,
      seller_id: sellerId,
      transaction_type: 'spent',
      amount: -useAmount,
      balance_after: credit.amount - useAmount,
      description: 'ê´‘ê³  êµ¬ë… ì›” ê²°ì œ',
      reference_type: 'subscription',
      reference_id: subscriptionId
    });

    remaining -= useAmount;
  }

  return { success: remaining === 0, remaining };
}
```

### 2. ë¬´í†µì¥ ì…ê¸ˆ í”„ë¡œì„¸ìŠ¤

#### Step 1: íŒë§¤ìê°€ ë¬´í†µì¥ ì…ê¸ˆ ì„ íƒ
```typescript
async function requestBankTransferPayment(
  sellerId: string,
  subscriptionId: string,
  amount: number
) {
  const deadline = addDays(new Date(), 3); // 3ì¼ ë‚´ ì…ê¸ˆ

  // ê²°ì œ ë‚´ì—­ ìƒì„±
  const { data: payment } = await supabase
    .from('advertising_payments')
    .insert({
      subscription_id: subscriptionId,
      seller_id: sellerId,
      amount,
      payment_method: 'bank_transfer',
      status: 'pending'
    })
    .select()
    .single();

  // êµ¬ë… ìƒíƒœ ì—…ë°ì´íŠ¸
  await supabase
    .from('advertising_subscriptions')
    .update({
      status: 'pending_payment',
      payment_method: 'bank_transfer',
      bank_transfer_deadline: deadline
    })
    .eq('id', subscriptionId);

  // íŒë§¤ìì—ê²Œ ì…ê¸ˆ ì•ˆë‚´ ì•Œë¦¼
  await sendBankTransferInstructions(sellerId, payment.id, amount, deadline);

  return payment;
}
```

#### Step 2: ì…ê¸ˆ ì•ˆë‚´ ì•Œë¦¼
```typescript
async function sendBankTransferInstructions(
  sellerId: string,
  paymentId: string,
  amount: number,
  deadline: Date
) {
  const bankInfo = {
    bankName: process.env.NEXT_PUBLIC_BANK_NAME, // "êµ­ë¯¼ì€í–‰"
    accountNumber: process.env.NEXT_PUBLIC_BANK_ACCOUNT, // "123-456-789012"
    accountHolder: process.env.NEXT_PUBLIC_BANK_HOLDER, // "ëŒíŒŒêµ¬"
  };

  const message = `
[ê´‘ê³  êµ¬ë… ê²°ì œ ì•ˆë‚´]

ì…ê¸ˆ ê¸ˆì•¡: ${amount.toLocaleString()}ì›
ì…ê¸ˆ ê³„ì¢Œ: ${bankInfo.bankName} ${bankInfo.accountNumber}
ì˜ˆê¸ˆì£¼: ${bankInfo.accountHolder}
ì…ê¸ˆ ê¸°í•œ: ${deadline.toLocaleDateString()} ${deadline.toLocaleTimeString()}

ì…ê¸ˆìëª…: [íŒë§¤ìëª…-ê²°ì œID-${paymentId.slice(0, 8)}]
ì˜ˆ) í™ê¸¸ë™-ê²°ì œID-abc12345

â€» ì…ê¸ˆ í›„ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë˜ë©°, í™•ì¸ê¹Œì§€ ìµœëŒ€ 1ì‹œê°„ ì†Œìš”ë©ë‹ˆë‹¤.
â€» ì…ê¸ˆìëª…ì„ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.
  `;

  await supabase.from('notifications').insert({
    user_id: sellerId,
    type: 'payment_bank_transfer',
    title: 'ê´‘ê³  êµ¬ë… ê²°ì œ - ë¬´í†µì¥ ì…ê¸ˆ ì•ˆë‚´',
    content: message,
    link_url: `/seller/advertising/payments/${paymentId}`
  });
}
```

#### Step 3: íŒë§¤ìê°€ ì…ê¸ˆì¦ ì—…ë¡œë“œ (ì„ íƒ)
```typescript
async function uploadPaymentReceipt(
  paymentId: string,
  receiptImage: File,
  depositInfo: {
    depositorName: string;
    bankName: string;
    depositDate: string;
    depositTime: string;
  }
) {
  // ì…ê¸ˆì¦ ì´ë¯¸ì§€ ì—…ë¡œë“œ
  const fileName = `receipts/${paymentId}.jpg`;
  const { data: uploadData } = await supabase.storage
    .from('payments')
    .upload(fileName, receiptImage);

  // ê²°ì œ ì •ë³´ ì—…ë°ì´íŠ¸
  await supabase
    .from('advertising_payments')
    .update({
      depositor_name: depositInfo.depositorName,
      bank_name: depositInfo.bankName,
      deposit_date: depositInfo.depositDate,
      deposit_time: depositInfo.depositTime,
      receipt_image: uploadData.path
    })
    .eq('id', paymentId);

  // ê´€ë¦¬ìì—ê²Œ í™•ì¸ ìš”ì²­ ì•Œë¦¼
  await notifyAdminForPaymentConfirmation(paymentId);
}
```

#### Step 4: ê´€ë¦¬ìê°€ ì…ê¸ˆ í™•ì¸
```typescript
async function confirmBankTransferPayment(
  paymentId: string,
  adminId: string,
  memo?: string
) {
  const now = new Date().toISOString();

  // ê²°ì œ í™•ì¸ ì²˜ë¦¬
  const { data: payment } = await supabase
    .from('advertising_payments')
    .update({
      status: 'completed',
      paid_at: now,
      confirmed_at: now,
      confirmed_by: adminId,
      admin_memo: memo
    })
    .eq('id', paymentId)
    .select()
    .single();

  // êµ¬ë… í™œì„±í™”
  await supabase
    .from('advertising_subscriptions')
    .update({
      status: 'active',
      last_billed_at: now,
      next_billing_date: addMonths(new Date(), 1),
      bank_transfer_confirmed: true,
      bank_transfer_confirmed_at: now,
      bank_transfer_confirmed_by: adminId,
      total_paid: supabase.sql`total_paid + ${payment.amount}`
    })
    .eq('id', payment.subscription_id);

  // íŒë§¤ìì—ê²Œ í™•ì¸ ì™„ë£Œ ì•Œë¦¼
  await supabase.from('notifications').insert({
    user_id: payment.seller_id,
    type: 'payment_confirmed',
    title: 'ê´‘ê³  ê²°ì œ í™•ì¸ ì™„ë£Œ',
    content: `${payment.amount.toLocaleString()}ì› ì…ê¸ˆì´ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤. ê´‘ê³ ê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.`,
    link_url: '/seller/advertising'
  });
}
```

#### Step 5: ì…ê¸ˆ ê¸°í•œ ì´ˆê³¼ ì‹œ ìë™ ì·¨ì†Œ
```typescript
// Cron Job - ë§¤ì‹œê°„ ì‹¤í–‰
async function cancelExpiredBankTransfers() {
  const now = new Date().toISOString();

  // ê¸°í•œ ì´ˆê³¼ëœ ë¯¸ì…ê¸ˆ ê²°ì œ ì¡°íšŒ
  const { data: expiredPayments } = await supabase
    .from('advertising_payments')
    .select('*, subscription:advertising_subscriptions(*)')
    .eq('payment_method', 'bank_transfer')
    .eq('status', 'pending')
    .lt('subscription.bank_transfer_deadline', now);

  for (const payment of expiredPayments || []) {
    // ê²°ì œ ì·¨ì†Œ
    await supabase
      .from('advertising_payments')
      .update({ status: 'cancelled' })
      .eq('id', payment.id);

    // êµ¬ë… ë§Œë£Œ
    await supabase
      .from('advertising_subscriptions')
      .update({
        status: 'expired',
        expires_at: now
      })
      .eq('id', payment.subscription_id);

    // íŒë§¤ìì—ê²Œ ì•Œë¦¼
    await supabase.from('notifications').insert({
      user_id: payment.seller_id,
      type: 'payment_expired',
      title: 'ê´‘ê³  ê²°ì œ ê¸°í•œ ë§Œë£Œ',
      content: 'ì…ê¸ˆ ê¸°í•œì´ ì§€ë‚˜ ê´‘ê³ ê°€ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹ ì²­í•´ì£¼ì„¸ìš”.',
      link_url: '/seller/advertising'
    });
  }
}
```

### 3. ì¹´ë“œ ìë™ ê²°ì œ (ì„ íƒ)
```typescript
async function setupCardAutoPayment(
  sellerId: string,
  subscriptionId: string,
  cardInfo: any
) {
  // PGì‚¬ ì—°ë™ (PortOne)
  const billingKey = await registerBillingKey(sellerId, cardInfo);

  await supabase
    .from('advertising_subscriptions')
    .update({
      payment_method: 'card',
      // billing_keyëŠ” ì•”í˜¸í™”í•˜ì—¬ ì €ì¥
    })
    .eq('id', subscriptionId);
}

// ì›”ê°„ ìë™ ê²°ì œ
async function processCardAutoPayment(
  subscriptionId: string,
  amount: number
) {
  // PortOne ì •ê¸°ê²°ì œ API í˜¸ì¶œ
  const result = await portone.payment.schedule({
    subscriptionId,
    amount
  });

  if (result.success) {
    await supabase
      .from('advertising_payments')
      .insert({
        subscription_id: subscriptionId,
        amount,
        payment_method: 'card',
        status: 'completed',
        pg_transaction_id: result.transactionId,
        paid_at: new Date().toISOString()
      });
  }
}
```

## ğŸ¦ ë¬´í†µì¥ ì…ê¸ˆ ê´€ë¦¬ì í˜ì´ì§€

### ì…ê¸ˆ í™•ì¸ ëŒ€ê¸° ëª©ë¡
```typescript
interface BankTransferConfirmationList {
  pendingPayments: Array<{
    id: string;
    sellerName: string;
    serviceName: string;
    amount: number;
    depositorName: string;
    bankName: string;
    depositDate: string;
    depositTime: string;
    receiptImage: string | null;
    deadline: Date;
    createdAt: Date;
  }>;
}
```

### UI ì˜ˆì‹œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë¬´í†µì¥ ì…ê¸ˆ í™•ì¸ ëŒ€ê¸°                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  ğŸ”” í™•ì¸ ëŒ€ê¸° ì¤‘: 3ê±´                                   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ í™ê¸¸ë™ íŒë§¤ì - ì›¹ì‚¬ì´íŠ¸ ê°œë°œ ì„œë¹„ìŠ¤           â”‚     â”‚
â”‚  â”‚ ê²°ì œ ê¸ˆì•¡: 100,000ì›                          â”‚     â”‚
â”‚  â”‚ ì…ê¸ˆìëª…: í™ê¸¸ë™-abc12345                     â”‚     â”‚
â”‚  â”‚ ì…ê¸ˆì¼ì‹œ: 2025-01-12 14:30                    â”‚     â”‚
â”‚  â”‚ ì…ê¸ˆ ì€í–‰: êµ­ë¯¼ì€í–‰                           â”‚     â”‚
â”‚  â”‚ ì…ê¸ˆ ê¸°í•œ: 2025-01-15 23:59                   â”‚     â”‚
â”‚  â”‚ [ì…ê¸ˆì¦ ë³´ê¸°]                                 â”‚     â”‚
â”‚  â”‚                                               â”‚     â”‚
â”‚  â”‚ [í™•ì¸ ì™„ë£Œ] [ê±°ì ˆ]                            â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ê¹€ì² ìˆ˜ íŒë§¤ì - ë””ìì¸ ì„œë¹„ìŠ¤                 â”‚     â”‚
â”‚  â”‚ ...                                           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ˆ íŒë§¤ì ëŒ€ì‹œë³´ë“œ

### ê´‘ê³  ê²°ì œ í˜ì´ì§€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê´‘ê³  ê²°ì œ                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  ğŸ’° í˜„ì¬ í¬ë ˆë”§: 400,000ì›                     â”‚
â”‚                                                 â”‚
â”‚  ê²°ì œ ê¸ˆì•¡: 100,000ì›                          â”‚
â”‚                                                 â”‚
â”‚  âœ… í¬ë ˆë”§ìœ¼ë¡œ ê²°ì œ (400,000ì› ë³´ìœ )           â”‚
â”‚     â†’ ì”ì•¡: 300,000ì›                          â”‚
â”‚                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€ ë˜ëŠ” â”€â”€â”€â”€â”€â”€â”€                          â”‚
â”‚                                                 â”‚
â”‚  â—‹ ë¬´í†µì¥ ì…ê¸ˆ                                 â”‚
â”‚     ì…ê¸ˆ ê³„ì¢Œ: êµ­ë¯¼ì€í–‰ 123-456-789012         â”‚
â”‚     ì˜ˆê¸ˆì£¼: ëŒíŒŒêµ¬                             â”‚
â”‚     ì…ê¸ˆìëª…: [ì´ë¦„-ê²°ì œID-xxxxx]              â”‚
â”‚     ì…ê¸ˆ ê¸°í•œ: 3ì¼ ì´ë‚´                        â”‚
â”‚                                                 â”‚
â”‚  â—‹ ì¹´ë“œ ìë™ ê²°ì œ (ë“±ë¡ í•„ìš”)                  â”‚
â”‚     [ì¹´ë“œ ë“±ë¡í•˜ê¸°]                            â”‚
â”‚                                                 â”‚
â”‚  [ê²°ì œí•˜ê¸°]                                    â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ êµ¬í˜„ ìˆœì„œ

1. **Phase 1**: ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„± âœ…
2. **Phase 2**: í¬ë ˆë”§ ì‹œìŠ¤í…œ êµ¬í˜„
3. **Phase 3**: ë¬´í†µì¥ ì…ê¸ˆ ì‹œìŠ¤í…œ êµ¬í˜„
4. **Phase 4**: êµ¬ë… ë° ê²°ì œ API êµ¬í˜„
5. **Phase 5**: ëœë¤ ë…¸ì¶œ ì•Œê³ ë¦¬ì¦˜ í†µí•©
6. **Phase 6**: íŒë§¤ì ê´‘ê³  ëŒ€ì‹œë³´ë“œ UI
7. **Phase 7**: ê´€ë¦¬ì ì…ê¸ˆ í™•ì¸ í˜ì´ì§€
8. **Phase 8**: ìë™ ê²°ì œ Cron Jobs

## ğŸ“ í•µì‹¬ íŠ¹ì§•

âœ… **ì™„ë²½í•œ ê³µí‰ì„±**: ëª¨ë“  ê´‘ê³ ê°€ 100% ë™ì¼í•œ í™•ë¥ 
âœ… **ë‹¨ìˆœí•œ ê°€ê²©**: ì›” 10ë§Œì› ë‹¨ì¼ í”Œëœ
âœ… **ë°°ì§€ ì—†ìŒ**: ìì—°ìŠ¤ëŸ¬ìš´ ë…¸ì¶œ
âœ… **ë‹¤ì–‘í•œ ê²°ì œ**: í¬ë ˆë”§ / ë¬´í†µì¥ ì…ê¸ˆ / ì¹´ë“œ
âœ… **ì´ˆê¸° ì§€ì›**: 6ê°œì›” ë¬´ë£Œ (60ë§Œì› í¬ë ˆë”§)
âœ… **íˆ¬ëª…í•œ í†µê³„**: ëª¨ë“  ë…¸ì¶œ/í´ë¦­ ì¶”ì 
